if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/aui-image-viewer-media/aui-image-viewer-media.js']) {
   __coverage__['build/aui-image-viewer-media/aui-image-viewer-media.js'] = {"path":"build/aui-image-viewer-media/aui-image-viewer-media.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":53}}},"2":{"name":"(anonymous_2)","line":139,"loc":{"start":{"line":139,"column":21},"end":{"line":139,"column":32}}},"3":{"name":"(anonymous_3)","line":152,"loc":{"start":{"line":152,"column":20},"end":{"line":152,"column":31}}},"4":{"name":"(anonymous_4)","line":163,"loc":{"start":{"line":163,"column":23},"end":{"line":163,"column":40}}},"5":{"name":"(anonymous_5)","line":172,"loc":{"start":{"line":172,"column":16},"end":{"line":172,"column":37}}},"6":{"name":"(anonymous_6)","line":189,"loc":{"start":{"line":189,"column":26},"end":{"line":189,"column":42}}},"7":{"name":"(anonymous_7)","line":240,"loc":{"start":{"line":240,"column":28},"end":{"line":240,"column":44}}},"8":{"name":"(anonymous_8)","line":258,"loc":{"start":{"line":258,"column":24},"end":{"line":258,"column":50}}},"9":{"name":"(anonymous_9)","line":264,"loc":{"start":{"line":264,"column":16},"end":{"line":264,"column":37}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":298,"column":75}},"2":{"start":{"line":9,"column":0},"end":{"line":23,"column":49}},"3":{"start":{"line":36,"column":0},"end":{"line":291,"column":3}},"4":{"start":{"line":140,"column":12},"end":{"line":143,"column":14}},"5":{"start":{"line":153,"column":12},"end":{"line":153,"column":61}},"6":{"start":{"line":164,"column":12},"end":{"line":164,"column":32}},"7":{"start":{"line":166,"column":12},"end":{"line":166,"column":54}},"8":{"start":{"line":168,"column":12},"end":{"line":168,"column":36}},"9":{"start":{"line":170,"column":12},"end":{"line":175,"column":14}},"10":{"start":{"line":173,"column":20},"end":{"line":173,"column":75}},"11":{"start":{"line":177,"column":12},"end":{"line":177,"column":29}},"12":{"start":{"line":190,"column":12},"end":{"line":198,"column":25}},"13":{"start":{"line":200,"column":12},"end":{"line":227,"column":13}},"14":{"start":{"line":201,"column":16},"end":{"line":201,"column":52}},"15":{"start":{"line":202,"column":16},"end":{"line":224,"column":17}},"16":{"start":{"line":203,"column":20},"end":{"line":203,"column":64}},"17":{"start":{"line":204,"column":20},"end":{"line":207,"column":22}},"18":{"start":{"line":209,"column":20},"end":{"line":209,"column":63}},"19":{"start":{"line":210,"column":20},"end":{"line":212,"column":21}},"20":{"start":{"line":211,"column":24},"end":{"line":211,"column":49}},"21":{"start":{"line":214,"column":20},"end":{"line":217,"column":23}},"22":{"start":{"line":218,"column":20},"end":{"line":218,"column":63}},"23":{"start":{"line":220,"column":20},"end":{"line":220,"column":54}},"24":{"start":{"line":221,"column":20},"end":{"line":221,"column":68}},"25":{"start":{"line":223,"column":20},"end":{"line":223,"column":49}},"26":{"start":{"line":226,"column":16},"end":{"line":226,"column":40}},"27":{"start":{"line":241,"column":12},"end":{"line":243,"column":53}},"28":{"start":{"line":245,"column":12},"end":{"line":247,"column":13}},"29":{"start":{"line":246,"column":16},"end":{"line":246,"column":40}},"30":{"start":{"line":259,"column":12},"end":{"line":259,"column":58}},"31":{"start":{"line":260,"column":12},"end":{"line":260,"column":47}},"32":{"start":{"line":262,"column":12},"end":{"line":279,"column":14}},"33":{"start":{"line":265,"column":20},"end":{"line":271,"column":22}},"34":{"start":{"line":273,"column":20},"end":{"line":273,"column":91}},"35":{"start":{"line":275,"column":20},"end":{"line":277,"column":21}},"36":{"start":{"line":276,"column":24},"end":{"line":276,"column":49}},"37":{"start":{"line":281,"column":12},"end":{"line":281,"column":27}},"38":{"start":{"line":293,"column":0},"end":{"line":293,"column":40}},"39":{"start":{"line":295,"column":0},"end":{"line":295,"column":30}}},"branchMap":{"1":{"line":173,"type":"binary-expr","locations":[{"start":{"line":173,"column":27},"end":{"line":173,"column":53}},{"start":{"line":173,"column":58},"end":{"line":173,"column":73}}]},"2":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":12},"end":{"line":200,"column":12}},{"start":{"line":200,"column":12},"end":{"line":200,"column":12}}]},"3":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":16},"end":{"line":202,"column":16}},{"start":{"line":202,"column":16},"end":{"line":202,"column":16}}]},"4":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":20},"end":{"line":210,"column":20}},{"start":{"line":210,"column":20},"end":{"line":210,"column":20}}]},"5":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":12},"end":{"line":245,"column":12}},{"start":{"line":245,"column":12},"end":{"line":245,"column":12}}]},"6":{"line":273,"type":"binary-expr","locations":[{"start":{"line":273,"column":33},"end":{"line":273,"column":61}},{"start":{"line":273,"column":65},"end":{"line":273,"column":90}}]},"7":{"line":275,"type":"if","locations":[{"start":{"line":275,"column":20},"end":{"line":275,"column":20}},{"start":{"line":275,"column":20},"end":{"line":275,"column":20}}]}},"code":["(function () { YUI.add('aui-image-viewer-media', function (A, NAME) {","","/**"," * The ImageViewer Media Plugin"," *"," * @module aui-media-viewer-plugin"," */","","var Lang = A.Lang,","    Do = A.Do,","","    CSS_IMAGE_VIEWER_IMAGE = A.getClassName('image', 'viewer', 'base', 'image'),","    CSS_IMAGE_VIEWER_LOADING = A.getClassName('image', 'viewer', 'base', 'loading'),","","    DEFAULT_OPTIONS = {","        height: 360,","        width: 640,","        wmode: 'embed'","    },","","    REGEX_DOMAIN = 'https?://(?:www\\\\.)?{domain}',","","    REGEX_PARAM = '(?:[\\\\?&]|^){param}=([^&#]*)';","","/**"," * A base class for `A.MediaViewerPlugin`."," *"," * Check the [live demo](http://alloyui.com/examples/image-viewer/)."," *"," * @class A.MediaViewerPlugin"," * @extends Plugin.Base"," * @param {Object} config Object literal specifying widget configuration"," *     properties."," * @constructor"," */","var MediaViewerPlugin = A.Component.create({","    /**","     * Static property provides a string to identify the class.","     *","     * @property NAME","     * @type String","     * @static","     */","    NAME: 'mediaViewerPlugin',","","    /**","     * Static property provides a string to identify the namespace.","     *","     * @property NS","     * @type String","     * @static","     */","    NS: 'media',","","    /**","     * Static property used to define the default attribute","     * configuration for the `A.MediaViewerPlugin`.","     *","     * @property ATTRS","     * @type Object","     * @static","     */","    ATTRS: {","","        /**","         * Contains the templates, options and definitions for each provider","         * (Flash, Youtube, Vimeo).","         *","         * @attribute providers","         * @type Object","         */","        providers: {","            validator: Lang.isObject,","            value: {","                'flash': {","                    container: '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" ' +","                        'width=\"{width}\" height=\"{height}\"><param name=\"wmode\" value=\"{wmode}\" />' +","                        '<param name=\"allowfullscreen\" value=\"true\" />' +","                        '<param name=\"allowscriptaccess\" value=\"always\" /><param name=\"movie\" value=\"{media}\" />' +","                        '<embed src=\"{media}\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\"' +","                        ' allowscriptaccess=\"always\" width=\"{width}\" height=\"{height}\" wmode=\"{wmode}\">' +","                        '</embed></object>',","                    matcher: /\\b.swf\\b/i,","                    options: DEFAULT_OPTIONS,","                    mediaRegex: /([^?&#]+)/","                },","                'youtube': {","                    container: '<iframe width=\"{width}\" height=\"{height}\" src=\"http://www.youtube.com/embed/{media}\" ' +","                        'frameborder=\"0\" allowfullscreen></iframe>',","                    matcher: new RegExp(","                        Lang.sub(","                            REGEX_DOMAIN, {","                                domain: 'youtube.com'","                            }","                        ),","                        'i'","                    ),","                    options: DEFAULT_OPTIONS,","                    mediaRegex: /[\\?&]v=([^&#]*)/i","                },","                'vimeo': {","                    container: '<iframe ' +","                        'src=\"http://player.vimeo.com/video/{media}?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff\"' +","                        ' width=\"{width}\" height=\"{height}\" frameborder=\"0\"></iframe>',","                    matcher: new RegExp(","                        Lang.sub(","                            REGEX_DOMAIN, {","                                domain: 'vimeo.com'","                            }","                        ),","                        'i'","                    ),","                    options: DEFAULT_OPTIONS,","                    mediaRegex: /\\/(\\d+)/","                }","            }","        }","    },","","    /**","     * Static property used to define which component it extends.","     *","     * @property EXTENDS","     * @type Object","     * @static","     */","    EXTENDS: A.Plugin.Base,","","    prototype: {","","        /**","         * Construction logic executed during `A.MediaViewerPlugin` instantiation.","         * Lifecycle.","         *","         * @method initializer","         * @param config","         * @protected","         */","        initializer: function() {","            this._eventHandles = [","                this.beforeHostMethod('_loadImage', this._beforeLoadImage),","                this.beforeHostMethod('_renderImage', this._beforeRenderImage)","            ];","        },","","        /**","         * Destructor implementation for the `A.MediaViewerPlugin` class. Lifecycle.","         *","         * @method destructor","         * @protected","         */","        destructor: function() {","            (new A.EventHandle(this._eventHandles)).detach();","        },","","        /**","         * Gets the media type from the `providers`.","         *","         * @method _getMediaType","         * @param source","         * @protected","         */","        _getMediaType: function(source) {","            var instance = this;","","            var providers = instance.get('providers');","","            var mediaType = 'image';","","            A.some(","                providers,","                function(value, key) {","                    return value.matcher.test(source) && (mediaType = key);","                }","            );","","            return mediaType;","        },","","        /**","         * If the media in the specified index is an image, this will defer to","         * the host's _loadImage default behavior. Otherwise, _loadImage will be","         * prevented and the media node will be loaded by this function instead.","         *","         * @method _beforeLoadImage","         * @param {Number} index The index of the image to load.","         * @protected","         */","        _beforeLoadImage: function(index) {","            var host = this.get('host'),","                container = host._getCurrentImageContainer(),","                link = host.get('links').item(index),","                linkHref = link.getAttribute('href'),","                media,","                mediaNode,","                mediaType = this._getMediaType(linkHref),","                options,","                provider;","","            if (mediaType !== 'image') {","                mediaNode = host._getCurrentImage();","                if (!mediaNode) {","                    provider = this.get('providers')[mediaType];","                    options = this._updateOptions(","                        link,","                        A.clone(provider.options)","                    );","","                    media = provider.mediaRegex.exec(linkHref);","                    if (media) {","                        options.media = media[1];","                    }","","                    mediaNode = A.Node.create(Lang.sub(","                        provider.container,","                        options","                    ));","                    mediaNode.addClass(CSS_IMAGE_VIEWER_IMAGE);","","                    mediaNode.setData('loaded', true);","                    container.removeClass(CSS_IMAGE_VIEWER_LOADING);","","                    container.prepend(mediaNode);","                }","","                return new Do.Prevent();","            }","        },","","        /**","         * If the media in the specified index is an image, this will defer to","         * the host's _renderImage default behavior. Otherwise, _renderImage will","         * be prevented, as the media node should only be rendered when it's loaded","         * for the first time (on _beforeLoadImage).","         *","         * @method _beforeRenderImage","         * @param {Number} index The index of the media to be loaded.","         * @protected","         */","        _beforeRenderImage: function(index) {","            var host = this.get('host'),","                link = host.get('links').item(index),","                linkHref = link.getAttribute('href');","","            if (this._getMediaType(linkHref) !== 'image') {","                return new Do.Prevent();","            }","        },","","        /**","         * Goes through the options and update its value.","         *","         * @method _updateOptions","         * @param source","         * @param options","         * @protected","         */","        _updateOptions: function(source, options) {","            var dataOptions = source.attr('data-options');","            var linkHref = source.attr('href');","","            A.each(","                options,","                function(value, key) {","                    var regexParam = new RegExp(","                        Lang.sub(","                            REGEX_PARAM, {","                                param: key","                            }","                        )","                    );","","                    var result = regexParam.exec(dataOptions) || regexParam.exec(linkHref);","","                    if (result) {","                        options[key] = result[1];","                    }","                }","            );","","            return options;","        }","    },","","    DATA_OPTIONS: 'data-options',","","    DEFAULT_OPTIONS: DEFAULT_OPTIONS,","","    REGEX_DOMAIN: REGEX_DOMAIN,","    REGEX_PARAM: REGEX_PARAM","});","","A.MediaViewerPlugin = MediaViewerPlugin;","","A.MediaViewer = A.ImageViewer;","","","}, '3.0.1', {\"requires\": [\"plugin\", \"aui-component\", \"aui-image-viewer\"]});","","}());"]};
}
var __cov_khMfAJ1c9kyxwI63Wpgdkg = __coverage__['build/aui-image-viewer-media/aui-image-viewer-media.js'];
__cov_khMfAJ1c9kyxwI63Wpgdkg.s['1']++;YUI.add('aui-image-viewer-media',function(A,NAME){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['1']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['2']++;var Lang=A.Lang,Do=A.Do,CSS_IMAGE_VIEWER_IMAGE=A.getClassName('image','viewer','base','image'),CSS_IMAGE_VIEWER_LOADING=A.getClassName('image','viewer','base','loading'),DEFAULT_OPTIONS={height:360,width:640,wmode:'embed'},REGEX_DOMAIN='https?://(?:www\\.)?{domain}',REGEX_PARAM='(?:[\\?&]|^){param}=([^&#]*)';__cov_khMfAJ1c9kyxwI63Wpgdkg.s['3']++;var MediaViewerPlugin=A.Component.create({NAME:'mediaViewerPlugin',NS:'media',ATTRS:{providers:{validator:Lang.isObject,value:{'flash':{container:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" '+'width="{width}" height="{height}"><param name="wmode" value="{wmode}" />'+'<param name="allowfullscreen" value="true" />'+'<param name="allowscriptaccess" value="always" /><param name="movie" value="{media}" />'+'<embed src="{media}" type="application/x-shockwave-flash" allowfullscreen="true"'+' allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}">'+'</embed></object>',matcher:/\b.swf\b/i,options:DEFAULT_OPTIONS,mediaRegex:/([^?&#]+)/},'youtube':{container:'<iframe width="{width}" height="{height}" src="http://www.youtube.com/embed/{media}" '+'frameborder="0" allowfullscreen></iframe>',matcher:new RegExp(Lang.sub(REGEX_DOMAIN,{domain:'youtube.com'}),'i'),options:DEFAULT_OPTIONS,mediaRegex:/[\?&]v=([^&#]*)/i},'vimeo':{container:'<iframe '+'src="http://player.vimeo.com/video/{media}?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff"'+' width="{width}" height="{height}" frameborder="0"></iframe>',matcher:new RegExp(Lang.sub(REGEX_DOMAIN,{domain:'vimeo.com'}),'i'),options:DEFAULT_OPTIONS,mediaRegex:/\/(\d+)/}}}},EXTENDS:A.Plugin.Base,prototype:{initializer:function(){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['2']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['4']++;this._eventHandles=[this.beforeHostMethod('_loadImage',this._beforeLoadImage),this.beforeHostMethod('_renderImage',this._beforeRenderImage)];},destructor:function(){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['3']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['5']++;new A.EventHandle(this._eventHandles).detach();},_getMediaType:function(source){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['4']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['6']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['7']++;var providers=instance.get('providers');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['8']++;var mediaType='image';__cov_khMfAJ1c9kyxwI63Wpgdkg.s['9']++;A.some(providers,function(value,key){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['5']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['10']++;return(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['1'][0]++,value.matcher.test(source))&&(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['1'][1]++,mediaType=key);});__cov_khMfAJ1c9kyxwI63Wpgdkg.s['11']++;return mediaType;},_beforeLoadImage:function(index){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['6']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['12']++;var host=this.get('host'),container=host._getCurrentImageContainer(),link=host.get('links').item(index),linkHref=link.getAttribute('href'),media,mediaNode,mediaType=this._getMediaType(linkHref),options,provider;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['13']++;if(mediaType!=='image'){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['2'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['14']++;mediaNode=host._getCurrentImage();__cov_khMfAJ1c9kyxwI63Wpgdkg.s['15']++;if(!mediaNode){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['3'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['16']++;provider=this.get('providers')[mediaType];__cov_khMfAJ1c9kyxwI63Wpgdkg.s['17']++;options=this._updateOptions(link,A.clone(provider.options));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['18']++;media=provider.mediaRegex.exec(linkHref);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['19']++;if(media){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['4'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['20']++;options.media=media[1];}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['4'][1]++;}__cov_khMfAJ1c9kyxwI63Wpgdkg.s['21']++;mediaNode=A.Node.create(Lang.sub(provider.container,options));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['22']++;mediaNode.addClass(CSS_IMAGE_VIEWER_IMAGE);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['23']++;mediaNode.setData('loaded',true);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['24']++;container.removeClass(CSS_IMAGE_VIEWER_LOADING);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['25']++;container.prepend(mediaNode);}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['3'][1]++;}__cov_khMfAJ1c9kyxwI63Wpgdkg.s['26']++;return new Do.Prevent();}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['2'][1]++;}},_beforeRenderImage:function(index){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['7']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['27']++;var host=this.get('host'),link=host.get('links').item(index),linkHref=link.getAttribute('href');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['28']++;if(this._getMediaType(linkHref)!=='image'){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['5'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['29']++;return new Do.Prevent();}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['5'][1]++;}},_updateOptions:function(source,options){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['8']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['30']++;var dataOptions=source.attr('data-options');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['31']++;var linkHref=source.attr('href');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['32']++;A.each(options,function(value,key){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['9']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['33']++;var regexParam=new RegExp(Lang.sub(REGEX_PARAM,{param:key}));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['34']++;var result=(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['6'][0]++,regexParam.exec(dataOptions))||(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['6'][1]++,regexParam.exec(linkHref));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['35']++;if(result){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['7'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['36']++;options[key]=result[1];}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['7'][1]++;}});__cov_khMfAJ1c9kyxwI63Wpgdkg.s['37']++;return options;}},DATA_OPTIONS:'data-options',DEFAULT_OPTIONS:DEFAULT_OPTIONS,REGEX_DOMAIN:REGEX_DOMAIN,REGEX_PARAM:REGEX_PARAM});__cov_khMfAJ1c9kyxwI63Wpgdkg.s['38']++;A.MediaViewerPlugin=MediaViewerPlugin;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['39']++;A.MediaViewer=A.ImageViewer;},'3.0.1',{'requires':['plugin','aui-component','aui-image-viewer']});
