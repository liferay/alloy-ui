/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("loader-base",function(d){if(!YUI.Env[d.version]){(function(){var K=d.version,G="/build/",H=K+G,F=d.Env.base,C="gallery-2011.08.04-15-16",E="2in3",D="4",B="2.9.0",I=F+"combo?",J={version:K,root:H,base:d.Env.base,comboBase:I,skin:{defaultSkin:"sam",base:"assets/skins/",path:"skin.css",after:["cssreset","cssfonts","cssgrids","cssbase","cssreset-context","cssfonts-context"]},groups:{},patterns:{}},A=J.groups,z=function(M,N){var L=E+"."+(M||D)+"/"+(N||B)+G;A.yui2.base=F+L;A.yui2.root=L;},y=function(L){var M=(L||C)+G;A.gallery.base=F+M;A.gallery.root=M;};A[K]={};A.gallery={ext:false,combine:true,comboBase:I,update:y,patterns:{"gallery-":{},"lang/gallery-":{},"gallerycss-":{type:"css"}}};A.yui2={combine:true,ext:false,comboBase:I,update:z,patterns:{"yui2-":{configFn:function(L){if(/-skin|reset|fonts|grids|base/.test(L.name)){L.type="css";L.path=L.path.replace(/\.js/,".css");L.path=L.path.replace(/\/yui2-skin/,"/assets/skins/sam/yui2-skin");}}}}};y();z();YUI.Env[K]=J;}());}var f={},c=[],m=2048,a=YUI.Env,p=a._loaded,q="css",k="js",x="intl",u=d.version,w="",e=d.Object,t=e.each,j=d.Array,h=a._loaderQueue,v=a[u],b="skin-",i=d.Lang,n=a.mods,l,o,s={},r={},g=function(z,A,B,y){var C=z+"/"+A;if(!y){C+="-min";}C+="."+(B||q);return C;};d.Env.meta=v;d.Loader=function(C){var B=v.modules,z=this;l=v.md5;z.context=d;z.base=d.Env.meta.base+d.Env.meta.root;z.comboBase=d.Env.meta.comboBase;z.combine=C.base&&(C.base.indexOf(z.comboBase.substr(0,20))>-1);z.comboSep="&";z.maxURLLength=m;z.root=d.Env.meta.root;z.timeout=0;z.forceMap={};z.allowRollup=false;z.filters={};z.required={};z.patterns={};z.moduleInfo={};z.groups=d.merge(d.Env.meta.groups);z.skin=d.merge(d.Env.meta.skin);z.conditions={};z.config=C;z._internal=true;o=a._renderedMods;if(o){t(o,function A(E,D){z.moduleInfo[D]=E;});o=a._conditions;t(o,function y(E,D){z.conditions[D]=E;});}else{t(B,z.addModule,z);}if(!a._renderedMods){a._renderedMods=z.moduleInfo;a._conditions=z.conditions;}z._inspectPage();z._internal=false;z._config(C);z.testresults=null;if(d.config.tests){z.testresults=d.config.tests;}z.sorted=[];z.loaded=p[u];z.dirty=true;z.inserted={};z.skipped={};z.tested={};};d.Loader.prototype={FILTER_DEFS:{RAW:{"searchExp":"-min\\.js","replaceStr":".js"},DEBUG:{"searchExp":"-min\\.js","replaceStr":"-debug.js"}},_inspectPage:function(){t(n,function(A,z){if(A.details){var y=this.moduleInfo[z],C=A.details.requires,B=y&&y.requires;if(y){if(!y._inspected&&C&&B.length!=C.length){delete y.expanded;}}else{y=this.addModule(A.details,z);}y._inspected=true;}},this);},_requires:function(E,D){var A,C,F,G,y=this.moduleInfo,z=y[E],B=y[D];if(!z||!B){return false;}C=z.expanded_map;F=z.after_map;if(F&&(D in F)){return true;}F=B.after_map;if(F&&(E in F)){return false;}G=y[D]&&y[D].supersedes;if(G){for(A=0;A<G.length;A++){if(this._requires(E,G[A])){return true;}}}G=y[E]&&y[E].supersedes;if(G){for(A=0;A<G.length;A++){if(this._requires(D,G[A])){return false;}}}if(C&&(D in C)){return true;}if(z.ext&&z.type==q&&!B.ext&&B.type==q){return true;}return false;},_config:function(E){var A,z,D,B,C,F,y=this;if(E){for(A in E){if(E.hasOwnProperty(A)){D=E[A];if(A=="require"){y.require(D);}else{if(A=="skin"){d.mix(y.skin,E[A],true);}else{if(A=="groups"){for(z in D){if(D.hasOwnProperty(z)){F=z;C=D[z];y.addGroup(C,F);}}}else{if(A=="modules"){t(D,y.addModule,y);}else{if(A=="gallery"){this.groups.gallery.update(D);}else{if(A=="yui2"||A=="2in3"){this.groups.yui2.update(E["2in3"],E.yui2);}else{if(A=="maxURLLength"){y[A]=Math.min(m,D);}else{y[A]=D;}}}}}}}}}}B=y.filter;if(i.isString(B)){B=B.toUpperCase();y.filterName=B;y.filter=y.FILTER_DEFS[B];if(B=="DEBUG"){y.require("yui-log","dump");}}if(y.lang){y.require("intl-base","intl");}},formatSkin:function(A,y){var z=b+A;if(y){z=z+"-"+y;}return z;},_addSkin:function(H,F,G){var E,D,z,y,C=this.moduleInfo,A=this.skin,B=C[F]&&C[F].ext;if(F){z=this.formatSkin(H,F);if(!C[z]){E=C[F];D=E.pkg||F;y={name:z,group:E.group,type:"css",after:A.after,path:(G||D)+"/"+A.base+H+"/"+F+".css",ext:B};if(E.base){y.base=E.base;}if(E.configFn){y.configFn=E.configFn;}this.addModule(y,z);}}return z;},addGroup:function(B,z){var A=B.modules,y=this;z=z||B.name;B.name=z;y.groups[z]=B;if(B.patterns){t(B.patterns,function(D,C){D.group=z;y.patterns[C]=D;});}if(A){t(A,function(D,C){D.group=z;y.addModule(D,C);},y);}},addModule:function(O,V){V=V||O.name;if(this.moduleInfo[V]){O=d.merge(this.moduleInfo[V],O);}O.name=V;if(!O||!O.name){return null;}if(!O.type){O.type=k;}if(!O.path&&!O.fullpath){O.path=g(V,V,O.type);}O.supersedes=O.supersedes||O.use;O.ext=("ext" in O)?O.ext:(this._internal)?false:true;O.requires=this.filterRequires(O.requires)||[];var S=O.submodules,R,P,J,y,K,A,N,z,Q,L,H,E,C,B,U,T,I,D,F,G=this.conditions,M;this.moduleInfo[V]=O;if(!O.langPack&&O.lang){L=j(O.lang);for(Q=0;Q<L.length;Q++){U=L[Q];H=this.getLangPackName(U,V);A=this.moduleInfo[H];if(!A){A=this._addLangPack(U,O,H);}}}if(S){y=O.supersedes||[];P=0;for(R in S){if(S.hasOwnProperty(R)){K=S[R];K.path=K.path||g(V,R,O.type);K.pkg=V;K.group=O.group;if(K.supersedes){y=y.concat(K.supersedes);}A=this.addModule(K,R);y.push(R);if(A.skinnable){O.skinnable=true;I=this.skin.overrides;if(I&&I[R]){for(Q=0;Q<I[R].length;Q++){D=this._addSkin(I[R][Q],R,V);y.push(D);}}D=this._addSkin(this.skin.defaultSkin,R,V);y.push(D);}if(K.lang&&K.lang.length){L=j(K.lang);for(Q=0;Q<L.length;Q++){U=L[Q];H=this.getLangPackName(U,V);E=this.getLangPackName(U,R);A=this.moduleInfo[H];if(!A){A=this._addLangPack(U,O,H);}C=C||j.hash(A.supersedes);if(!(E in C)){A.supersedes.push(E);}O.lang=O.lang||[];B=B||j.hash(O.lang);if(!(U in B)){O.lang.push(U);}H=this.getLangPackName(w,V);E=this.getLangPackName(w,R);A=this.moduleInfo[H];if(!A){A=this._addLangPack(U,O,H);}if(!(E in C)){A.supersedes.push(E);}}}P++;}}O.supersedes=j.dedupe(y);if(this.allowRollup){O.rollup=(P<4)?P:Math.min(P-1,4);}}N=O.plugins;if(N){for(R in N){if(N.hasOwnProperty(R)){z=N[R];z.pkg=V;z.path=z.path||g(V,R,O.type);z.requires=z.requires||[];z.group=O.group;this.addModule(z,R);if(O.skinnable){this._addSkin(this.skin.defaultSkin,R,V);
}}}}if(O.condition){J=O.condition.trigger;if(YUI.Env.aliases[J]){J=YUI.Env.aliases[J];}if(!d.Lang.isArray(J)){J=[J];}for(R=0;R<J.length;R++){M=J[R];F=O.condition.when;G[M]=G[M]||{};G[M][V]=O.condition;if(F&&F!="after"){if(F=="instead"){O.supersedes=O.supersedes||[];O.supersedes.push(M);}else{}}else{O.after=O.after||[];O.after.push(M);}}}if(O.after){O.after_map=j.hash(O.after);}if(O.configFn){T=O.configFn(O);if(T===false){delete this.moduleInfo[V];O=null;}}return O;},require:function(z){var y=(typeof z==="string")?j(arguments):z;this.dirty=true;this.required=d.merge(this.required,j.hash(this.filterRequires(y)));this._explodeRollups();},_explodeRollups:function(){var z=this,y,A=z.required;if(!z.allowRollup){t(A,function(B,C){y=z.getModule(C);if(y&&y.use){j.each(y.use,function(D){y=z.getModule(D);if(y&&y.use){j.each(y.use,function(E){A[E]=true;});}else{A[D]=true;}});}});z.required=A;}},filterRequires:function(B){if(B){if(!d.Lang.isArray(B)){B=[B];}B=d.Array(B);var D=[],A,z,C,y;for(A=0;A<B.length;A++){z=this.getModule(B[A]);if(z&&z.use){for(C=0;C<z.use.length;C++){y=this.getModule(z.use[C]);if(y&&y.use){D=d.Array.dedupe([].concat(D,this.filterRequires(y.use)));}else{D.push(z.use[C]);}}}else{D.push(B[A]);}}B=D;}return B;},getRequires:function(O){if(!O||O._parsed){return c;}if(r[O.name]){return r[O.name];}var J,G,I,C,B,Q,R=O.name,A,H,P=n[R]&&n[R].details,L,D,M,E,z,N,F=O.lang||O.intl,K=this.moduleInfo,y;if(O.temp&&P){M=O;O=this.addModule(P,R);O.group=M.group;O.pkg=M.pkg;delete O.expanded;}if(O.expanded&&(!this.lang||O.langCache===this.lang)){return O.expanded;}L=[];y={};D=O.requires;E=O.optional;O._parsed=true;for(J=0;J<D.length;J++){if(!y[D[J]]){L.push(D[J]);y[D[J]]=true;G=this.getModule(D[J]);if(G){C=this.getRequires(G);F=F||(G.expanded_map&&(x in G.expanded_map));for(I=0;I<C.length;I++){L.push(C[I]);}}}}D=O.supersedes;if(D){for(J=0;J<D.length;J++){if(!y[D[J]]){if(O.submodules){L.push(D[J]);}y[D[J]]=true;G=this.getModule(D[J]);if(G){C=this.getRequires(G);F=F||(G.expanded_map&&(x in G.expanded_map));for(I=0;I<C.length;I++){L.push(C[I]);}}}}}if(E&&this.loadOptional){for(J=0;J<E.length;J++){if(!y[E[J]]){L.push(E[J]);y[E[J]]=true;G=K[E[J]];if(G){C=this.getRequires(G);F=F||(G.expanded_map&&(x in G.expanded_map));for(I=0;I<C.length;I++){L.push(C[I]);}}}}}A=this.conditions[R];if(A){t(A,function(T,S){if(!y[S]){H=T&&((T.ua&&d.UA[T.ua])||(T.test&&T.test(d,D)));if(H){y[S]=true;L.push(S);G=this.getModule(S);if(G){C=this.getRequires(G);for(I=0;I<C.length;I++){L.push(C[I]);}}}}},this);}if(O.skinnable){N=this.skin.overrides;if(N&&N[R]){for(J=0;J<N[R].length;J++){z=this._addSkin(N[R][J],R);L.push(z);}}else{z=this._addSkin(this.skin.defaultSkin,R);L.push(z);}}O._parsed=false;if(F){if(O.lang&&!O.langPack&&d.Intl){Q=d.Intl.lookupBestLang(this.lang||w,O.lang);O.langCache=this.lang;B=this.getLangPackName(Q,R);if(B){L.unshift(B);}}L.unshift(x);}O.expanded_map=j.hash(L);O.expanded=e.keys(O.expanded_map);r[O.name]=O;return O.expanded;},getProvides:function(z){var y=this.getModule(z),B,A;if(!y){return f;}if(y&&!y.provides){B={};A=y.supersedes;if(A){j.each(A,function(C){d.mix(B,this.getProvides(C));},this);}B[z]=true;y.provides=B;}return y.provides;},calculate:function(z,y){if(z||y||this.dirty){if(z){this._config(z);}if(!this._init){this._setup();}this._explode();if(this.allowRollup){this._rollup();}else{this._explodeRollups();}this._reduce();this._sort();}},_addLangPack:function(D,y,C){var A=y.name,z,B=this.moduleInfo[C];if(!B){z=g((y.pkg||A),C,k,true);this.addModule({path:z,intl:true,langPack:true,ext:y.ext,group:y.group,supersedes:[]},C);if(D){d.Env.lang=d.Env.lang||{};d.Env.lang[D]=d.Env.lang[D]||{};d.Env.lang[D][A]=true;}}return this.moduleInfo[C];},_setup:function(){var E=this.moduleInfo,B,C,A,y,z,D;for(B in E){if(E.hasOwnProperty(B)){y=E[B];if(y){y.requires=j.dedupe(y.requires);if(y.lang&&y.lang.length){D=this.getLangPackName(w,B);this._addLangPack(null,y,D);}}}}z={};if(!this.ignoreRegistered){d.mix(z,a.mods);}if(this.ignore){d.mix(z,j.hash(this.ignore));}for(A in z){if(z.hasOwnProperty(A)){d.mix(z,this.getProvides(A));}}if(this.force){for(C=0;C<this.force.length;C++){if(this.force[C] in z){delete z[this.force[C]];}}}d.mix(this.loaded,z);this._init=true;},getLangPackName:function(z,y){return("lang/"+y+((z)?"_"+z:""));},_explode:function(){var B=this.required,y,A,z=this;z.dirty=false;t(B,function(D,E){if(!s[E]){s[E]=true;y=z.getModule(E);if(y){var G=y.expound;if(G){B[G]=z.getModule(G);A=z.getRequires(B[G]);d.mix(B,j.hash(A));}A=z.getRequires(y);var C=A.length,F;for(F=0;F<C;F++){if(!B[A[F]]){B[A[F]]=true;}}}}});},getModule:function(D){if(!D){return null;}var C,B,z,y=this.moduleInfo[D],A=this.patterns;if(!y){for(z in A){if(A.hasOwnProperty(z)){C=A[z];if(D.indexOf(z)>-1){B=C;break;}}}if(B){if(C.action){C.action.call(this,D,z);}else{y=this.addModule(d.merge(B),D);y.temp=true;}}}return y;},_rollup:function(){},_reduce:function(D){D=D||this.required;var A,z,C,y,B=this.loadType,E=this.ignore?j.hash(this.ignore):false;for(A in D){if(D.hasOwnProperty(A)){y=this.getModule(A);if(((this.loaded[A]||n[A])&&!this.forceMap[A]&&!this.ignoreRegistered)||(B&&y&&y.type!=B)){delete D[A];}if(E&&E[A]){delete D[A];}C=y&&y.supersedes;if(C){for(z=0;z<C.length;z++){if(C[z] in D){delete D[C[z]];}}}}}return D;},_finish:function(A,z){h.running=false;var y=this.onEnd;if(y){y.call(this.context,{msg:A,data:this.data,success:z});}this._continue();},_onSuccess:function(){var A=this,z=d.merge(A.skipped),C,y=[],B=A.requireRegistration,E,D;t(z,function(F){delete A.inserted[F];});A.skipped={};t(A.inserted,function(G,F){var H=A.getModule(F);if(H&&B&&H.type==k&&!(F in YUI.Env.mods)){y.push(F);}else{d.mix(A.loaded,A.getProvides(F));}});C=A.onSuccess;D=(y.length)?"notregistered":"success";E=!(y.length);if(C){C.call(A.context,{msg:D,data:A.data,success:E,failed:y,skipped:z});}A._finish(D,E);},_onFailure:function(A){var y=this.onFailure,z="failure: "+A.msg;if(y){y.call(this.context,{msg:z,data:this.data,success:false});}this._finish(z,false);},_onTimeout:function(){var y=this.onTimeout;
if(y){y.call(this.context,{msg:"timeout",data:this.data,success:false});}this._finish("timeout",false);},_sort:function(){var H=e.keys(this.required),D={},y=0,A,G,F,C,B,E,z;for(;;){A=H.length;E=false;for(C=y;C<A;C++){G=H[C];for(B=C+1;B<A;B++){z=G+H[B];if(!D[z]&&this._requires(G,H[B])){F=H.splice(B,1);H.splice(C,0,F[0]);D[z]=true;E=true;break;}}if(E){break;}else{y++;}}if(!E){break;}}this.sorted=H;},partial:function(y,A,z){this.sorted=y;this.insert(A,z,true);},_insert:function(B,C,A,z){if(B){this._config(B);}if(!z){this.calculate(C);}this.loadType=A;if(!A){var y=this;this._internalCallback=function(){var E=y.onCSS,G,F,D;if(this.insertBefore&&d.UA.ie){G=d.config.doc.getElementById(this.insertBefore);F=G.parentNode;D=G.nextSibling;F.removeChild(G);if(D){F.insertBefore(G,D);}else{F.appendChild(G);}}if(E){E.call(y.context,d);}y._internalCallback=null;y._insert(null,null,k);};this._insert(null,null,q);return;}this._loading=true;this._combineComplete={};this.loadNext();},_continue:function(){if(!(h.running)&&h.size()>0){h.running=true;h.next()();}},insert:function(B,z,A){var y=this,C=d.merge(this);delete C.require;delete C.dirty;h.add(function(){y._insert(C,B,z,A);});this._continue();},loadNext:function(C){if(!this._loading){return;}var J,R,Q,O,B,G,D,N,F,I,P,y,E,M,A,H,S,T,L=this,z=L.loadType,U=function(V){L.loadNext(V.data);},K=function(X){L._combineComplete[z]=true;var W,V=H.length;for(W=0;W<V;W++){L.inserted[H[W]]=true;}U(X);};if(L.combine&&(!L._combineComplete[z])){H=[];L._combining=H;J=L.sorted;R=J.length;T=L.comboBase;B=T;S=[];M={};for(Q=0;Q<R;Q++){E=T;O=L.getModule(J[Q]);I=O&&O.group;if(I){F=L.groups[I];if(!F.combine){O.combine=false;continue;}O.combine=true;if(F.comboBase){E=F.comboBase;}if("root" in F&&i.isValue(F.root)){O.root=F.root;}}M[E]=M[E]||[];M[E].push(O);}for(P in M){if(M.hasOwnProperty(P)){B=P;A=M[P];R=A.length;for(Q=0;Q<R;Q++){O=A[Q];if(O&&(O.type===z)&&(O.combine||!O.ext)){y=((i.isValue(O.root))?O.root:L.root)+O.path;if((B!==P)&&(Q<=(R-1))&&((y.length+B.length)>L.maxURLLength)){if(B.substr(B.length-1,1)===L.comboSep){B=B.substr(0,(B.length-1));}S.push(L._filter(B));B=P;}B+=y;if(Q<(R-1)){B+=L.comboSep;}H.push(O.name);}}if(H.length&&(B!=P)){if(B.substr(B.length-1,1)===L.comboSep){B=B.substr(0,(B.length-1));}S.push(L._filter(B));}}}if(H.length){if(z===q){G=d.Get.css;N=L.cssAttributes;}else{G=d.Get.script;N=L.jsAttributes;}G(S,{data:L._loading,onSuccess:K,onFailure:L._onFailure,onTimeout:L._onTimeout,insertBefore:L.insertBefore,charset:L.charset,attributes:N,timeout:L.timeout,autopurge:false,context:L});return;}else{L._combineComplete[z]=true;}}if(C){if(C!==L._loading){return;}L.inserted[C]=true;if(L.onProgress){L.onProgress.call(L.context,{name:C,data:L.data});}}J=L.sorted;R=J.length;for(Q=0;Q<R;Q=Q+1){if(J[Q] in L.inserted){continue;}if(J[Q]===L._loading){return;}O=L.getModule(J[Q]);if(!O){if(!L.skipped[J[Q]]){D="Undefined module "+J[Q]+" skipped";L.skipped[J[Q]]=true;}continue;}F=(O.group&&L.groups[O.group])||f;if(!z||z===O.type){L._loading=J[Q];if(O.type===q){G=d.Get.css;N=L.cssAttributes;}else{G=d.Get.script;N=L.jsAttributes;}B=(O.fullpath)?L._filter(O.fullpath,J[Q]):L._url(O.path,J[Q],F.base||O.base);G(B,{data:J[Q],onSuccess:U,insertBefore:L.insertBefore,charset:L.charset,attributes:N,onFailure:L._onFailure,onTimeout:L._onTimeout,timeout:L.timeout,autopurge:false,context:L});return;}}L._loading=null;G=L._internalCallback;if(G){L._internalCallback=null;G.call(L);}else{L._onSuccess();}},_filter:function(A,z){var C=this.filter,y=z&&(z in this.filters),B=y&&this.filters[z];if(A){if(y){C=(i.isString(B))?this.FILTER_DEFS[B.toUpperCase()]||null:B;}if(C){A=A.replace(new RegExp(C.searchExp,"g"),C.replaceStr);}}return A;},_url:function(A,y,z){return this._filter((z||this.base||"")+A,y);},resolve:function(C,E){var z=this,D,y,B,A={js:[],css:[]};if(C){z.calculate();}E=E||z.sorted;for(D=0;D<E.length;D++){y=z.getModule(E[D]);if(y){if(z.combine){B=z._filter((z.root+y.path),y.name,z.root);}else{B=z._filter(y.fullpath,y.name,"")||z._url(y.path,y.name);}A[y.type].push(B);}}if(z.combine){A.js=[z.comboBase+A.js.join(z.comboSep)];A.css=[z.comboBase+A.css.join(z.comboSep)];}return A;},hash:function(C,E){var z=this,D,y,B,A={js:{},css:{}};if(C){z.calculate();}E=E||z.sorted;for(D=0;D<E.length;D++){y=z.getModule(E[D]);if(y){B=z._filter(y.fullpath,y.name,"")||z._url(y.path,y.name);A[y.type][y.name]=B;}}return A;}};},"3.4.0",{requires:["get"]});