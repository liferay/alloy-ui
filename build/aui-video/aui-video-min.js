AUI.add("aui-video",function(c){var i=c.Lang,j=c.UA,d=c.getClassName,m="video",b=d(m),k=d(m,"node"),g=c.config.base+"aui-video/assets/player.swf",f='<source type="video/mp4;" />',h="<source type='video/ogg; codecs=\"theora, vorbis\"' />",a='<video id="{0}" width="100%" height="100%" controls="controls" class="'+k+'"></video>',e='<div class="'+k+'"></div>';var l=c.Component.create({NAME:m,ATTRS:{url:{value:""},ogvUrl:{value:""},swfUrl:{value:g},poster:{value:""},fixedAttributes:{value:{}},flashVars:{value:{}},render:{value:true}},BIND_UI_ATTRS:["url","poster","ogvUrl","swfUrl","fixedAttributes","flashVars"],SYNC_UI_ATTRS:["url","poster","ogvUrl"],prototype:{renderUI:function(){var n=this;n._renderVideoTask=c.debounce(n._renderVideo,1,n);n._renderSwfTask=c.debounce(n._renderSwf,1,n);n._renderVideo(!n.get("ogvUrl"));},bindUI:function(){var n=this;n.publish("videoReady",{fireOnce:true});},_renderSwf:function(){var u=this;var q=u.get("swfUrl");if(q){var t=u.get("url");var v=u.get("poster");var r=u.get("flashVars");c.mix(r,{controls:true,src:t,poster:v});var n=c.QueryString.stringify(r);if(u._swfId){u._video.removeChild(c.one("#"+u._swfId));}else{u._swfId=c.guid();}var o='<object id="'+u._swfId+'" ';if(j.ie){o+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';}else{o+='type="application/x-shockwave-flash" data="'+q+'" ';}o+='height="100%" width="100%">';if(j.ie){o+='<param name="movie" value="'+q+'"/>';}var s=u.get("fixedAttributes");for(var p in s){o+='<param name="'+p+'" value="'+s[p]+'" />';}if(n){o+='<param name="flashVars" value="'+n+'" />';}if(v!=""){o+='<img src="'+v+'" alt="" />';}o+="</object>";u._video.append(o);}},_renderVideo:function(r){var n=this;var o=a;if(j.gecko&&r){o=e;}var q=i.sub(o,[c.guid()]);var p=c.Node.create(q);n.get("contentBox").append(p);n._video=p;},_uiSetFixedAttributes:function(o){var n=this;n._renderSwfTask();},_uiSetFlashVars:function(o){var n=this;n._renderSwfTask();},_uiSetOgvUrl:function(r){var n=this;if(j.gecko){var p=n._video;var o=n._usingVideo();if((!r&&o)||(r&&!o)){p.remove(true);n._renderVideoTask(!r);}if(!r){n._renderSwfTask();}else{var q=n._sourceOgv;if(!q){q=c.Node.create(h);p.append(q);n._sourceOgv=q;}q.attr("src",r);}}},_uiSetPoster:function(p){var n=this;var o=n._video;if(n._usingVideo()){o.setAttribute("poster",p);}n._renderSwfTask();},_uiSetSwfUrl:function(o){var n=this;n._renderSwfTask();},_uiSetUrl:function(r){var p=this;var o=p.get("ogvUrl");var q=p._video;var n=p._sourceMp4;if(j.gecko&&!p._usingVideo()){if(n!=null){n.remove(true);p._sourceMp4=null;}}else{if(q||!o){if(!n){n=c.Node.create(f);q.append(n);p._sourceMp4=n;}n.attr("src",r);}}p._renderSwfTask();},_usingVideo:function(){var n=this;return(n._video.get("nodeName").toLowerCase()=="video");}}});c.Video=l;},"@VERSION@",{requires:["aui-base","querystring-stringify-simple"],skinnable:true});