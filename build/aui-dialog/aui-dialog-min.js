AUI.add("aui-dialog",function(q){var k=q.Lang,I=k.isBoolean,C=k.isArray,O=k.isObject,T=function(A){return parseInt(A,10)||0;},v="",m="bodyContent",U="boundingBox",Y="button",d="buttons",V="close",P="closethick",J="constrain2view",b="container",e="dd",Q="default",W="destroyOnClose",x="dialog",y=".",n="draggable",l="dragInstance",h="footerContent",R="hd",H="height",F="icon",c="icons",t="io",w="loading",B="modal",Z="proxy",f="resizable",o="resizableInstance",E="stack",N="viewportRegion",g="width",r="resize:resize",M="resize:end",i=q.ClassNameManager.getClassName,z=i(x),j=i(x,Y),D=i(x,Y,b),S=i(x,Y,Q),a=i(x,R),u=i(F,w),p=i(e),G=document.createTextNode(""),K='<button class="'+j+'"></button>',X='<div class="'+D+'"></div>';var s=function(A){if(!q.DialogMask){q.DialogMask=new q.OverlayMask().render();}};q.mix(s,{NAME:x,ATTRS:{bodyContent:{value:G},buttons:{value:[],validator:C},close:{value:true},constrain2view:{value:false,validator:I},destroyOnClose:{value:false,validator:I},draggable:{lazyAdd:true,value:true,setter:function(A){return this._setDraggable(A);}},dragInstance:{value:null},modal:{setter:function(A){return this._setModal(A);},lazyAdd:false,value:false,validator:I},resizable:{setter:function(A){return this._setResizable(A);},value:true},resizableInstance:{value:null},stack:{lazyAdd:true,value:true,setter:function(A){return this._setStack(A);},validator:I},strings:{value:{close:"Close dialog"}}}});s.prototype={initializer:function(aa){var A=this;var ab=A.get(c);var ad=A.get(V);var ac=A.get(d);if(ac&&ac.length&&!A.get(h)){A.set(h,G);}if(ad){var L={icon:P,id:P,handler:{fn:A.close,context:A},title:A.get("strings").close};if(ab){ab.push(L);}A.set(c,ab);}A.after("render",A._afterRenderer);},bindUI:function(){var A=this;A._bindLazyComponents();A.publish("close",{defaultFn:A._close});A.on("visibleChange",A._afterSetVisible);},destructor:function(){var A=this;var L=A.get(U);q.Event.purgeElement(L,true);q.DialogManager.remove(A);},alignToViewport:function(aa,L){var A=this;var ab=q.getDoc().get(N);A.move([ab.left+T(aa),ab.top+T(L)]);},_bindLazyComponents:function(){var A=this;var L=A.get(U);L.on("mouseenter",q.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterConstrain2viewChange:function(L){var A=this;A._setConstrain2view(L.newVal);},_afterRenderer:function(L){var A=this;A._initButtons();A.get("contentBox").setAttribute("role","dialog");if(A.icons){var aa=A.icons.item(P);if(aa){aa.get(U).setAttribute("aria-controls",A.get("id"));}}A.get(E);A.get(t);},_close:function(){var A=this;if(A.get(W)){A.destroy();}else{A.hide();}if(A.get(B)){q.DialogMask.hide();}},_initButtons:function(){var A=this;var aa=A.get(d);var L=q.Node.create(X);var ab=q.Node.create(K);q.each(aa,function(ae,ad){var ah=ab.clone();if(ae.isDefault){ah.addClass(S);}if(ae.handler){var ag=ae.handler;var af=ag.fn||ag;var ac=ag.context||A;ah.on("click",af,ac);}ah.html(ae.text||v);L.append(ah);});if(aa.length){A.set(h,L);}},_initLazyComponents:function(){var A=this;if(!A.get(l)&&A.get(n)){A.get(n);}if(!A.get(o)&&A.get(f)){A.get(f);}},_setConstrain2view:function(L){var A=this;var aa=A.get(l);if(aa){if(L){aa.plug(q.Plugin.DDConstrained,{constrain2view:A.get(J)});}else{aa.unplug(q.Plugin.DDConstrained);}}},_setDraggable:function(ac){var A=this;var aa=A.get(U);var ab=function(){var af=A.get(l);if(af){af.destroy();af.unplug(q.Plugin.DDConstrained);}};q.DD.DDM.CSS_PREFIX=p;if(ac){var ad={node:aa,handles:[y+a]};var L=q.merge(ad,ac||{});if(L.on){q.each(L.on,function(ag,af){L.on[af]=q.bind(ag,A);});}ab();var ae=new q.DD.Drag(L);A.set(l,ae);A.after("constrain2viewChange",A._afterConstrain2viewChange,A);A._setConstrain2view(A.get("constrain2view"));}else{ab();}return ac;},_setModal:function(L){var A=this;if(L){q.DialogMask.show();}else{q.DialogMask.hide();}return L;},_setResizable:function(ac){var A=this;var ad=A.get(o);var ab=function(){if(ad){ad.destroy();}};if(ac){var aa=function(af){var ae=af.type;var ag=af.info;if((ae==M)||((ae==r)&&!af.currentTarget.get(Z))){A.set(H,ag.offsetHeight);A.set(g,ag.offsetWidth);}};ab();var L=new q.Resize(q.merge({handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(U),proxy:true},ac||{}));L.after("end",aa);L.after("resize",aa);A.set(o,L);return ac;}else{ab();}},_setStack:function(L){var A=this;if(L){q.DialogManager.register(A);}else{q.DialogManager.remove(A);}return L;},_afterSetVisible:function(aa){var A=this;if(A.get(B)){if(aa.newVal){q.DialogMask.show();}else{q.DialogMask.hide();}}var L=A.get(U);L.setAttribute("aria-hidden",!aa.newVal);}};q.Dialog=q.Base.build(x,q.Panel,[s,q.WidgetPosition,q.WidgetStack,q.WidgetPositionAlign,q.WidgetPositionConstrain]);q.DialogManager=new q.OverlayManager({zIndexBase:1000});q.mix(q.DialogManager,{findByChild:function(A){return q.Widget.getByNode(q.one(A).ancestor(y+z,true));},closeByChild:function(A){return q.DialogManager.findByChild(A).close();},refreshByChild:function(L){var A=q.DialogManager.findByChild(L);if(A&&A.io){A.io.start();}}});},"@VERSION@",{requires:["aui-panel","dd-constrain","aui-button-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});