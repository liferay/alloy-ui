AUI.add("aui-drawing-base",function(n){var Q=n.Lang,s=Q.isArray,p=Q.isFunction,O=Q.isNumber,E=Q.isObject,i=Q.isString,q=Q.isUndefined,y=n.config.doc,w=n.ColorUtil,a,u=n.UA,F=Q.emptyFn,m={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://alloy.liferay.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"AlloyUI",translation:"0 0",width:0,x:0,y:0},P={Q:1,T:1},b={circle:1,ellipse:1,image:1,path:1,rect:1,text:1},B={image:1,text:1},r={circle:1,ellipse:1},L=Math,G=L.max,k=L.min,K=L.pow,x="drawing",t=/^([^:]*):?([\d\.]*)/,C=/^url\(['"]?([^\)]+?)['"]?\)$/i,o=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,h=/,?([achlmqrstvxz]),?/gi,f=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,J=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,N=/[, ]+/,j=/\s*\-\s*/,l="",D="fill",M=" progid:DXImageTransform.Microsoft",d=" ",I=String.prototype.toLowerCase,v=String.prototype.toUpperCase;var c=n.Component.create({ATTRS:{height:{value:342},width:{value:512},x:{value:null},y:{value:null}},UI_ATTRS:["x","y"],create:function(S){var R=arguments;var A=R[0];if(s(A)){R=R[0];S=a.getConfig(R);var W=new c(S).render();var X=W.createSet();var U;for(var T=0,V=R.length;T<V;T++){U=R[T]||{};if(b.hasOwnProperty(U.type)){X.push(W[U.type]().attr(U));}}return W;}else{if(E(A)&&!(A.nodeName||A instanceof n.Node)){S=A;}else{S=a.getConfig(R);}}return new c(S).render();},NAME:x,prototype:{CONTENT_TEMPLATE:null,renderUI:function(){var A=this;A.customAttributes={};c.Impl.createCanvas.call(A);},circle:function(R,T,S){var A=this;return c.Impl.createCircle.call(A,R||0,T||0,S||0);},clear:function(){var A=this;return c.Impl.clear.call(A);},createSet:function(R){var A=this;if(arguments.length>1){R=Array.prototype.splice.call(arguments,0,arguments.length);}return new e(R);},ellipse:function(R,U,T,S){var A=this;return c.Impl.createEllipse.call(A,R||0,U||0,T||0,S||0);},image:function(U,R,V,S,T){var A=this;return c.Impl.createImage.call(A,U||"about:blank",R||0,V||0,S||0,T||0);},path:function(R){var A=this;if(i(R)){R=Q.sub.apply(n,arguments);}else{if(!q(R)&&!s(R)){R+=l;}}return c.Impl.createPath.call(A,R);},rect:function(R,V,S,T,U){var A=this;return c.Impl.createRectangle.call(A,R||0,V||0,S||0,T||0,U||0);},remove:function(){var A=this;return c.Impl.remove.call(A);},safari:F,text:function(R,T,S){var A=this;return c.Impl.createText.call(A,R||0,T||0,S||l);},_uiSetX:function(R){var A=this;A.get("boundingBox").setXY([R,A.get("y")]);},_uiSetY:function(R){var A=this;A.get("boundingBox").setXY([A.get("x"),R]);}}});a={getConfig:function(U){var T={};var R=U[0];var A="boundingBox";var W=2;var V=1;var S=-1;if(O(R)){A="x";W=3;V=2;S=1;}T[A]=R;T.height=U[W];T.width=U[V];T.y=U[S];return T;},translate:function(A,S){if(A==null){return{x:this._.tx,y:this._.ty,toString:a.XYToString};}this._.tx+=+A;this._.ty+=+S;switch(this.type){case"circle":case"ellipse":this.attr({cx:+A+this.attrs.cx,cy:+S+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+A+this.attrs.x,y:+S+this.attrs.y});break;case"path":var R=a.pathToRelative(this.attrs.path);R[0][1]+=+A;R[0][2]+=+S;this.attr({path:R});break;}return this;}};c.getColor=function(R){var S=c.getColor.start=c.getColor.start||{h:0,s:1,b:R||0.75};var A=w.hsb2rgb(S.h,S.s,S.b);S.h+=0.075;if(S.h>1){S.h=0;S.s-=0.2;if(S.s<=0){c.getColor.start={h:0,s:1,b:S.b};}}return A.hex;};c.getColor.reset=function(){delete c.start;};a.tear=function(R,A){R==A.top&&(A.top=R.prev);R==A.bottom&&(A.bottom=R.next);R.next&&(R.next.prev=R.prev);R.prev&&(R.prev.next=R.next);};a.toFront=function(R,A){if(A.top===R){return;}a.tear(R,A);R.next=null;R.prev=A.top;A.top.next=R;A.top=R;};a.toBack=function(R,A){if(A.bottom===R){return;}a.tear(R,A);R.next=A.bottom;R.prev=null;A.bottom.prev=R;A.bottom=R;};a.insertAfter=function(S,R,A){a.tear(S,A);R==A.top&&(A.top=S);R.next&&(R.next.prev=S);S.next=R.next;S.prev=R;R.next=S;};a.insertBefore=function(S,R,A){a.tear(S,A);R==A.bottom&&(A.bottom=S);R.prev&&(R.prev.next=S);S.prev=R.prev;R.prev=S;S.next=R;};var g=function(S,R){var A=this;A.createElement.apply(A,arguments);};a.removed=function(A){return function(){throw new Error('AlloyUI: you are calling to method "'+A+'" of removed object');};};a._path2string=function(){return this.join(",").replace(h,"$1");};a.parsePathString=n.cached(function(A){if(!A){return null;}var S={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var R=[];if(s(A)&&s(A[0])){R=pathClone(A);}if(!R.length){String(A).replace(o,function(U,T,X){var W=[];var V=I.call(T);X.replace(f,function(Z,Y){Y&&W.push(+Y);});if(V=="m"&&W.length>2){R.push([T].concat(W.splice(0,2)));V="l";T=T=="m"?"l":"L";}while(W.length>=S[V]){R.push([T].concat(W.splice(0,S[V])));if(!S[V]){break;}}});}R.toString=a._path2string;return R;});a.findDotsAtSegment=function(R,A,ak,ai,W,U,Y,X,ae){var ac=1-ae;var ab=K(ac,3)*R+K(ac,2)*3*ae*ak+ac*3*ae*ae*W+K(ae,3)*Y;var Z=K(ac,3)*A+K(ac,2)*3*ae*ai+ac*3*ae*ae*U+K(ae,3)*X;var ag=R+2*ae*(ak-R)+ae*ae*(W-2*ak+R);var af=A+2*ae*(ai-A)+ae*ae*(U-2*ai+A);var aj=ak+2*ae*(W-ak)+ae*ae*(Y-2*W+ak);var ah=ai+2*ae*(U-ai)+ae*ae*(X-2*U+ai);var ad=(1-ae)*R+ae*ak;var aa=(1-ae)*A+ae*ai;var T=(1-ae)*W+ae*Y;var S=(1-ae)*U+ae*X;var V=(90-L.atan((ag-aj)/(af-ah))*180/L.PI);if(ag>aj||af<ah){V+=180;}return{x:ab,y:Z,m:{x:ag,y:af},n:{x:aj,y:ah},start:{x:ad,y:aa},end:{x:T,y:S},alpha:V};};a.pathDimensions=n.cached(function(ac){if(!ac){return{x:0,y:0,width:0,height:0};}ac=a.path2curve(ac);var aa=0;var Z=0;var T=[];var R=[];var S;for(var V=0,U=ac.length;V<U;V++){S=ac[V];if(S[0]=="M"){aa=S[1];Z=S[2];T.push(aa);R.push(Z);}else{var W=a.curveDim(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6]);T=T.concat(W.min.x,W.max.x);R=R.concat(W.min.y,W.max.y);aa=S[5];Z=S[6];}}var A=k.apply(0,T);
var ab=k.apply(0,R);return{x:A,y:ab,width:G.apply(0,T)-A,height:G.apply(0,R)-ab};});a.pathClone=function(V){var S=[];if(!s(V)||!s(V&&V[0])){V=a.parsePathString(V);}for(var R=0,U=V.length;R<U;R++){S[R]=[];for(var A=0,T=V[R].length;A<T;A++){S[R][A]=V[R][A];}}S.toString=a._path2string;return S;};a._pathToRelative=n.cached(function(T){if(!s(T)||!s(T&&T[0])){T=a.parsePathString(T);}var Z=[];var ac=0;var ab=0;var af=0;var ae=0;var R=0;if(T[0][0]=="M"){ac=T[0][1];ab=T[0][2];af=ac;ae=ab;R++;Z.push(["M",ac,ab]);}for(var X=R,S=T.length;X<S;X++){var A=Z[X]=[];var ad=T[X];if(ad[0]!=I.call(ad[0])){A[0]=I.call(ad[0]);switch(A[0]){case"a":A[1]=ad[1];A[2]=ad[2];A[3]=ad[3];A[4]=ad[4];A[5]=ad[5];A[6]=+(ad[6]-ac).toFixed(3);A[7]=+(ad[7]-ab).toFixed(3);break;case"v":A[1]=+(ad[1]-ab).toFixed(3);break;case"m":af=ad[1];ae=ad[2];default:for(var V=1,aa=ad.length;V<aa;V++){A[V]=+(ad[V]-((V%2)?ac:ab)).toFixed(3);}}}else{A=Z[X]=[];if(ad[0]=="m"){af=ad[1]+ac;ae=ad[2]+ab;}for(var U=0,W=ad.length;U<W;U++){Z[X][U]=ad[U];}}var Y=Z[X].length;switch(Z[X][0]){case"z":ac=af;ab=ae;break;case"h":ac+=+Z[X][Y-1];break;case"v":ab+=+Z[X][Y-1];break;default:ac+=+Z[X][Y-2];ab+=+Z[X][Y-1];}}Z.toString=a._path2string;return Z;});a.pathToRelative=function(A){return a.pathClone(a._pathToRelative(A));};a._pathToAbsolute=n.cached(function(T){if(!s(T)||!s(T&&T[0])){T=a.parsePathString(T);}var Y=[];var ab=0;var aa=0;var ae=0;var ad=0;var R=0;if(T[0][0]=="M"){ab=+T[0][1];aa=+T[0][2];ae=ab;ad=aa;R++;Y[0]=["M",ab,aa];}for(var X=R,S=T.length;X<S;X++){var A=Y[X]=[];var ac=T[X];if(ac[0]!=v.call(ac[0])){A[0]=v.call(ac[0]);switch(A[0]){case"A":A[1]=ac[1];A[2]=ac[2];A[3]=ac[3];A[4]=ac[4];A[5]=ac[5];A[6]=+(ac[6]+ab);A[7]=+(ac[7]+aa);break;case"V":A[1]=+ac[1]+aa;break;case"H":A[1]=+ac[1]+ab;break;case"M":ae=+ac[1]+ab;ad=+ac[2]+aa;default:for(var V=1,Z=ac.length;V<Z;V++){A[V]=+ac[V]+((V%2)?ab:aa);}}}else{for(var U=0,W=ac.length;U<W;U++){Y[X][U]=ac[U];}}switch(A[0]){case"Z":ab=ae;aa=ad;break;case"H":ab=A[1];break;case"V":aa=A[1];break;case"M":ae=Y[X][Y[X].length-2];ad=Y[X][Y[X].length-1];default:ab=Y[X][Y[X].length-2];aa=Y[X][Y[X].length-1];}}Y.toString=a._path2string;return Y;});a.pathToAbsolute=function(A){return a.pathClone(a._pathToAbsolute(A));};a.lineToCubicCurve=function(R,T,A,S){return[R,T,A,S,A,S];};a.quadraticToCubicCurve=function(R,T,W,U,A,S){var V=1/3;var X=2/3;return[V*R+X*W,V*T+X*U,V*A+X*W,V*S+X*U,A,S];};a.arcToCubicCurve=function(ae,aK,ao,am,ag,Z,U,ad,aJ,ah){var T=L.PI;var al=T*120/180;var A=T/180*(+ag||0);var ar=[];var ap;var aG=n.cached(function(aM,aP,aL){var aO=aM*L.cos(aL)-aP*L.sin(aL),aN=aM*L.sin(aL)+aP*L.cos(aL);return{x:aO,y:aN};});if(!ah){ap=aG(ae,aK,-A);ae=ap.x;aK=ap.y;ap=aG(ad,aJ,-A);ad=ap.x;aJ=ap.y;var R=L.cos(T/180*ag);var ab=L.sin(T/180*ag);var au=(ae-ad)/2;var at=(aK-aJ)/2;var aE=(au*au)/(ao*ao)+(at*at)/(am*am);if(aE>1){aE=L.sqrt(aE);ao=aE*ao;am=aE*am;}var S=ao*ao;var ax=am*am;var az=(Z==U?-1:1)*L.sqrt(L.abs((S*ax-S*at*at-ax*au*au)/(S*at*at+ax*au*au)));var aj=az*ao*at/am+(ae+ad)/2;var ai=az*-am*au/ao+(aK+aJ)/2;var Y=L.asin(((aK-ai)/am).toFixed(7));var X=L.asin(((aJ-ai)/am).toFixed(7));Y=ae<aj?T-Y:Y;X=ad<aj?T-X:X;Y<0&&(Y=T*2+Y);X<0&&(X=T*2+X);if(U&&Y>X){Y=Y-T*2;}if(!U&&X>Y){X=X-T*2;}}else{Y=ah[0];X=ah[1];aj=ah[2];ai=ah[3];}var ac=X-Y;if(L.abs(ac)>al){var ak=X;var an=ad;var aa=aJ;X=Y+al*(U&&X>Y?1:-1);ad=aj+ao*L.cos(X);aJ=ai+am*L.sin(X);ar=a.arcToCubicCurve(ad,aJ,ao,am,ag,0,U,an,aa,[X,ak,aj,ai]);}ac=X-Y;var W=L.cos(Y);var aI=L.sin(Y);var V=L.cos(X);var aH=L.sin(X);var av=L.tan(ac/4);var ay=4/3*ao*av;var aw=4/3*am*av;var aF=[ae,aK];var aD=[ae+ay*aI,aK-aw*W];var aC=[ad+ay*aH,aJ-aw*V];var aA=[ad,aJ];aD[0]=2*aF[0]-aD[0];aD[1]=2*aF[1]-aD[1];if(ah){return[aD,aC,aA].concat(ar);}else{ar=[aD,aC,aA].concat(ar).join().split(",");var aq=[];for(var aB=0,af=ar.length;aB<af;aB++){aq[aB]=aB%2?aG(ar[aB-1],ar[aB],A).y:aG(ar[aB],ar[aB+1],A).x;}return aq;}};a.findDotAtSegment=function(R,A,T,S,Y,X,W,V,Z){var U=1-Z;return{x:K(U,3)*R+K(U,2)*3*Z*T+U*3*Z*Z*Y+K(Z,3)*W,y:K(U,3)*A+K(U,2)*3*Z*S+U*3*Z*Z*X+K(Z,3)*V};};a.curveDim=n.cached(function(S,A,U,T,af,ae,ab,Y){var ad=(af-2*U+S)-(ab-2*af+U);var aa=2*(U-S)-2*(af-U);var X=S-U;var W=(-aa+L.sqrt(aa*aa-4*ad*X))/2/ad;var V=(-aa-L.sqrt(aa*aa-4*ad*X))/2/ad;var Z=[A,Y];var ac=[S,ab];var R;L.abs(W)>1000000000000&&(W=0.5);L.abs(V)>1000000000000&&(V=0.5);if(W>0&&W<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,W);ac.push(R.x);Z.push(R.y);}if(V>0&&V<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,V);ac.push(R.x);Z.push(R.y);}ad=(ae-2*T+A)-(Y-2*ae+T);aa=2*(T-A)-2*(ae-T);X=A-T;W=(-aa+L.sqrt(aa*aa-4*ad*X))/2/ad;V=(-aa-L.sqrt(aa*aa-4*ad*X))/2/ad;L.abs(W)>1000000000000&&(W=0.5);L.abs(V)>1000000000000&&(V=0.5);if(W>0&&W<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,W);ac.push(R.x);Z.push(R.y);}if(V>0&&V<1){R=a.findDotAtSegment(S,A,U,T,af,ae,ab,Y,V);ac.push(R.x);Z.push(R.y);}return{min:{x:k.apply(0,ac),y:k.apply(0,Z)},max:{x:G.apply(0,ac),y:G.apply(0,Z)}};});a._path2curve=n.cached(function(ae,aa){var T=a.pathToAbsolute(ae);var ab=aa&&a.pathToAbsolute(aa);var ac={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};var W=function(ag,ah){var af;var ai;if(!ag){return["C",ah.x,ah.y,ah.x,ah.y,ah.x,ah.y];}if(!(ag[0] in P)){ah.qx=ah.qy=null;}switch(ag[0]){case"M":ah.X=ag[1];ah.Y=ag[2];break;case"A":ag=["C"].concat(a.arcToCubicCurve.apply(0,[ah.x,ah.y].concat(ag.slice(1))));break;case"S":af=ah.x+(ah.x-(ah.bx||ah.x));ai=ah.y+(ah.y-(ah.by||ah.y));ag=["C",af,ai].concat(ag.slice(1));break;case"T":ah.qx=ah.x+(ah.x-(ah.qx||ah.x));ah.qy=ah.y+(ah.y-(ah.qy||ah.y));ag=["C"].concat(a.quadraticToCubicCurve(ah.x,ah.y,ah.qx,ah.qy,ag[1],ag[2]));break;case"Q":ah.qx=ag[1];ah.qy=ag[2];ag=["C"].concat(a.quadraticToCubicCurve(ah.x,ah.y,ag[1],ag[2],ag[3],ag[4]));break;case"L":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ag[1],ag[2]));break;case"H":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ag[1],ah.y));break;case"V":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ah.x,ag[1]));break;case"Z":ag=["C"].concat(a.lineToCubicCurve(ah.x,ah.y,ah.X,ah.Y));
break;}return ag;};var R=function(af,ag){if(af[ag].length>7){af[ag].shift();var ah=af[ag];while(ah.length){af.splice(ag++,0,["C"].concat(ah.splice(0,6)));}af.splice(ag,1);V=G(T.length,ab&&ab.length||0);}};var S=function(aj,ai,ag,af,ah){if(aj&&ai&&aj[ah][0]=="M"&&ai[ah][0]!="M"){ai.splice(ah,0,["M",af.x,af.y]);ag.bx=0;ag.by=0;ag.x=aj[ah][1];ag.y=aj[ah][2];V=G(T.length,ab&&ab.length||0);}};for(var Y=0,V=G(T.length,ab&&ab.length||0);Y<V;Y++){T[Y]=W(T[Y],ac);R(T,Y);ab&&(ab[Y]=W(ab[Y],A));ab&&R(ab,Y);S(T,ab,ac,A,Y);S(ab,T,A,ac,Y);var X=T[Y];var ad=ab&&ab[Y];var U=X.length;var Z=ab&&ad.length;ac.x=X[U-2];ac.y=X[U-1];ac.bx=parseFloat(X[U-4])||ac.x;ac.by=parseFloat(X[U-3])||ac.y;A.bx=ab&&(parseFloat(ad[Z-4])||A.x);A.by=ab&&(parseFloat(ad[Z-3])||A.y);A.x=ab&&ad[Z-2];A.y=ab&&ad[Z-1];}return ab?[T,ab]:T;});a.path2curve=function(R,A){return a.pathClone(a._path2curve(R,A));};a.parseDots=n.cached(function(Z){var Y=[];for(var V=0,S=Z.length;V<S;V++){var A={};var X=Z[V].match(t);A.color=w.getRGB(X[1]);if(A.color.error){return null;}A.color=A.color.hex;X[2]&&(A.offset=X[2]+"%");Y.push(A);}for(V=1,S=Y.length-1;V<S;V++){if(!Y[V].offset){var R=parseFloat(Y[V-1].offset||0);var T=0;for(var U=V+1;U<S;U++){if(Y[U].offset){T=Y[U].offset;break;}}if(!T){T=100;U=S;}T=parseFloat(T);var W=(T-R)/(U-V+1);for(;V<U;V++){R+=W;Y[V].offset=R+"%";}}}return Y;});a.XYToString=function(){return this.x+d+this.y;};a.getPointAtSegmentLength=n.cached(function(S,A,W,V,ac,ab,aa,Z,T){var Y=0;var U;for(var X=0;X<1.01;X+=0.01){var R=a.findDotAtSegment(S,A,W,V,ac,ab,aa,Z,X);X&&(Y+=K(K(U.x-R.x,2)+K(U.y-R.y,2),0.5));if(Y>=T){return R;}U=R;}});var z={};a.getPointAtSegmentLength=function(U,R,Y,X,ag,af,ae,ac,V){var ab=0;var aa=100;var T=[U,R,Y,X,ag,af,ae,ac].join();var A=z[T];var W;var S;if(!A){A={data:[]};z[T]=A;}if(A.timer){clearTimeout(A.timer);}A.timer=setTimeout(function(){delete z[T];},2000);if(V!=null){var ad=getPointAtSegmentLength(U,R,Y,X,ag,af,ae,ac);aa=~~ad*10;}for(var Z=0;Z<aa+1;Z++){if(A.data[V]>Z){S=A.data[Z*aa];}else{S=a.findDotsAtSegment(U,R,Y,X,ag,af,ae,ac,Z/aa);A.data[Z]=S;}if(Z){ab+=K(K(W.x-S.x,2)+K(W.y-S.y,2),0.5);}if(V!=null&&ab>=V){return S;}if(V==null){return ab;}}};a.getLengthFactory=function(A,R){return function(ad,U,V){ad=a.path2curve(ad);var aa;var Z;var S;var W;var T="";var ac={};var ab;var Y=0;for(var X=0,U=ad.length;X<U;X++){S=ad[X];if(S[0]=="M"){aa=+S[1];Z=+S[2];}else{W=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6]);if(Y+W>U){if(R&&!ac.start){ab=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],U-Y);T+=["C",ab.start.x,ab.start.y,ab.m.x,ab.m.y,ab.x,ab.y];if(V){return T;}ac.start=T;T=["M",ab.x,ab.y+"C",ab.n.x,ab.n.y,ab.end.x,ab.end.y,S[5],S[6]].join();Y+=W;aa=+S[5];Z=+S[6];continue;}if(!A&&!R){ab=a.getPointAtSegmentLength(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],U-Y);return{x:ab.x,y:ab.y,alpha:ab.alpha};}}Y+=W;aa=+S[5];Z=+S[6];}T+=S;}ac.end=T;ab=A?Y:R?ac:a.findDotsAtSegment(aa,Z,S[1],S[2],S[3],S[4],S[5],S[6],1);ab.alpha&&(ab={x:ab.x,y:ab.y,alpha:ab.alpha});return ab;};};a.getTotalLength=a.getLengthFactory(1);a.getPointAtLength=a.getLengthFactory();a.getSubpathsAtLength=a.getLengthFactory(0,1);a.applyAttributes=function(S,A,U){var X;if(U!=null){X={};X[A]=U;}else{if(A!=null&&E(A)){X=A;}}var W=S.paper.customAttributes;for(var R in W){if(W.hasOwnProperty(R)&&X.hasOwnProperty(R)&&p(W[R])){var T=W[R].apply(S,[].concat(X[R]));S.attrs[R]=X[R];for(var V in T){if(T.hasOwnProperty(V)){X[V]=T[V];}}}}return X;};g.prototype={attr:F,blur:F,clone:function(){if(this.removed){return null;}var A=this.attr();delete A.scale;delete A.translation;return this.paper[this.type]().attr(A);},createElement:F,detach:function(S,R){var A=this;n.detach(g._getEventType(S),R,(A.shape||A.node||y));return A;},getRegion:F,getPointAtLength:function(A){if(this.type!="path"){return;}return a.getPointAtLength(this.attrs.path,A);},getSubpath:function(S,R){if(this.type!="path"){return;}if(L.abs(this.getTotalLength()-R)<"1e-6"){return a.getSubpathsAtLength(this.attrs.path,S).end;}var A=a.getSubpathsAtLength(this.attrs.path,R,1);return S?a.getSubpathsAtLength(A,S).end:A;},getTotalLength:function(){if(this.type!="path"){return;}if(this.node.getTotalLength){return this.node.getTotalLength();}return a.getTotalLength(this.attrs.path);},hide:F,hover:function(R,A){return this.on("mouseover",R).on("mouseout",A);},insertAfter:F,insertBefore:F,on:function(U,T,R){var A=this;var S=g._getEventType(U);n.on(S,n.bind(T,R||A),A.shape||A.node||y,g._getEventConfig(S,U));return A;},remove:F,resetScale:function(){if(this.removed){return this;}this._.sx=1;this._.sy=1;this.attrs.scale="1 1";},rotate:F,scale:function(ao,an,ag,ae){if(this.removed){return this;}if(ao==null&&an==null){return{x:this._.sx,y:this._.sy,toString:a.XYToString};}an=an||ao;!+an&&(an=ao);var R;var A;var ax;var aw;var aA=this.attrs;if(ao!=0){var aB=this.getRegion();var U=aB.x+aB.width/2;var T=aB.y+aB.height/2;var au=L.abs(ao/this._.sx);var at=L.abs(an/this._.sy);ag=(+ag||ag==0)?ag:U;ae=(+ae||ae==0)?ae:T;var Y=~~(this._.sx>0);var X=~~(this._.sy>0);var af=~~(ao/L.abs(ao));var ad=~~(an/L.abs(an));var W=au*af;var V=at*ad;var ap=this.node.style;var am=ag+L.abs(U-ag)*W*(U>ag==Y?1:-1);var al=ae+L.abs(T-ae)*V*(T>ae==X?1:-1);var aj=(ao*af>an*ad?at:au);switch(this.type){case"rect":case"image":var aa=aA.width*au;var ak=aA.height*at;this.attr({height:ak,r:aA.r*aj,width:aa,x:am-aa/2,y:al-ak/2});break;case"circle":case"ellipse":this.attr({rx:aA.rx*af*au,ry:aA.ry*ad*at,r:aA.r*k(af*au,ad*at),cx:am,cy:al});break;case"text":this.attr({x:am,y:al});break;case"path":var ar=a.pathToRelative(aA.path);var Z=true;var ai=Y?W:au;var ah=X?V:at;for(var az=0,ab=ar.length;az<ab;az++){var av=ar[az];var ac=v.call(av[0]);if(ac=="M"&&Z){continue;}else{Z=false;}if(ac=="A"){av[ar[az].length-2]*=ai;av[ar[az].length-1]*=ah;av[1]*=au;av[2]*=at;av[5]=+(af+ad?!!+av[5]:!+av[5]);}else{if(ac=="H"){for(var ay=1,S=av.length;ay<S;ay++){av[ay]*=ai;}}else{if(ac=="V"){for(ay=1,S=av.length;ay<S;ay++){av[ay]*=ah;}}else{for(ay=1,S=av.length;ay<S;
ay++){av[ay]*=(ay%2)?ai:ah;}}}}}var aq=a.pathDimensions(ar);R=am-aq.x-aq.width/2;A=al-aq.y-aq.height/2;ar[0][1]+=R;ar[0][2]+=A;this.attr({path:ar});break;}if(this.type in B&&(af!=1||ad!=1)){if(this.transformations){this.transformations[2]="scale(".concat(af,",",ad,")");this.node.setAttribute("transform",this.transformations.join(d));R=(af==-1)?-aA.x-(aa||0):aA.x;A=(ad==-1)?-aA.y-(ak||0):aA.y;this.attr({x:R,y:A});aA.fx=af-1;aA.fy=ad-1;}else{this.node.filterMatrix=M+".Matrix(M11=".concat(af,", M12=0, M21=0, M22=",ad,', Dx=0, Dy=0, sizingmethod="auto expand", filtertype="bilinear")');ap.filter=(this.node.filterMatrix||l)+(this.node.filterOpacity||l);}}else{if(this.transformations){this.transformations[2]=l;this.node.setAttribute("transform",this.transformations.join(d));aA.fx=0;aA.fy=0;}else{this.node.filterMatrix=l;ap.filter=(this.node.filterMatrix||l)+(this.node.filterOpacity||l);}}aA.scale=[ao,an,ag,ae].join(d);this._.sx=ao;this._.sy=an;}return this;},show:F,toBack:F,toFront:F,toString:function(){return'"'+v.call(this.type)+'": AlloyUI Drawing Element';},translate:F,unhover:function(R,A){return this.detach("mouseover",R).detach("mouseout",A);}};g._getEventConfig=F;g._getEventType=function(A){return A;};c.Element=g;var e=n.Component.create({NAME:"set",EXTENDS:n.ArrayList,prototype:{pop:function(){var A=this;return A._items.pop();},push:function(){var A=this;var R=A._items;var S=arguments;var V=S.length;var U;for(var T=0;T<V;T++){U=S[T];if(U&&U instanceof g||U instanceof e){R[R.length]=S[T];}}return A;},clone:function(){var A=this;var R=new e();R._items=A._items;return R;},invoke:function(S){var A=this;var T=Array.prototype.slice.call(arguments,1);var W;var R=A._items;for(var U=0,V=R.length;U<V;U++){W=R[U];if(S in W){W[S].apply(R[U],T);}}return A;}}});c.Set=e;e.addMethod=function(A){return n.ArrayList.addMethod(c.Set.prototype,A);};var H=n.Object.keys(g.prototype);e.addMethod(H);e.prototype.getRegion=e.prototype.getBBox=function(){var R=this;var A=[];var X=[];var S=[];var V=[];var T=R._items;for(var U=T.length;U--;){var W=T[U].getRegion();A.push(W.x);X.push(W.y);S.push(W.x+W.width);V.push(W.y+W.height);}A=k.apply(0,A);X=k.apply(0,X);return{x:A,y:X,width:G.apply(0,S)-A,height:G.apply(0,V)-X};};e.prototype.attr=function(S,V){var A=this;var R=A._items;if(S&&s(S)&&E(S[0])){for(var T=0,U=S.length;T<U;T++){R[T].attr(S[T]);}}else{for(var T=0,U=R.length;T<U;T++){R[T].attr(S,V);}}return A;};e.prototype.toString=function(){return this._items.join(",");};c.REGEX_ISURL=C;c.REGEX_SEPARATOR=N;c.REGEX_SEPARATOR_GRADIENT=j;c.REGEX_RADIAL_GRADIENT=J;c.MAP_ATTRS_AVAILABLE=m;c.MAP_TYPES_IMAGE_TEXT=B;c.MAP_TYPES_CIRCLE_ELLIPSE=r;c.STR_EMPTY=l;c.STR_FILL=D;c.STR_SPACE=d;c.STR_MS_PROG_ID_PREFIX=M;c.Util=a;c.Element=g;n.Drawing=c;},"@VERSION@",{requires:["aui-base","aui-color-util","substitute"]});AUI.add("aui-drawing-animate",function(o){var e=o.Lang,a=e.isFunction,l=e.isString,E=o.ColorUtil,m=o.Drawing,r=m.Element,x=m.Set,g=m.Util,d=r.prototype,n=m.MAP_ATTRS_AVAILABLE,k=Math,s=k.abs,z=k.max,v=k.min,h=k.pow,p=k.round,D=/^(from|to|\d+%)$/,y=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,i=m.REGEX_SEPARATOR,q=m.STR_EMPTY,b=m.STR_SPACE,f="number",j={along:"along",blur:f,"clip-rect":"csv",cx:f,cy:f,fill:"color","fill-opacity":f,"font-size":f,height:f,opacity:f,path:"path",r:f,rotation:"csv",rx:f,ry:f,scale:"csv",stroke:"color","stroke-opacity":f,"stroke-width":f,translation:"csv",width:f,x:f,y:f};var C=m.Animation={};C.easing_formulas={linear:function(A){return A;},"<":function(A){return h(A,3);},">":function(A){return h(A-1,3)+1;},"<>":function(A){A=A*2;if(A<1){return h(A,3)/2;}A-=2;return(h(A,3)+2)/2;},backIn:function(F){var A=1.70158;return F*F*((A+1)*F-A);},backOut:function(F){F=F-1;var A=1.70158;return F*F*((A+1)*F+A)+1;},elastic:function(G){if(G==0||G==1){return G;}var F=0.3;var A=F/4;return h(2,-10*G)*k.sin((G-A)*(2*k.PI)/F)+1;},bounce:function(H){var F=7.5625;var G=2.75;var A;if(H<(1/G)){A=F*H*H;}else{if(H<(2/G)){H-=(1.5/G);A=F*H*H+0.75;}else{if(H<(2.5/G)){H-=(2.25/G);A=F*H*H+0.9375;}else{H-=(2.625/G);A=F*H*H+0.984375;}}}return A;}};var w=[];C.elements=w;C.animation=function(){var L=+new Date;for(var V=0;V<w.length;V++){if(V!="length"&&w.hasOwnProperty(V)){var aa=w[V];if(aa.stop||aa.el.removed){continue;}var I=L-aa.start;var S=aa.ms;var R=aa.easing;var W=aa.from;var P=aa.diff;var F=aa.to;var O=aa.t;var K=aa.el;var Q={};var A;if(I<S){var H=R(I/S);for(var T in W){if(W.hasOwnProperty(T)){switch(j[T]){case"along":A=H*S*P[T];F.back&&(A=F.len-A);var U=getPointAtLength(F[T],A);K.translate(P.sx-P.x||0,P.sy-P.y||0);P.x=U.x;P.y=U.y;K.translate(U.x-P.sx,U.y-P.sy);F.rot&&K.rotate(P.r+U.alpha,U.x,U.y);break;case f:A=+W[T]+H*S*P[T];break;case"color":A="rgb("+[B(p(W[T].r+H*S*P[T].r)),B(p(W[T].g+H*S*P[T].g)),B(p(W[T].b+H*S*P[T].b))].join(",")+")";break;case"path":A=[];for(var Y=0,G=W[T].length;Y<G;Y++){A[Y]=[W[T][Y][0]];for(var X=1,Z=W[T][Y].length;X<Z;X++){A[Y][X]=+W[T][Y][X]+H*S*P[T][Y][X];}A[Y]=A[Y].join(b);}A=A.join(b);break;case"csv":switch(T){case"translation":var N=H*S*P[T][0]-O.x;var M=H*S*P[T][1]-O.y;O.x+=N;O.y+=M;A=N+b+M;break;case"rotation":A=+W[T][0]+H*S*P[T][0];W[T][1]&&(A+=","+W[T][1]+","+W[T][2]);break;case"scale":A=[+W[T][0]+H*S*P[T][0],+W[T][1]+H*S*P[T][1],(2 in F[T]?F[T][2]:q),(3 in F[T]?F[T][3]:q)].join(b);break;case"clip-rect":A=[];Y=4;while(Y--){A[Y]=+W[T][Y]+H*S*P[T][Y];}break;}break;default:var J=[].concat(W[T]);var A=[];Y=K.paper.customAttributes[T].length;while(Y--){A[Y]=+W[Y]+H*S*P[T][Y];}break;}Q[T]=A;}}K.attr(Q);K._run&&K._run.call(K);}else{if(F.along){U=getPointAtLength(F.along,F.len*!F.back);K.translate(P.sx-(P.x||0)+U.x-P.sx,P.sy-(P.y||0)+U.y-P.sy);F.rot&&K.rotate(P.r+U.alpha,U.x,U.y);}if(O.x||O.y){K.translate(-O.x,-O.y);}if(F.scale){F.scale+=q;}K.attr(F);w.splice(V--,1);}}}if(o.UA.svg&&K&&K.paper){K.paper.safari();}if(w.length){setTimeout(C.animation);}};var u=function(F,A){return F.key-A.key;};var t=function(A,F,J,G,H){var I=J-G;F.timeouts.push(setTimeout(function(){if(a(H)){H.call(F);}F.animate(A,I,A.easing);
},G));};var B=function(A){return z(v(A,255),0);};function c(R,H,F,Q,P,L){var M=3*H;var O=3*(Q-H)-M;var A=1-M-O;var K=3*F;var N=3*(P-F)-K;var S=1-K-N;function J(T){return((A*T+O)*T+M)*T;}function G(T,V){var U=I(T,V);return((S*U+N)*U+K)*U;}function I(T,aa){var Z,Y,W,U,X,V;for(W=T,V=0;V<8;V++){U=J(W)-T;if(s(U)<aa){return W;}X=(3*A*W+2*O)*W+M;if(s(X)<0.000001){break;}W=W-U/X;}Z=0;Y=1;W=T;if(W<Z){return Z;}if(W>Y){return Y;}while(Z<Y){U=J(W);if(s(U-T)<aa){return W;}if(T>U){Z=W;}else{Y=W;}W=(Y-Z)/2+Z;}return W;}return G(R,1/(200*L));}d.animateWith=function(G,I,A,K,J){for(var F=0,H=w.length;F<H;F++){if(w[F].el.id==G.id){I.start=w[F].start;}}return this.animate(I,A,K,J);};C.along=function(A){return function(H,G,F,J){var I={back:A};a(F)?(J=F):(I.rot=F);H&&H.constructor==r&&(H=H.attrs.path);H&&(I.along=H);return this.animate(I,G,J);};};d.animateAlong=C.along();d.animateAlongBack=C.along(1);d.onAnimation=function(F){var A=this;A._run=F||0;return A;};d.animate=function(ag,W,V,J){var af=this;af.timeouts=af.timeouts||[];if(a(V)||!V){J=V||null;}if(af.removed){J&&J.call(af);return af;}var aa={};var F={};var O={};var N=false;var T=af.paper.customAttributes;for(var X in ag){if(ag.hasOwnProperty(X)){if(j.hasOwnProperty(X)||T.hasOwnProperty(X)){N=true;aa[X]=af.attr(X);if(aa[X]==null){aa[X]=n[X];}F[X]=ag[X];switch(j[X]){case"along":var ad=getTotalLength(ag[X]);var Y=getPointAtLength(ag[X],ad*!!ag.back);var K=af.getRegion();O[X]=ad/W;O.tx=K.x;O.ty=K.y;O.sx=Y.x;O.sy=Y.y;F.rot=ag.rot;F.back=ag.back;F.len=ad;if(ag.rot){O.r=parseFloat(af.rotate())||0;}break;case f:O[X]=(F[X]-aa[X])/W;break;case"color":aa[X]=E.getRGB(aa[X]);var Z=E.getRGB(F[X]);O[X]={r:(Z.r-aa[X].r)/W,g:(Z.g-aa[X].g)/W,b:(Z.b-aa[X].b)/W};break;case"path":var L=g.path2curve(aa[X],F[X]);aa[X]=L[0];var R=L[1];O[X]=[];for(var ac=0,H=aa[X].length;ac<H;ac++){O[X][ac]=[0];for(var ab=1,ae=aa[X][ac].length;ab<ae;ab++){O[X][ac][ab]=(R[ac][ab]-aa[X][ac][ab])/W;}}break;case"csv":var A=String(ag[X]).split(i);var M=String(aa[X]).split(i);switch(X){case"translation":aa[X]=[0,0];O[X]=[A[0]/W,A[1]/W];break;case"rotation":aa[X]=(M[1]==A[1]&&M[2]==A[2])?M:[0,A[1],A[2]];O[X]=[(A[0]-aa[X][0])/W,0,0];break;case"scale":ag[X]=A;aa[X]=String(aa[X]).split(i);O[X]=[(A[0]-aa[X][0])/W,(A[1]-aa[X][1])/W,0,0];break;case"clip-rect":aa[X]=String(aa[X]).split(i);O[X]=[];ac=4;while(ac--){O[X][ac]=(A[ac]-aa[X][ac])/W;}break;}F[X]=A;break;default:A=[].concat(ag[X]);M=[].concat(aa[X]);O[X]=[];ac=T[X].length;while(ac--){O[X][ac]=((A[ac]||0)-(M[ac]||0))/W;}break;}}}}if(!N){var U=[];var I;for(var ah in ag){if(ag.hasOwnProperty(ah)&&D.test(ah)){X={value:ag[ah]};if(ah=="from"){ah=0;}else{if(ah=="to"){ah=100;}}X.key=parseInt(ah,10);U.push(X);}}U.sort(u);if(U[0].key){U.unshift({key:0,value:af.attrs});}var S;var G=U.length;for(var ac=0;ac<G;ac++){X=U[ac];S=U[ac-1];t(X.value,af,W/100*X.key,W/100*(S&&S.key||0),S&&S.value.callback);}I=U[G-1].value.callback;if(I){af.timeouts.push(setTimeout(function(){I.call(af);},W));}}else{var P=C.easing_formulas[V];if(!P){P=String(P).match(y);if(P&&P.length==5){var Q=P;P=function(ai){return c(ai,+Q[1],+Q[2],+Q[3],+Q[4],W);};}else{P=function(ai){return ai;};}}w.push({start:ag.start||+new Date,ms:W,easing:P,from:aa,diff:O,to:F,el:af,t:{x:0,y:0}});if(a(J)){af._ac=setTimeout(function(){J.call(af);},W);}if(w.length==1){setTimeout(C.animation);}}return af;};d.stop=function(){var A=this;for(var F=0;F<w.length;F++){if(w[F].el.id==A.id){w.splice(F--,1);}}A.timeouts=[];clearTimeout(A._ac);delete A._ac;return A;};d.translate=function(A,F){return this.attr({translation:A+" "+F});};x.addMethod(["animateAlong","animateAlongBack","animateWith","onAnimation","stop","translate"]);x.prototype.animate=function(G,A,J,N){var M=this;if(a(J)||!J){N=J||null;}var K=M._items;var F=K.length;var H=F;var O;var L;var I;if(N){I=function(){if(!--F){N.call(M);}};}J=l(J)?J:I;O=K[--H].animate(G,A,J,I);while(H--){L=K[H];if(L&&!L.removed){L.animateWith(O,G,A,J,I);}}return M;};},"@VERSION@",{requires:["aui-drawing-base"]});AUI.add("aui-drawing-drag",function(b){var f=b.Lang,c=b.config.doc,d=b.Drawing,a=d.Element,h=a.prototype,e={standAlone:true},j={mousedown:"gesturemovestart",mousemove:"gesturemove",mouseup:"gesturemoveend"},g="createTouch" in c;var i=d.Drag={drags:[]};a._getEventType=function(k){return j[k]||k;};a._getEventConfig=function(k,l){return j[l]?e:null;};i.dragMove=function(p){var k=p.clientX;var r=p.clientY;var m;var o=i.drags;var l=o.length;while(l--){m=o[l];if(g){var n=p.touches.length;var q;while(n--){q=p.touches[n];if(q.identifier==m.el._drag.id){k=q.clientX;r=q.clientY;(p.originalEvent?p.originalEvent:p).preventDefault();break;}}}else{p.preventDefault();}if(m.move){m.move.call(m.el,k-m.el._drag.x,r-m.el._drag.y,k,r);}}};i.dragUp=function(){i._dragMoveHandle.detach();i._dragUpHandle.detach();var m=i.drags;var l=m.length;var k;while(l--){k=m[l];k.el._drag={};if(k.end){k.end.call(k.el);}}i.drags=[];};h.drag=function(l,n,m){var k=this;k._drag={};k.on("mousedown",function(r){var q=this;(r.originalEvent||r).preventDefault();q._drag.x=r.clientX;q._drag.y=r.clientY;q._drag.id=r.identifier;if(n){n.call(q,r.clientX,r.clientY);}if(!i.drags.length){var o=a._getEventType("mousemove");var p=a._getEventType("mouseup");i._dragMoveHandle=b.on(o,i.dragMove,c,a._getEventConfig(o,"mousemove"));i._dragUpHandle=b.on(p,i.dragUp,c,a._getEventConfig(p,"mouseup"));}i.drags.push({el:this,move:l,end:m});});return k;};h.undrag=function(l,p,o){var k=this;var n=i.drags;var m=n.length;while(m--){n[m].el==k&&(n[m].move==l&&n[m].end==o)&&n.splice(m,1);if(!n.length){i._dragMoveHandle.detach();i._dragUpHandle.detach();}}};d.Set.addMethod(["drag","undrag"]);},"@VERSION@",{requires:["aui-drawing-base","event-gestures"]});AUI.add("aui-drawing-fonts",function(d){var j=d.Lang,c=j.isString,g=d.Drawing,n=g.prototype,k=function(o){return e[o]||"M";},e={l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"},i={bold:700,bolder:800,lighter:300,normal:400},m=Math,f=m.max,b=m.min,a=/[mlcxtrv]/g,h=g.REGEX_SEPARATOR,l=g.STR_EMPTY;g.registerFont=function(p){if(!p.face){return p;
}this.fonts=this.fonts||{};var y=this.fonts;var w={w:p.w,face:{},glyphs:{}};var r=p.face["font-family"];var t=p.face;var v=w.face;for(var o in t){if(t.hasOwnProperty(o)){v[o]=t[o];}}if(y[r]){y[r].push(w);}else{y[r]=[w];}if(!p.svg){v["units-per-em"]=parseInt(t["units-per-em"],10);for(var u in p.glyphs){if(p.glyphs.hasOwnProperty(u)){var x=p.glyphs[u];var s=x.d;if(s){s=s.replace(a,k);s="M"+s+"z";}w.glyphs[u]={w:x.w,k:{},d:s};if(x.k){for(var q in x.k){if(x.hasOwnProperty(q)){w.glyphs[u].k[q]=x.k[q];}}}}}}return p;};n.getFont=function(w,x,p,r){var z=this;r=r||"normal";p=p||"normal";x=+x||i[x]||400;if(!g.fonts){return;}var A=g.fonts;var t=A[w];if(!t){var q=new RegExp("(^|\\s)"+w.replace(/[^\w\d\s+!~.:_-]/g,l)+"(\\s|$)","i");for(var o in A){if(A.hasOwnProperty(o)){if(q.test(o)){t=A[o];break;}}}}var u;if(t){var y;for(var v=0,s=t.length;v<s;v++){u=t[v];y=u.face;if(y["font-weight"]==x&&(y["font-style"]==p||!y["font-style"])&&y["font-stretch"]==r){break;}}}return u;};n.print=function(s,r,o,v,w,I,t){var G=this;I=I||"middle";t=f(b(t||0,1),-1);var D=G.createSet();var H=String(o).split(l);var E=0;var B=l;var J;c(v)&&(v=G.getFont(v));if(v){J=(w||16)/v.face["units-per-em"];var q=v.face.bbox.split(h);var u=+q[0];var z=+q[1]+(I=="baseline"?q[3]-q[1]+(+v.face.descent):(q[3]-q[1])/2);for(var C=0,p=H.length;C<p;C++){var A=C&&v.glyphs[H[C-1]]||{};var F=v.glyphs[H[C]];E+=C?(A.w||v.w)+(A.k&&A.k[H[C]]||0)+(v.w*t):0;F&&F.d&&D.push(G.path(F.d).attr({fill:"#000",stroke:"none",translation:[E,0]}));}D.scale(J,J,u,z).translate(s-u,r-z);}return D;};},"@VERSION@",{requires:["aui-drawing-base"]});AUI.add("aui-drawing",function(a){},"@VERSION@",{skinnable:false,use:["aui-drawing-base","aui-drawing-animate","aui-drawing-drag","aui-drawing-fonts"]});