AUI.add("aui-datatable-base",function(d){var g=d.Lang,b=d.ArraySort.compare,n=g.isNumber,c=g.isString,f="change",j="childNodes",l="columns",e="data",k="dataChange",h="headers",i="id",a="#",m=" ";d.DataTable=d.Base.create("datatable",d.DataTable,[],{initializer:function(){var o=this;o.after(o._uiSetRecordsetExt,o,"_uiSetRecordset");},getCellNode:function(p,q){var o=this;return o.getRowNode(p).get(j).item(q.keyIndex);},getColNode:function(p){var o=this;var r=o.get(l);var q=r.getColumnIndex(r.getColumnByCell(p));return o._colgroupNode.get(j).item(q);},getRowNode:function(o){return d.one(a+o.get(i));},_fixPluginsUI:function(){var p=this;var q=p.sort;var o=p.scroll;if(q&&o){o.syncUI();}},_uiSetRecordsetExt:function(p){var o=this;o._fixPluginsUI();}},{});d.Column=d.Base.create("column",d.Column,[],{},{ATTRS:{sortFn:{value:function(q,o,r,s){var p=b(q.getValue(r),o.getValue(r),s);if(p===0){p=b(q.get("id"),o.get("id"),s);}return p;}}}});d.Columns=d.Base.create("columns",d.Columns,[],{getColumn:function(p){var o=this;if(c(p)){return this.idHash[p];}else{if(n(p)){return o.keys[p];}}return null;},getColumnByCell:function(p){var o=this;var q=p.getAttribute(h).split(m).pop()||p.get(i);return o.getColumn(q);},getColumnIndex:function(o){return o.keyIndex;},getLength:function(){var o=this;return o.keys.length;},_setDefinitions:function(o){return o;}},{});d.Recordset=d.Base.create("recordset",d.Recordset,[],{getRecordByRow:function(p){var o=this;return o.getRecord(p.get(i));},getRecordIndex:function(p){var o=this;return d.Array.indexOf(o._items,p);},updateRecordDataByKey:function(p,q,s){var o=this;var r=p.get(e);if(r){r[q]=s;p.set(e,r);}o.update(p,o.getRecordIndex(p));}},{});d.Plugin.RecordsetSort.prototype._defSortFn=function(r){var o=this;var q=o.get("host");var p=q._items;d.Array.stableSort(p,function(t,s){return r.sorter.call(p,t,s,r.field,r.desc);});o.set("lastSortProperties",r);};},"@VERSION@",{skinnable:true,requires:["aui-base","datatable","plugin"]});AUI.add("aui-datatable-events",function(k){var R=k.Lang,t=R.isArray,E=R.isObject,e=R.isValue,b=k.Array.each,D=k.Object.keys,L=k.Object.values,y=k.Selector.test,m=k.ClassNameManager.getClassName,u=k.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),h=k.cached(function(S,A){return S+u(A.toLowerCase());}),M="boundingBox",O="cell",C="cellSelector",G="click",o="column",H="columns",j="data",n="datatable",s="dblclick",c="events",x="header",q="host",d="inHead",Q="keydown",P="keyup",F="liner",z="mousedown",f="mouseenter",l="mouseleave",i="mouseup",I="row",v="table",N="tags",a="tagName",J="tbody",w="thead",B="tr",p=",",r=".",K=m(n,F);var g=k.Base.create("dataTableEvents",k.Plugin.Base,[],{_bubbling:false,_handler:null,_tagsFilter:null,initializer:function(T){var A=this;var S=A.get(N);A._tagsFilter=D(S).join(p);A._initEvents();},destructor:function(){var A=this;var S=A._handler;if(S){S.detach();}},updateEventPayload:function(V,S){var A=this;var U=A.get(q);var W=U._theadNode;var X=V.getData(d);var T=V.getData(F);var Y=V.getData(I);if(!e(X)){X=W.contains(V);V.setData(d,X);}if(!e(T)){T=V.one(r+K);V.setData(F,T);}if(!e(Y)){Y=V.ancestor(B);V.setData(I,Y);}return k.mix(S,{cell:V,column:U.get(COLUMNSET).getColumnByCell(V),inHead:X,liner:T,originalEvent:S,row:Y,record:U.get(j).getRecordByRow(Y)},true);},_filterBubble:function(X){var A=this;var W=A.get(q);var S=W._tableNode.getDOM();var T=[];while(X){var V=(X===S);if(y(X,A._tagsFilter,(V?null:S))){T.push(X);}if(V){break;}X=X.parentNode;}if(T.length){var U=W.getColNode(k.one(T[0]));if(U){T.splice(2,0,U.getDOM());}}return T;},_handleEvents:function(A){var W,U;var Z=this;var aa=Z.get(q);var ab=Z.get(N);var T=A.currentTarget;var S=Z._filterBubble(T.getDOM());var Y=Z.updateEventPayload(T,A);Z._bubbling=true;for(W=0,U=S.length;(W<U)&&Z._bubbling;W++){var V=k.one(S[W]);var X=ab[V.get(a).toLowerCase()];Y.node=V;Y.property=X;aa.fire(h(X,A.type),Y);}},_initEvents:function(){var A=this;var V=A.get(q);var S=A.get(N);var T=A.get(c);var U={};b(L(S),function(W){b(T,function(X){var Y=h(W,X);U[Y]={stoppedFn:k.bind(A._stopBubble,A)};});});V.publish(U);A._handler=V.get(M).delegate(T,k.bind(A._handleEvents,A),A.get(C));},_stopBubble:function(){var A=this;A._bubbling=false;}},{NS:"events",NAME:"dataTableEvents",ATTRS:{cellSelector:{value:"td,th",writeOnce:true},events:{validator:t,value:[G,s,Q,P,z,f,l,i]},tags:{validator:E,value:{col:o,table:v,thead:w,tbody:J,tr:I,th:x,td:O},writeOnce:true}}});k.namespace("Plugin").DataTableEvents=g;},"@VERSION@",{requires:["aui-datatable-base"]});AUI.add("aui-datatable-edit",function(ar){var ab=ar.Lang,bd=ar.Array,e=ab.isArray,aS=ab.isBoolean,aN=ab.isFunction,H=ab.isObject,aX=ab.isString,aM=ab.String,aK=ar.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),a3=function(A){return(A instanceof ar.BaseCellEditor);},ao=ar.WidgetStdMod,z=ar.getClassName,ad="add",a4="addOption",aL="baseCellEditor",r="boundingBox",P="calendar",ak="cancel",aP="cell",aw="celleditor",B="checkboxCellEditor",o="checked",aH="click",aG="columns",v="contentBox",aC="data",O="datatable",K="dateCellEditor",aj="dd",T="delete",an="disk",aE="dotted",aO="dropDownCellEditor",L="edit",X="editable",f="editor",E="editEvent",ah="editOptions",G="element",aB="elementName",aQ="field",c="grip",D="handle",u="hide",au="hideOnSave",af="icon",aF="id",n="initEdit",bc="initToolbar",at="initValidator",Z="input",d="inputFormatter",bb="key",av="label",ap="link",V="mousedown",Y="multiple",l="name",aU="option",aZ="options",t="optionsCellEditor",a8="outputFormatter",k="pencil",ai="radioCellEditor",ag="records",a9="remove",a6="rendered",ae="return",m="row",aJ="save",aV="selected",az="selectedAttrName",W="showToolbar",aY="submit",Q="textAreaCellEditor",x="textCellEditor",N="toolbar",y="unescapeValue",U="validator",a2="value",aq="vertical",ac="visible",a0="wrapper",bg=",",i=".",R="",h="#",a5="\n",ba=" ",s=/<br\s*\/?>/gi,C=/[\r\n]/g,b=z(aw,L),g=z(aw,L,ad,aU),bf=z(aw,L,aj,D),aT=z(aw,L,T,aU),a7=z(aw,L,u,aU),ax=z(aw,L,Z,l),aI=z(aw,L,Z,a2),am=z(aw,L,av),p=z(aw,L,ap),aA=z(aw,L,aU,m),S=z(aw,G),aW=z(aw,av),J=z(aw,aU),w=z(aw,a0),F=z(O,X),j=z(af),aa=z(af,c,aE,aq),aR="<br/>";
var a1=function(){};a1.NAME="dataTableCellEditorSupport";a1.ATTRS={editEvent:{setter:"_setEditEvent",validator:aX,value:aH}};ar.mix(a1.prototype,{initializer:function(){var A=this;A.after({render:A._afterRenderEditor});A.on(A.get(E),A._onCellEdit);A.after(A._afterUiSetRecordset,A,"_uiSetRecordset");},getCellEditor:function(bh,bj){var A=this;var bi=bj.get(f);var bk=bh.get(aC).editor;if(bi===false||bk===false){return null;}return bk||bi;},getRecordColumnValue:function(A,bh){return A.getValue(bh.get(aQ));},syncEditableColumnsUI:function(){var A=this;var bh=A.get(aG);var bi=A.get(aC);ar.each(bh.idHash,function(bk){var bj=bk.get(f);if(a3(bj)){ar.all("[headers="+bk.get(aF)+"]").addClass(F);}});ar.each(bi.get(ag),function(bj){var bk=bj.get(aC).editor;var bl=a3(bk);ar.all(h+bj.get("id")+">td").each(function(bo,bm){var bn=bh.getColumn(bm);if(bk===false){bo.removeClass(F);}else{if(bl||(bn.get(f)!==false)){bo.addClass(F);}}});});},_afterUiSetRecordset:function(bh){var A=this;A.syncEditableColumnsUI();},_afterRenderEditor:function(bh){var A=this;if(!A.events){A.plug(ar.Plugin.DataTableEvents);}},_editCell:function(bm){var A=this;var bj=A.get(aG);var bn=A.get(aC);var bl=bm.column;var bh=bm.record;A.activeColumnIndex=bj.getColumnIndex(bl);A.activeRecordIndex=bn.getRecordIndex(bh);var bi=bm.alignNode||bm.cell;var bk=A.getCellEditor(bh,bl);if(a3(bk)){if(!bk.get(a6)){bk.on({visibleChange:ar.bind(A._onEditorVisibleChange,A),save:ar.bind(A._onEditorSave,A)});bk.render();}bk.set(a2,A.getRecordColumnValue(bh,bl));bk.show().move(bi.getXY());}},_onCellEdit:function(bh){var A=this;A._editCell(bh);},_onEditorVisibleChange:function(bm){var bh=this;var bk=bm.currentTarget;var bj=bh.selection;if(bj){var bi=bj.getActiveRecord();var bl=bj.getActiveColumn();var A=bh.getCellNode(bi,bl);var bn=bh.getRowNode(bi);if(bm.newVal){bk._syncFocus();}else{bj.select(A,bn);}}},_onEditorSave:function(bj){var A=this;var bi=bj.currentTarget;var bk=A.get(aC);bi.set(a2,bj.newVal);var bh=A.selection;if(bh){bk.updateRecordDataByKey(bh.getActiveRecord(),bh.getActiveColumn().get(bb),bj.newVal);}},_setEditEvent:function(A){return aP+aK(A);}});ar.DataTable.CellEditorSupport=a1;ar.DataTable=ar.Base.create("dataTable",ar.DataTable,[ar.DataTable.CellEditorSupport]);var q=ar.Component.create({NAME:aL,ATTRS:{editable:{value:false,validator:aS},elementName:{value:a2,validator:aX},footerContent:{value:R},hideOnSave:{value:true,validator:aS},inputFormatter:{value:function(A){if(aX(A)){A=A.replace(C,aR);}return A;}},outputFormatter:{value:function(bh){var A=this;if(aX(bh)){if(A.get(y)){bh=aM.unescapeEntities(bh);}bh=bh.replace(s,a5);}return bh;}},showToolbar:{value:true,validator:aS},strings:{value:{edit:"Edit",save:"Save",cancel:"Cancel"}},tabIndex:{value:1},toolbar:{setter:"_setToolbar",validator:H,value:null},unescapeValue:{value:true,validator:aS},validator:{setter:"_setValidator",validator:H,value:null},value:{value:R},visible:{value:false}},EXTENDS:ar.Overlay,UI_ATTRS:[X,W,a2],prototype:{CONTENT_TEMPLATE:"<form></form>",ELEMENT_TEMPLATE:null,elements:null,validator:null,_hDocMouseDownEv:null,initializer:function(bh){var A=this;A._initEvents();},destructor:function(){var bh=this;var A=bh._hDocMouseDownEv;var bj=bh.toolbar;var bi=bh.validator;if(A){A.detach();}if(bj){bj.destroy();}if(bi){bi.destroy();}},bindUI:function(){var A=this;A.get(r).on(bb,ar.bind(A._onEscKey,A),"down:27");},formatValue:function(bh,bi){var A=this;if(aN(bh)){bi=bh.call(A,bi);}return bi;},getValue:function(){var A=this;return A.formatValue(A.get(d),A.getElementsValue());},_initEvents:function(){var A=this;A.publish({cancel:{defaultFn:A._defCancelFn},initEdit:{defaultFn:A._defInitEditFn,fireOnce:true},initValidator:{defaultFn:A._defInitValidatorFn,fireOnce:true},initToolbar:{defaultFn:A._defInitToolbarFn,fireOnce:true},save:{defaultFn:A._defSaveFn}});A.after({render:A._afterRender,visibleChange:ar.debounce(A._debounceVisibleChange,350,A)});A.on({"form-validator:submit":ar.bind(A._onSubmit,A)});},_afterRender:function(){var A=this;A._handleInitValidatorEvent();A._handleInitToolbarEvent();},_defCancelFn:function(bh){var A=this;A.hide();},_defInitValidatorFn:function(bh){var A=this;A.validator=new ar.FormValidator(A.get(U));},_defInitToolbarFn:function(bi){var A=this;var bh=A.get(X);A.toolbar=new ar.Toolbar(A.get(N)).render(A.footerNode);if(bh){A._uiSetEditable(bh);}},_defSaveFn:function(bh){var A=this;if(A.get(au)){A.hide();}},_debounceVisibleChange:function(bi){var bh=this;var A=bh._hDocMouseDownEv;if(bi.newVal){if(!A){bh._hDocMouseDownEv=ar.getDoc().on(V,ar.bind(bh._onDocMouseDownExt,bh));}}else{if(A){A.detach();bh._hDocMouseDownEv=null;}}},_handleCancelEvent:function(){var A=this;A.fire(ak);},_handleEditEvent:function(){var A=this;A.fire(L);},_handleInitEditEvent:function(){var A=this;if(A.get(a6)){this.fire(n);}},_handleInitValidatorEvent:function(){var A=this;if(A.get(a6)){this.fire(at);}},_handleInitToolbarEvent:function(){var A=this;if(A.get(a6)&&A.get(W)){this.fire(bc);}},_handleSaveEvent:function(){var A=this;if(!A.validator.hasErrors()){A.fire(aJ,{newVal:A.getValue(),prevVal:A.get(a2)});}},_onDocMouseDownExt:function(bi){var A=this;var bh=A.get(r);if(!bh.contains(bi.target)){A.set(ac,false);}},_onEscKey:function(bh){var A=this;A.hide();},_onSubmit:function(bi){var A=this;var bh=bi.validator;A._handleSaveEvent();if(bh){bh.formEvent.halt();}},_setToolbar:function(bi){var bh=this;var A=bh.getStrings();return ar.merge({activeState:false,children:[{label:A[aJ],icon:an,type:aY},{handler:ar.bind(bh._handleCancelEvent,bh),label:A[ak]}]},bi);},_setValidator:function(bh){var A=this;return ar.merge({boundingBox:A.get(v),bubbleTargets:A},bh);},_uiSetShowToolbar:function(bi){var A=this;var bh=A.footerNode;if(bi){bh.show();}else{bh.hide();}A._handleInitToolbarEvent();},getElementsValue:function(){var A=this;var bh=A.elements;if(bh){return bh.get(a2);}return R;},renderUI:function(){var A=this;if(A.ELEMENT_TEMPLATE){A.elements=ar.Node.create(A.ELEMENT_TEMPLATE);A._syncElementsName();A.setStdModContent(ao.BODY,A.elements);
}},_defInitEditFn:function(A){},_syncElementsFocus:function(){var A=this;A.elements.selectText();},_syncElementsName:function(){var A=this;A.elements.setAttribute(l,A.get(aB));},_syncFocus:function(){var A=this;ar.later(0,A,A._syncElementsFocus);},_uiSetEditable:function(bi){var A=this;var bh=A.toolbar;if(A.get(a6)&&bh){if(bi){bh.add({handler:ar.bind(A._handleEditEvent,A),icon:k,label:A.getString(L)},1);}else{bh.remove(1);}}},_uiSetValue:function(bi){var A=this;var bh=A.elements;if(bh){bh.val(A.formatValue(A.get(a8),bi));}}}});ar.BaseCellEditor=q;var be=ar.Component.create({NAME:t,ATTRS:{inputFormatter:{value:null},options:{setter:"_setOptions",value:{},validator:H},outputFormatter:{value:null},selectedAttrName:{value:aV,validator:aX},strings:{value:{add:"Add",cancel:"Cancel",addOption:"Add option",edit:"Edit options",editOptions:"Edit option(s)",name:"Name",remove:"Remove",save:"Save",stopEditing:"Stop editing",value:"Value"}}},EXTENDS:ar.BaseCellEditor,UI_ATTRS:[aZ],prototype:{EDIT_TEMPLATE:'<div class="'+b+'"></div>',EDIT_OPTION_ROW_TEMPLATE:'<div class="'+aA+'">'+'<span class="'+[bf,j,aa].join(ba)+'"></span>'+'<input class="'+ax+'" size="7" placeholder="{titleName}" title="{titleName}" type="text" value="{valueName}" /> '+'<input class="'+aI+'" size="7" placeholder="{titleValue}" title="{titleValue}" type="text" value="{valueValue}" /> '+'<a class="'+[p,aT].join(ba)+'" href="javascript:void(0);">{remove}</a> '+"</div>",EDIT_ADD_LINK_TEMPLATE:'<a class="'+[p,g].join(ba)+'" href="javascript:void(0);">{addOption}</a> ',EDIT_LABEL_TEMPLATE:'<div class="'+am+'">{editOptions}</div>',editContainer:null,editSortable:null,options:null,initializer:function(){var A=this;A.on(L,A._onEditEvent);A.on(aJ,A._onSave);A.after(bc,A._afterInitToolbar);},addNewOption:function(bj,bk){var A=this;var bi=A.editContainer.one(i+g);var bh=ar.Node.create(A._createEditOption(bj||R,bk||R));bi.placeBefore(bh);bh.one(Z).focus();},removeOption:function(A){A.remove();},saveOptions:function(){var A=this;var bk=A.editContainer;if(bk){var bj=bk.all(i+ax);var bh=bk.all(i+aI);var bi={};bj.each(function(bn,bm){var bl=bn.val();var bo=bh.item(bm).val();if(bl&&bo){bi[bo]=bl;}});A.set(aZ,bi);A._uiSetValue(A.get(a2));A.toggleEdit();}},toggleEdit:function(){var A=this;A.editContainer.toggle();},_createOptions:function(bi){var bm=this;var A=bm.elements;var bk=[];var bh=[];var bj=bm.OPTION_TEMPLATE;var bn=bm.OPTION_WRAPPER;ar.each(bi,function(br,bq){var bp={id:ar.guid(),label:br,name:bq,value:bq};if(bj){bk.push(ab.sub(bj,bp));}if(bn){bh.push(ab.sub(bn,bp));}});var bo=ar.NodeList.create(bk.join(R));var bl=ar.NodeList.create(bh.join(R));if(bl.size()){bl.each(function(bq,bp){bq.prepend(bo.item(bp));});A.setContent(bl);}else{A.setContent(bo);}bm.options=bo;},_createEditBuffer:function(){var bh=this;var A=bh.getStrings();var bi=[];bi.push(ab.sub(bh.EDIT_LABEL_TEMPLATE,{editOptions:A[ah]}));ar.each(bh.get(aZ),function(bj,bk){bi.push(bh._createEditOption(bj,bk));});bi.push(ab.sub(bh.EDIT_ADD_LINK_TEMPLATE,{addOption:A[a4]}));return bi.join(R);},_createEditOption:function(bi,bj){var bh=this;var A=bh.getStrings();return ab.sub(bh.EDIT_OPTION_ROW_TEMPLATE,{remove:A[a9],titleName:A[l],titleValue:A[a2],valueName:bi,valueValue:bj});},_defInitEditFn:function(bh){var A=this;var bi=ar.Node.create(A.EDIT_TEMPLATE);bi.delegate("click",ar.bind(A._onEditLinkClickEvent,A),i+p);bi.delegate("keydown",ar.bind(A._onEditKeyEvent,A),Z);A.editContainer=bi;A.setStdModContent(ao.BODY,bi.hide(),ao.AFTER);A.editSortable=new ar.Sortable({container:bi,handles:[i+bf],nodes:i+aA,opacity:".3"}).delegate.dd.plug(ar.Plugin.DDConstrained,{constrain:bi,stickY:true});A._syncEditOptionsUI();},_getSelectedOptions:function(){var A=this;var bh=[];A.options.each(function(bi){if(bi.get(A.get(az))){bh.push(bi);}});return ar.all(bh);},_onEditEvent:function(bh){var A=this;A._handleInitEditEvent();A.toggleEdit();A._syncEditOptionsUI();},_onEditLinkClickEvent:function(bh){var A=this;var bi=bh.currentTarget;if(bi.test(i+g)){A.addNewOption();}else{if(bi.test(i+a7)){A.toggleEdit();}else{if(bi.test(i+aT)){A.removeOption(bi.ancestor(i+aA));}}}bh.halt();},_onEditKeyEvent:function(bh){var A=this;var bi=bh.currentTarget;if(bh.isKey(ae)){var bj=bi.next(Z);if(bj){bj.selectText();}else{A.addNewOption();}bh.halt();}},_onSave:function(bh){var A=this;A.saveOptions();},_setOptions:function(bh){var A={};if(e(bh)){bd.each(bh,function(bi){A[bi]=bi;});}else{if(H(bh)){A=bh;}}return A;},_syncEditOptionsUI:function(){var A=this;A.editContainer.setContent(A._createEditBuffer());},_uiSetOptions:function(bh){var A=this;A._uiSetValue(A.get(a2));A._createOptions(bh);A._syncElementsName();},_uiSetValue:function(bi){var A=this;var bh=A.options;if(bh&&bh.size()){bh.set(A.get(az),false);if(bi){if(!e(bi)){bi=bi.split(bg);}bd.each(bi,function(bj){bh.filter('[value="'+ab.trim(bj)+'"]').set(A.get(az),true);});}}return bi;}}});ar.BaseOptionsCellEditor=be;var ay=ar.Component.create({NAME:x,EXTENDS:ar.BaseCellEditor,prototype:{ELEMENT_TEMPLATE:'<input autocomplete="off" class="'+S+'" type="text" />'}});ar.TextCellEditor=ay;var aD=ar.Component.create({NAME:Q,EXTENDS:ar.BaseCellEditor,prototype:{ELEMENT_TEMPLATE:'<textarea class="'+S+'"></textarea>'}});ar.TextAreaCellEditor=aD;var M=ar.Component.create({NAME:aO,ATTRS:{multiple:{value:false,validator:aS}},EXTENDS:ar.BaseOptionsCellEditor,UI_ATTRS:[Y],prototype:{ELEMENT_TEMPLATE:'<select class="'+S+'"></select>',OPTION_TEMPLATE:'<option value="{value}">{label}</option>',getElementsValue:function(){var A=this;if(A.get(Y)){return A._getSelectedOptions().get(a2);}return A.elements.get(a2);},_syncElementsFocus:function(){var A=this;A.elements.focus();},_uiSetMultiple:function(bi){var A=this;var bh=A.elements;if(bi){bh.setAttribute(Y,Y);}else{bh.removeAttribute(Y);}}}});ar.DropDownCellEditor=M;var al=ar.Component.create({NAME:B,ATTRS:{selectedAttrName:{value:o}},EXTENDS:ar.BaseOptionsCellEditor,prototype:{ELEMENT_TEMPLATE:'<div class="'+S+'"></div>',OPTION_TEMPLATE:'<input class="'+J+'" id="{id}" name="{name}" type="checkbox" value="{value}"/>',OPTION_WRAPPER:'<label class="'+w+'" for="{id}"><span class="'+aW+'">{label}</span></label>',getElementsValue:function(){var A=this;
return A._getSelectedOptions().get(a2);},_syncElementsFocus:function(){var A=this;var bh=A.options;if(bh&&bh.size()){bh.item(0).focus();}},_syncElementsName:function(){var A=this;var bh=A.options;if(bh){bh.setAttribute(l,A.get(aB));}}}});ar.CheckboxCellEditor=al;var I=ar.Component.create({NAME:ai,EXTENDS:ar.CheckboxCellEditor,prototype:{OPTION_TEMPLATE:'<input class="aui-field-input-choice" id="{id}" name="{name}" type="radio" value="{value}"/>',getElementsValue:function(){var A=this;return A._getSelectedOptions().get(a2)[0];}}});ar.RadioCellEditor=I;var a=ar.Component.create({NAME:K,EXTENDS:ar.BaseCellEditor,ATTRS:{bodyContent:{value:R},calendar:{setter:"_setCalendar",validator:H,value:null}},prototype:{ELEMENT_TEMPLATE:'<input class="'+S+'" type="hidden" />',initializer:function(){var A=this;A.on("calendar:select",ar.bind(A._onDateSelect,A));},getElementsValue:function(){var A=this;return A.calendar.getFormattedSelectedDates().join(bg);},_afterRender:function(){var A=this;ar.DateCellEditor.superclass._afterRender.apply(A,arguments);A.calendar=new ar.Calendar(A.get(P)).render(A.bodyNode);},_onDateSelect:function(bh){var A=this;A.elements.val(bh.date.formatted.join(bg));},_setCalendar:function(bh){var A=this;return ar.merge({bubbleTargets:A},bh);},_uiSetValue:function(bi){var A=this;var bh=A.calendar;if(bh){if(bi&&aX(bi)){bi=bi.split(bg);}A.calendar.set("dates",bi);}}}});ar.DateCellEditor=a;},"@VERSION@",{skinnable:true,requires:["aui-calendar","aui-datatable-events","aui-toolbar","aui-form-validator","overlay","sortable"]});AUI.add("aui-datatable-selection",function(B){var j=B.Lang,s=j.isBoolean,v=j.isString,H=B.getClassName,h=B.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),o="cell",C="columns",f="columnsChange",m="data",i="dataChange",r="datatable",F="down",J="esc",u="focused",I="host",p="id",d="keydown",x="left",q="mousedown",E="mouseEvent",w="multiple",l="return",t="right",n="row",c="select",k="selected",y="selectRow",e="tab",z="tabindex",G="tr",g="up",a=H(r,o,k),D=H(r,n,k);var b=B.Base.create("dataTableSelection",B.Plugin.Base,[],{activeColumnIndex:-1,activeRecordIndex:-1,handlerKeyDown:null,selectedCellHash:null,selectedColumnHash:null,selectedRowHash:null,initializer:function(){var A=this;A.selectedCellHash={};A.selectedColumnHash={};A.selectedRowHash={};A.publish({select:{defaultFn:A._defSelectFn}});A.afterHostEvent(A.get(E),A._afterMouseEvent);A.afterHostEvent(f,A._afterHostColumnsChange);A.afterHostEvent(i,A._afterHostDataChange);A.handlerKeyDown=B.getDoc().on(d,B.bind(A._afterKeyEvent,A));},destroy:function(){var A=this;var K=A.handlerKeyDown;if(K){K.detach();}},getActiveColumn:function(){var A=this;var K=A.get(I);return K.get(C).getColumn(A.activeColumnIndex);},getActiveRecord:function(){var A=this;var K=A.get(I);return K.get(m).getRecord(A.activeRecordIndex);},isCellSelected:function(K){var A=this;return A.selectedCellHash[K.get(p)];},isColumnSelected:function(A){},isRowSelected:function(K){var A=this;return A.selectedRowHash[K.get(p)];},select:function(K,Q){var A=this;var O=A.get(I);var M=O.get(C);var P=O.get(m);var N=M.getColumnByCell(K);var L=P.getRecordByRow(Q||K.ancestor(G));A.activeColumnIndex=M.getColumnIndex(N);A.activeRecordIndex=P.getRecordIndex(L);if(K){A.selectCell(K);}if(A.get(y)&&Q){A.selectRow(Q);}},selectCell:function(K){var A=this;if(!A.get(w)){A.unselectAllCells();}A.selectedCellHash[K.get(p)]=K;K.setAttribute(z,0).focus();K.addClass(a);},selectColumn:function(A){},selectRow:function(K){var A=this;if(!A.get(w)){A.unselectAllRows();}A.selectedRowHash[K.get(p)]=K;K.addClass(D);},toggleCell:function(K,L){var A=this;if(L||!A.isCellSelected(K)){A.selectCell(K);}else{A.unselectCell(K);}},toggleColumn:function(A,K){},toggleRow:function(L,K){var A=this;if(K||!A.isRowSelected(L)){A.selectRow(L);}else{A.unselectRow(L);}},unselectCell:function(K){var A=this;delete A.selectedCellHash[K.get(p)];K.removeAttribute(z);K.removeClass(a);},unselectColumn:function(A){},unselectRow:function(K){var A=this;delete A.selectedRowHash[K.get(p)];K.removeClass(D);},unselectAllCells:function(){var A=this;B.each(A.selectedCellHash,B.bind(A.unselectCell,A));},unselectAllColumns:function(){},unselectAllRows:function(){var A=this;B.each(A.selectedRowHash,B.bind(A.unselectRow,A));},_afterHostColumnsChange:function(K){var A=this;A._cleanUp();},_afterHostDataChange:function(K){var A=this;A._cleanUp();},_afterMouseEvent:function(K){var A=this;A._handleSelectEvent(K);},_afterKeyEvent:function(N){var A=this;var M=A.get(I);var L=A.getActiveColumn();var K=A.getActiveRecord();if(!M.get(u)||!L||!K){return;}if(M.events){M.events.updateEventPayload(M.getCellNode(K,L),N);}if(N.isNavKey()){if(N.isKey(J)){A._onEscKey(N);}else{if(N.isKey(l)){A._onReturnKey(N);}else{A._navigate(N);}}N.halt();}},_cleanUp:function(){var A=this;A.selectedCellHash={};A.selectedColumnHash={};A.selectedRowHash={};},_defSelectFn:function(K){var A=this;A.select(K.cell,K.row);},_navigate:function(K){var A=this;A._updateNavKeyInfo(K);A._handleSelectEvent(K);},_onEscKey:function(M){var A=this;var L=A.get(I);var K=L.getCellEditor(M.record,M.column);if(K){K.hide();}},_onReturnKey:function(L){var A=this;var K=A.get(I);K._editCell(L);},_handleSelectEvent:function(K){var A=this;A.fire(c,{cell:K.cell,column:K.column,inHead:K.inHead,liner:K.liner,originalEvent:K.originalEvent,row:K.row,record:K.record});},_updateNavKeyInfo:function(A){var T=this;var U=T.get(I);var K=A.originalEvent;var M=U.get(C);var R=A.column.keyIndex;var P=U.get(m);var N=P.getRecordIndex(A.record);var L=K.ctrlKey||K.metaKey;var S=K.shiftKey;if(K.isKey(x)||(S&&K.isKey(e))){if(L){R=0;}else{R--;}}else{if(K.isKey(t)||(!S&&K.isKey(e))){if(L){R=M.getLength()-1;}else{R++;}}else{if(K.isKey(F)){if(L){N=P.getLength()-1;}else{N++;}}else{if(K.isKey(g)){if(L){N=0;}else{N--;}}}}}R=Math.max(Math.min(R,M.getLength()-1),0);N=Math.max(Math.min(N,P.getLength()-1),0);if(U.events){var O=M.getColumn(R);var Q=P.getRecord(N);U.events.updateEventPayload(U.getCellNode(Q,O),A);
}},_setMouseEvent:function(A){return o+h(A);}},{NS:"selection",NAME:"dataTableSelection",ATTRS:{selectRow:{value:false,validator:s},multiple:{value:false,validator:s},mouseEvent:{setter:"_setMouseEvent",value:q,validator:v}}});B.namespace("Plugin").DataTableSelection=b;},"@VERSION@",{skinnable:true,requires:["aui-datatable-base"]});AUI.add("aui-datatable",function(a){},"@VERSION@",{use:["aui-datatable-base","aui-datatable-events","aui-datatable-edit","aui-datatable-selection"],skinnable:true});