AUI.add("aui-datatable-base",function(e){var j=e.Lang,c=e.ArraySort.compare,o=j.isNumber,d=j.isString,h="change",m="childNodes",i="columnset",f="data",k="headers",l="id",b="recordset",g="recordsetChange",a="#",n=" ";e.DataTable.Base=e.Base.create("datatable",e.DataTable.Base,[],{initializer:function(){var p=this;p._bindRecordsetRecordChange();p.after(g,p._afterRecordsetChangeExt);p.after(p._uiSetRecordsetExt,p,"_uiSetRecordset");},getCellNode:function(q,r){var p=this;return p.getRowNode(q).get(m).item(r.keyIndex);},getColNode:function(q){var p=this;var s=p.get(i);var r=s.getColumnIndex(s.getColumnByCell(q));return p._colgroupNode.get(m).item(r);},getRowNode:function(p){return e.one(a+p.get(l));},_afterRecordsetChangeExt:function(q){var p=this;p._bindRecordsetRecordChange();},_afterRecordsetRecordChange:function(q){var p=this;p._uiSetRecordset(p.get(b));},_bindRecordsetRecordChange:function(q){var p=this;p.get(b).after(h,e.bind(p._afterRecordsetRecordChange,p));},_fixPluginsUI:function(){var q=this;var r=q.sort;var p=q.scroll;if(r&&p){p.syncUI();p._syncWidths();}},_uiSetRecordsetExt:function(q){var p=this;p._fixPluginsUI();}},{});e.Column=e.Base.create("column",e.Column,[],{},{ATTRS:{sortFn:{value:function(r,p,s,t){var q=c(r.getValue(s),p.getValue(s),t);if(q===0){q=c(r.get("id"),p.get("id"),t);}return q;}}}});e.Columnset=e.Base.create("columnset",e.Columnset,[],{getColumn:function(q){var p=this;if(d(q)){return this.idHash[q];}else{if(o(q)){return p.keys[q];}}return null;},getColumnByCell:function(q){var p=this;var r=q.getAttribute(k).split(n).pop()||q.get(l);return p.getColumn(r);},getColumnIndex:function(p){return p.keyIndex;},getLength:function(){var p=this;return p.keys.length;},_setDefinitions:function(p){return p;}},{});e.Recordset=e.Base.create("recordset",e.Recordset,[],{getRecordByRow:function(q){var p=this;return p.getRecord(q.get(l));},getRecordIndex:function(q){var p=this;return e.Array.indexOf(p._items,q);},updateRecordDataByKey:function(q,r,t){var p=this;var s=q.get(f);if(s){s[r]=t;q.set(f,s);}p.update(q,p.getRecordIndex(q));}},{});e.Plugin.RecordsetSort.prototype._defSortFn=function(s){var p=this;var r=p.get("host");var q=r._items;e.Array.stableSort(q,function(u,t){return s.sorter.call(q,u,t,s.field,s.desc);});p.set("lastSortProperties",s);};e.Plugin.DataTableScroll=e.Base.create("dataTableScroll",e.Plugin.DataTableScroll,[],{_syncWidths:function(){try{e.Plugin.DataTableScroll.superclass._syncWidths.apply(this,arguments);}catch(p){}}},{NS:"scroll",NAME:"dataTableScroll"});},"@VERSION@",{requires:["aui-base","datatable","plugin","recordset-sort"]});AUI.add("aui-datatable-events",function(j){var R=j.Lang,s=R.isArray,F=R.isObject,e=R.isValue,b=j.Array.each,E=j.Object.keys,L=j.Object.values,x=j.Selector.test,l=j.ClassNameManager.getClassName,t=j.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),h=j.cached(function(S,A){return S+t(A.toLowerCase());}),M="boundingBox",O="cell",D="cellSelector",H="click",n="column",r="dblclick",c="events",w="header",p="host",d="inHead",Q="keydown",P="keyup",G="liner",y="mousedown",f="mouseenter",k="mouseleave",i="mouseup",C="recordset",I="row",u="table",N="tags",a="tagName",J="tbody",v="thead",B="tr",m="datatable",z="columnset",o=",",q=".",K=l(m,G);var g=j.Base.create("dataTableEvents",j.Plugin.Base,[],{_bubbling:false,_handler:null,_tagsFilter:null,initializer:function(T){var A=this;var S=A.get(N);A._tagsFilter=E(S).join(o);A._initEvents();},destructor:function(){var A=this;var S=A._handler;if(S){S.detach();}},updateEventPayload:function(V,S){var A=this;var U=A.get(p);var W=U._theadNode;var X=V.getData(d);var T=V.getData(G);var Y=V.getData(I);if(!e(X)){X=W.contains(V);V.setData(d,X);}if(!e(T)){T=V.one(q+K);V.setData(G,T);}if(!e(Y)){Y=V.ancestor(B);V.setData(I,Y);}return j.mix(S,{cell:V,column:U.get(z).getColumnByCell(V),inHead:X,liner:T,originalEvent:S,row:Y,record:U.get(C).getRecordByRow(Y)},true);},_filterBubble:function(X){var A=this;var W=A.get(p);var S=W._tableNode.getDOM();var T=[];while(X){var V=(X===S);if(x(X,A._tagsFilter,(V?null:S))){T.push(X);}if(V){break;}X=X.parentNode;}if(T.length){var U=W.getColNode(j.one(T[0]));if(U){T.splice(2,0,U.getDOM());}}return T;},_handleEvents:function(A){var W,U;var Z=this;var aa=Z.get(p);var ab=Z.get(N);var T=A.currentTarget;var S=Z._filterBubble(T.getDOM());var Y=Z.updateEventPayload(T,A);Z._bubbling=true;for(W=0,U=S.length;(W<U)&&Z._bubbling;W++){var V=j.one(S[W]);var X=ab[V.get(a).toLowerCase()];Y.node=V;Y.property=X;aa.fire(h(X,A.type),Y);}},_initEvents:function(){var A=this;var V=A.get(p);var S=A.get(N);var T=A.get(c);var U={};b(L(S),function(W){b(T,function(X){var Y=h(W,X);U[Y]={stoppedFn:j.bind(A._stopBubble,A)};});});V.publish(U);A._handler=V.get(M).delegate(T,j.bind(A._handleEvents,A),A.get(D));},_stopBubble:function(){var A=this;A._bubbling=false;}},{NS:"events",NAME:"dataTableEvents",ATTRS:{cellSelector:{value:"td,th",writeOnce:true},events:{validator:s,value:[H,r,Q,P,y,f,k,i]},tags:{validator:F,value:{col:n,table:u,thead:v,tbody:J,tr:I,th:w,td:O},writeOnce:true}}});j.namespace("Plugin").DataTableEvents=g;},"@VERSION@",{requires:["aui-datatable-base"]});AUI.add("aui-datatable-edit",function(aw){var ae=aw.Lang,bg=aw.Array,e=ae.isArray,aV=ae.isBoolean,aQ=ae.isFunction,J=ae.isObject,a0=ae.isString,aP=ae.String,aN=aw.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),a6=function(A){return(A instanceof aw.BaseCellEditor);},at=aw.WidgetStdMod,B=aw.getClassName,ag="add",a7="addOption",aO="baseCellEditor",s="boundingBox",S="calendar",ao="cancel",aS="cell",aA="celleditor",D="checkboxCellEditor",p="checked",aK="click",C="columnset",w="contentBox",aG="data",Q="datatable",M="dateCellEditor",an="dd",W="delete",ar="disk",aI="dotted",aR="dropDownCellEditor",N="edit",aa="editable",f="editor",G="editEvent",al="editOptions",I="element",aF="elementName",aT="field",c="grip",F="handle",v="hide",ay="hideOnSave",aj="icon",aJ="id",o="initEdit",bf="initToolbar",ax="initValidator",ac="input",d="inputFormatter",be="key",az="label",au="link",Y="mousedown",ab="multiple",m="name",aX="option",a2="options",u="optionsCellEditor",bb="outputFormatter",l="pencil",am="radioCellEditor",ak="records",k="recordset",bc="remove",a9="rendered",ai="return",n="row",aM="save",ah="saveOptions",aY="selected",aD="selectedAttrName",Z="showToolbar",a1="submit",T="textAreaCellEditor",y="textCellEditor",P="toolbar",z="unescapeValue",X="validator",a5="value",av="vertical",af="visible",a3="wrapper",bj=",",i=".",U="",h="#",a8="\n",bd=" ",t=/<br\s*\/?>/gi,E=/[\r\n]/g,b=B(aA,N),g=B(aA,N,ag,aX),bi=B(aA,N,an,F),aW=B(aA,N,W,aX),ba=B(aA,N,v,aX),aB=B(aA,N,ac,m),aL=B(aA,N,ac,a5),aq=B(aA,N,az),q=B(aA,N,au),aE=B(aA,N,aX,n),R=B(aA,N,aM,aX),V=B(aA,I),aZ=B(aA,az),L=B(aA,aX),x=B(aA,a3),H=B(Q,aa),j=B(aj),ad=B(aj,c,aI,av),aU="<br/>";
var a4=function(){};a4.NAME="dataTableCellEditorSupport";a4.ATTRS={editEvent:{setter:"_setEditEvent",validator:a0,value:aK}};aw.mix(a4.prototype,{initializer:function(){var A=this;A.after({render:A._afterRenderEditor});A.on(A.get(G),A._onCellEdit);A.after(A._afterUiSetRecordset,A,"_uiSetRecordset");},getCellEditor:function(bk,bm){var A=this;var bl=bm.get(f);var bn=bk.get(aG).editor;if(bl===false||bn===false){return null;}return bn||bl;},getRecordColumnValue:function(A,bk){return A.getValue(bk.get(aT));},syncEditableColumnsUI:function(){var A=this;var bl=A.get(C);var bk=A.get(k);aw.each(bl.idHash,function(bn){var bm=bn.get(f);if(a6(bm)){aw.all("[headers="+bn.get(aJ)+"]").addClass(H);}});aw.each(bk.get(ak),function(bm){var bn=bm.get(aG).editor;var bo=a6(bn);aw.all(h+bm.get("id")+">td").each(function(br,bp){var bq=bl.getColumn(bp);if(bn===false){br.removeClass(H);}else{if(bo||(bq.get(f)!==false)){br.addClass(H);}}});});},_afterUiSetRecordset:function(bk){var A=this;A.syncEditableColumnsUI();},_afterRenderEditor:function(bk){var A=this;if(!A.events){A.plug(aw.Plugin.DataTableEvents);}},_editCell:function(bo){var A=this;var bq=A.get(C);var bp=A.get(k);var bn=bo.column;var bk=bo.record;A.activeColumnIndex=bq.getColumnIndex(bn);A.activeRecordIndex=bp.getRecordIndex(bk);var bl=bo.alignNode||bo.cell;var bm=A.getCellEditor(bk,bn);if(a6(bm)){if(!bm.get(a9)){bm.on({visibleChange:aw.bind(A._onEditorVisibleChange,A),save:aw.bind(A._onEditorSave,A)});bm.render();}bm.set(a5,A.getRecordColumnValue(bk,bn));bm.show().move(bl.getXY());}},_onCellEdit:function(bk){var A=this;A._editCell(bk);},_onEditorVisibleChange:function(bp){var bk=this;var bn=bp.currentTarget;var bm=bk.selection;if(bm){var bl=bm.getActiveRecord();var bo=bm.getActiveColumn();var A=bk.getCellNode(bl,bo);var bq=bk.getRowNode(bl);if(bp.newVal){bn._syncFocus();}else{bm.select(A,bq);}}},_onEditorSave:function(bm){var A=this;var bl=bm.currentTarget;var bn=A.get(k);bl.set(a5,bm.newVal);var bk=A.selection;if(bk){bn.updateRecordDataByKey(bk.getActiveRecord(),bk.getActiveColumn().get(be),bm.newVal);}},_setEditEvent:function(A){return aS+aN(A);}});aw.DataTable.CellEditorSupport=a4;aw.DataTable.Base=aw.Base.create("dataTable",aw.DataTable.Base,[aw.DataTable.CellEditorSupport]);var r=aw.Component.create({NAME:aO,ATTRS:{editable:{value:false,validator:aV},elementName:{value:a5,validator:a0},footerContent:{value:U},hideOnSave:{value:true,validator:aV},inputFormatter:{value:function(A){if(a0(A)){A=A.replace(E,aU);}return A;}},outputFormatter:{value:function(bk){var A=this;if(a0(bk)){if(A.get(z)){bk=aP.unescapeEntities(bk);}bk=bk.replace(t,a8);}return bk;}},showToolbar:{value:true,validator:aV},strings:{value:{edit:"Edit",save:"Save",cancel:"Cancel"}},tabIndex:{value:1},toolbar:{setter:"_setToolbar",validator:J,value:null},unescapeValue:{value:true,validator:aV},validator:{setter:"_setValidator",validator:J,value:null},value:{value:U},visible:{value:false}},EXTENDS:aw.Overlay,UI_ATTRS:[aa,Z,a5],prototype:{CONTENT_TEMPLATE:"<form></form>",ELEMENT_TEMPLATE:null,elements:null,validator:null,_hDocMouseDownEv:null,initializer:function(bk){var A=this;A._initEvents();},destructor:function(){var bk=this;var A=bk._hDocMouseDownEv;var bm=bk.toolbar;var bl=bk.validator;if(A){A.detach();}if(bm){bm.destroy();}if(bl){bl.destroy();}},bindUI:function(){var A=this;A.get(s).on(be,aw.bind(A._onEscKey,A),"down:27");},formatValue:function(bk,bl){var A=this;if(aQ(bk)){bl=bk.call(A,bl);}return bl;},getValue:function(){var A=this;return A.formatValue(A.get(d),A.getElementsValue());},_initEvents:function(){var A=this;A.publish({cancel:{defaultFn:A._defCancelFn},initEdit:{defaultFn:A._defInitEditFn,fireOnce:true},initValidator:{defaultFn:A._defInitValidatorFn,fireOnce:true},initToolbar:{defaultFn:A._defInitToolbarFn,fireOnce:true},save:{defaultFn:A._defSaveFn}});A.after({render:A._afterRender,visibleChange:aw.debounce(A._debounceVisibleChange,350,A)});A.on({"form-validator:submit":aw.bind(A._onSubmit,A)});},_afterRender:function(){var A=this;A._handleInitValidatorEvent();A._handleInitToolbarEvent();},_defCancelFn:function(bk){var A=this;A.hide();},_defInitValidatorFn:function(bk){var A=this;A.validator=new aw.FormValidator(A.get(X));},_defInitToolbarFn:function(bl){var A=this;var bk=A.get(aa);A.toolbar=new aw.Toolbar(A.get(P)).render(A.footerNode);if(bk){A._uiSetEditable(bk);}},_defSaveFn:function(bk){var A=this;if(A.get(ay)){A.hide();}},_debounceVisibleChange:function(bl){var bk=this;var A=bk._hDocMouseDownEv;if(bl.newVal){if(!A){bk._hDocMouseDownEv=aw.getDoc().on(Y,aw.bind(bk._onDocMouseDownExt,bk));}}else{if(A){A.detach();bk._hDocMouseDownEv=null;}}},_handleCancelEvent:function(){var A=this;A.fire(ao);},_handleEditEvent:function(){var A=this;A.fire(N);},_handleInitEditEvent:function(){var A=this;if(A.get(a9)){this.fire(o);}},_handleInitValidatorEvent:function(){var A=this;if(A.get(a9)){this.fire(ax);}},_handleInitToolbarEvent:function(){var A=this;if(A.get(a9)&&A.get(Z)){this.fire(bf);}},_handleSaveEvent:function(){var A=this;if(!A.validator.hasErrors()){A.fire(aM,{newVal:A.getValue(),prevVal:A.get(a5)});}},_onDocMouseDownExt:function(bl){var A=this;var bk=A.get(s);if(!bk.contains(bl.target)){A.set(af,false);}},_onEscKey:function(bk){var A=this;A.hide();},_onSubmit:function(bl){var A=this;var bk=bl.validator;A._handleSaveEvent();if(bk){bk.formEvent.halt();}},_setToolbar:function(bl){var bk=this;var A=bk.getStrings();return aw.merge({activeState:false,children:[{label:A[aM],icon:ar,type:a1},{handler:aw.bind(bk._handleCancelEvent,bk),label:A[ao]}]},bl);},_setValidator:function(bk){var A=this;return aw.merge({boundingBox:A.get(w),bubbleTargets:A},bk);},_uiSetShowToolbar:function(bl){var A=this;var bk=A.footerNode;if(bl){bk.show();}else{bk.hide();}A._handleInitToolbarEvent();},getElementsValue:function(){var A=this;var bk=A.elements;if(bk){return bk.get(a5);}return U;},renderUI:function(){var A=this;if(A.ELEMENT_TEMPLATE){A.elements=aw.Node.create(A.ELEMENT_TEMPLATE);A._syncElementsName();
A.setStdModContent(at.BODY,A.elements);}},_defInitEditFn:function(A){},_syncElementsFocus:function(){var A=this;A.elements.selectText();},_syncElementsName:function(){var A=this;A.elements.setAttribute(m,A.get(aF));},_syncFocus:function(){var A=this;aw.later(0,A,A._syncElementsFocus);},_uiSetEditable:function(bl){var A=this;var bk=A.toolbar;if(A.get(a9)&&bk){if(bl){bk.add({handler:aw.bind(A._handleEditEvent,A),icon:l,label:A.getString(N)},1);}else{bk.remove(1);}}},_uiSetValue:function(bl){var A=this;var bk=A.elements;if(bk){bk.val(A.formatValue(A.get(bb),bl));}}}});aw.BaseCellEditor=r;var bh=aw.Component.create({NAME:u,ATTRS:{inputFormatter:{value:null},options:{setter:"_setOptions",value:{},validator:J},outputFormatter:{value:null},selectedAttrName:{value:aY,validator:a0},strings:{value:{add:"Add",cancel:"Cancel",addOption:"Add option",edit:"Edit options",editOptions:"Edit option(s)",name:"Name",remove:"Remove",save:"Save",saveOptions:"Save options",stopEditing:"Stop editing",value:"Value"}}},EXTENDS:aw.BaseCellEditor,UI_ATTRS:[a2],prototype:{EDIT_TEMPLATE:'<div class="'+b+'"></div>',EDIT_OPTION_ROW_TEMPLATE:'<div class="'+aE+'">'+'<span class="'+[bi,j,ad].join(bd)+'"></span>'+'<input class="'+aB+'" size="7" placeholder="{titleName}" title="{titleName}" type="text" value="{valueName}" /> '+'<input class="'+aL+'" size="7" placeholder="{titleValue}" title="{titleValue}" type="text" value="{valueValue}" /> '+'<a class="'+[q,aW].join(bd)+'" href="javascript:void(0);">{remove}</a> '+"</div>",EDIT_ADD_LINK_TEMPLATE:'<a class="'+[q,g].join(bd)+'" href="javascript:void(0);">{addOption}</a> ',EDIT_LABEL_TEMPLATE:'<div class="'+aq+'">{editOptions}</div>',EDIT_SAVE_LINK_TEMPLATE:'<a class="'+[q,R].join(bd)+'" href="javascript:void(0);">{saveOptions}</a> ',editContainer:null,editSortable:null,options:null,initializer:function(){var A=this;A.on(N,A._onEditEvent);A.on(aM,A._onSave);A.after(bf,A._afterInitToolbar);},addNewOption:function(bl,bn){var A=this;var bm=A.editContainer.all(i+aE).last();var bk=aw.Node.create(A._createEditOption(bl||U,bn||U));bm.placeAfter(bk);bk.one(ac).focus();},removeOption:function(A){A.remove();},saveOptions:function(){var A=this;var bn=A.editContainer;if(bn){var bm=bn.all(i+aB);var bk=bn.all(i+aL);var bl={};bm.each(function(bq,bp){var bo=bq.val();var br=bk.item(bp).val();if(bo&&br){bl[br]=bo;}});A.set(a2,bl);A._uiSetValue(A.get(a5));A.toggleEdit();}},toggleEdit:function(){var A=this;A.editContainer.toggle();},_createOptions:function(bl){var bp=this;var A=bp.elements;var bn=[];var bk=[];var bm=bp.OPTION_TEMPLATE;var bq=bp.OPTION_WRAPPER;aw.each(bl,function(bu,bt){var bs={id:aw.guid(),label:bu,name:bt,value:bt};if(bm){bn.push(ae.sub(bm,bs));}if(bq){bk.push(ae.sub(bq,bs));}});var br=aw.NodeList.create(bn.join(U));var bo=aw.NodeList.create(bk.join(U));if(bo.size()){bo.each(function(bt,bs){bt.prepend(br.item(bs));});A.setContent(bo);}else{A.setContent(br);}bp.options=br;},_createEditBuffer:function(){var bk=this;var A=bk.getStrings();var bl=[];bl.push(ae.sub(bk.EDIT_LABEL_TEMPLATE,{editOptions:A[al]}));aw.each(bk.get(a2),function(bm,bn){bl.push(bk._createEditOption(bm,bn));});bl.push(ae.sub(bk.EDIT_ADD_LINK_TEMPLATE,{addOption:A[a7]}));bl.push(ae.sub(bk.EDIT_SAVE_LINK_TEMPLATE,{saveOptions:A[ah]}));return bl.join(U);},_createEditOption:function(bl,bm){var bk=this;var A=bk.getStrings();return ae.sub(bk.EDIT_OPTION_ROW_TEMPLATE,{remove:A[bc],titleName:A[m],titleValue:A[a5],valueName:bl,valueValue:bm});},_defInitEditFn:function(bk){var A=this;var bl=aw.Node.create(A.EDIT_TEMPLATE);bl.delegate("click",aw.bind(A._onEditLinkClickEvent,A),i+q);bl.delegate("keydown",aw.bind(A._onEditKeyEvent,A),ac);A.editContainer=bl;A.setStdModContent(at.BODY,bl.hide(),at.AFTER);A.editSortable=new aw.Sortable({container:bl,handles:[i+bi],nodes:i+aE,opacity:".3"}).delegate.dd.plug(aw.Plugin.DDConstrained,{constrain:bl,stickY:true});A._syncEditOptionsUI();},_getSelectedOptions:function(){var A=this;var bk=[];A.options.each(function(bl){if(bl.get(A.get(aD))){bk.push(bl);}});return aw.all(bk);},_onEditEvent:function(bk){var A=this;A._handleInitEditEvent();A.toggleEdit();A._syncEditOptionsUI();},_onEditLinkClickEvent:function(bk){var A=this;var bl=bk.currentTarget;if(bl.test(i+g)){A.addNewOption();}else{if(bl.test(i+R)){A.saveOptions();}else{if(bl.test(i+ba)){A.toggleEdit();}else{if(bl.test(i+aW)){A.removeOption(bl.ancestor(i+aE));}}}}bk.halt();},_onEditKeyEvent:function(bk){var A=this;var bl=bk.currentTarget;if(bk.isKey(ai)){var bm=bl.next(ac);if(bm){bm.selectText();}else{A.addNewOption();}bk.halt();}},_onSave:function(bk){var A=this;A.saveOptions();},_setOptions:function(bk){var A={};if(e(bk)){bg.each(bk,function(bl){A[bl]=bl;});}else{if(J(bk)){A=bk;}}return A;},_syncEditOptionsUI:function(){var A=this;A.editContainer.setContent(A._createEditBuffer());},_uiSetOptions:function(bk){var A=this;A._createOptions(bk);A._syncElementsName();},_uiSetValue:function(bl){var A=this;var bk=A.options;if(bk&&bk.size()){bk.set(A.get(aD),false);bg.each(bg(bl),function(bm){bk.filter('[value="'+bm+'"]').set(A.get(aD),true);});}return bl;}}});aw.BaseOptionsCellEditor=bh;var aC=aw.Component.create({NAME:y,EXTENDS:aw.BaseCellEditor,prototype:{ELEMENT_TEMPLATE:'<input autocomplete="off" class="'+V+'" type="text" />'}});aw.TextCellEditor=aC;var aH=aw.Component.create({NAME:T,EXTENDS:aw.BaseCellEditor,prototype:{ELEMENT_TEMPLATE:'<textarea class="'+V+'"></textarea>'}});aw.TextAreaCellEditor=aH;var O=aw.Component.create({NAME:aR,ATTRS:{multiple:{value:false,validator:aV}},EXTENDS:aw.BaseOptionsCellEditor,UI_ATTRS:[ab],prototype:{ELEMENT_TEMPLATE:'<select class="'+V+'"></select>',OPTION_TEMPLATE:'<option value="{value}">{label}</option>',getElementsValue:function(){var A=this;if(A.get(ab)){return A._getSelectedOptions().get(a5);}return A.elements.get(a5);},_syncElementsFocus:function(){var A=this;A.elements.focus();},_uiSetMultiple:function(bl){var A=this;var bk=A.elements;if(bl){bk.setAttribute(ab,ab);}else{bk.removeAttribute(ab);
}}}});aw.DropDownCellEditor=O;var ap=aw.Component.create({NAME:D,ATTRS:{selectedAttrName:{value:p}},EXTENDS:aw.BaseOptionsCellEditor,prototype:{ELEMENT_TEMPLATE:'<div class="'+V+'"></div>',OPTION_TEMPLATE:'<input class="'+L+'" id="{id}" name="{name}" type="checkbox" value="{value}"/>',OPTION_WRAPPER:'<label class="'+x+'" for="{id}"><span class="'+aZ+'">{label}</span></label>',getElementsValue:function(){var A=this;return A._getSelectedOptions().get(a5);},_syncElementsFocus:function(){var A=this;var bk=A.options;if(bk&&bk.size()){bk.item(0).focus();}}}});aw.CheckboxCellEditor=ap;var K=aw.Component.create({NAME:am,EXTENDS:aw.CheckboxCellEditor,prototype:{OPTION_TEMPLATE:'<input class="aui-field-input-choice" id="{id}" name="{name}" type="radio" value="{value}"/>',getElementsValue:function(){var A=this;return A._getSelectedOptions().get(a5)[0];},_syncElementsName:function(){var A=this;var bk=A.options;if(bk){bk.setAttribute(m,A.get(aF));}}}});aw.RadioCellEditor=K;var a=aw.Component.create({NAME:M,EXTENDS:aw.BaseCellEditor,ATTRS:{bodyContent:{value:U},calendar:{setter:"_setCalendar",validator:J,value:null}},prototype:{ELEMENT_TEMPLATE:'<input class="'+V+'" type="hidden" />',initializer:function(){var A=this;A.on("calendar:select",aw.bind(A._onDateSelect,A));},getElementsValue:function(){var A=this;return A.calendar.getFormattedSelectedDates().join(bj);},_afterRender:function(){var A=this;aw.DateCellEditor.superclass._afterRender.apply(A,arguments);A.calendar=new aw.Calendar(A.get(S)).render(A.bodyNode);},_onDateSelect:function(bk){var A=this;A.elements.val(bk.date.formatted.join(bj));},_setCalendar:function(bk){var A=this;return aw.merge({bubbleTargets:A},bk);},_uiSetValue:function(bl){var A=this;var bk=A.calendar;if(bk){if(bl&&a0(bl)){bl=bl.split(bj);}A.calendar.set("dates",bl);}}}});aw.DateCellEditor=a;},"@VERSION@",{requires:["aui-calendar","aui-datatable-events","aui-toolbar","aui-form-validator","overlay","sortable"],skinnable:true});AUI.add("aui-datatable-selection",function(B){var j=B.Lang,s=j.isBoolean,v=j.isString,G=B.getClassName,i=B.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),o="cell",m="columnset",g="columnsetChange",r="datatable",E="down",J="esc",u="focused",H="host",p="id",d="keydown",x="left",q="mousedown",D="mouseEvent",w="multiple",I="recordset",f="recordsetChange",l="return",t="right",n="row",c="select",k="selected",y="selectRow",e="tab",z="tabindex",F="tr",h="up",a=G(r,o,k),C=G(r,n,k);var b=B.Base.create("dataTableSelection",B.Plugin.Base,[],{activeColumnIndex:-1,activeRecordIndex:-1,handlerKeyDown:null,selectedCellHash:null,selectedColumnHash:null,selectedRowHash:null,initializer:function(){var A=this;A.selectedCellHash={};A.selectedColumnHash={};A.selectedRowHash={};A.publish({select:{defaultFn:A._defSelectFn}});A.afterHostEvent(A.get(D),A._afterMouseEvent);A.afterHostEvent(g,A._afterHostColumnsetChange);A.afterHostEvent(f,A._afterHostRecordsetChange);A.handlerKeyDown=B.getDoc().on(d,B.bind(A._afterKeyEvent,A));},destroy:function(){var A=this;var K=A.handlerKeyDown;if(K){K.detach();}},getActiveColumn:function(){var A=this;var K=A.get(H);return K.get(m).getColumn(A.activeColumnIndex);},getActiveRecord:function(){var A=this;var K=A.get(H);return K.get(I).getRecord(A.activeRecordIndex);},isCellSelected:function(K){var A=this;return A.selectedCellHash[K.get(p)];},isColumnSelected:function(A){},isRowSelected:function(K){var A=this;return A.selectedRowHash[K.get(p)];},select:function(K,Q){var A=this;var N=A.get(H);var P=N.get(m);var O=N.get(I);var M=P.getColumnByCell(K);var L=O.getRecordByRow(Q||K.ancestor(F));A.activeColumnIndex=P.getColumnIndex(M);A.activeRecordIndex=O.getRecordIndex(L);if(K){A.selectCell(K);}if(A.get(y)&&Q){A.selectRow(Q);}},selectCell:function(K){var A=this;if(!A.get(w)){A.unselectAllCells();}A.selectedCellHash[K.get(p)]=K;K.setAttribute(z,0).focus();K.addClass(a);},selectColumn:function(A){},selectRow:function(K){var A=this;if(!A.get(w)){A.unselectAllRows();}A.selectedRowHash[K.get(p)]=K;K.addClass(C);},toggleCell:function(K,L){var A=this;if(L||!A.isCellSelected(K)){A.selectCell(K);}else{A.unselectCell(K);}},toggleColumn:function(A,K){},toggleRow:function(L,K){var A=this;if(K||!A.isRowSelected(L)){A.selectRow(L);}else{A.unselectRow(L);}},unselectCell:function(K){var A=this;delete A.selectedCellHash[K.get(p)];K.removeAttribute(z);K.removeClass(a);},unselectColumn:function(A){},unselectRow:function(K){var A=this;delete A.selectedRowHash[K.get(p)];K.removeClass(C);},unselectAllCells:function(){var A=this;B.each(A.selectedCellHash,B.bind(A.unselectCell,A));},unselectAllColumns:function(){},unselectAllRows:function(){var A=this;B.each(A.selectedRowHash,B.bind(A.unselectRow,A));},_afterHostColumnsetChange:function(K){var A=this;A._cleanUp();},_afterHostRecordsetChange:function(K){var A=this;A._cleanUp();},_afterMouseEvent:function(K){var A=this;A._handleSelectEvent(K);},_afterKeyEvent:function(N){var A=this;var M=A.get(H);var L=A.getActiveColumn();var K=A.getActiveRecord();if(!M.get(u)||!L||!K){return;}if(M.events){M.events.updateEventPayload(M.getCellNode(K,L),N);}if(N.isNavKey()){if(N.isKey(J)){A._onEscKey(N);}else{if(N.isKey(l)){A._onReturnKey(N);}else{A._navigate(N);}}N.halt();}},_cleanUp:function(){var A=this;A.selectedCellHash={};A.selectedColumnHash={};A.selectedRowHash={};},_defSelectFn:function(K){var A=this;A.select(K.cell,K.row);},_navigate:function(K){var A=this;A._updateNavKeyInfo(K);A._handleSelectEvent(K);},_onEscKey:function(M){var A=this;var L=A.get(H);var K=L.getCellEditor(M.record,M.column);if(K){K.hide();}},_onReturnKey:function(L){var A=this;var K=A.get(H);K._editCell(L);},_handleSelectEvent:function(K){var A=this;A.fire(c,{cell:K.cell,column:K.column,inHead:K.inHead,liner:K.liner,originalEvent:K.originalEvent,row:K.row,record:K.record});},_updateNavKeyInfo:function(A){var T=this;var U=T.get(H);var K=A.originalEvent;var M=U.get(m);var Q=A.column.keyIndex;var S=U.get(I);var N=S.getRecordIndex(A.record);var L=K.ctrlKey||K.metaKey;
var R=K.shiftKey;if(K.isKey(x)||(R&&K.isKey(e))){if(L){Q=0;}else{Q--;}}else{if(K.isKey(t)||(!R&&K.isKey(e))){if(L){Q=M.getLength()-1;}else{Q++;}}else{if(K.isKey(E)){if(L){N=S.getLength()-1;}else{N++;}}else{if(K.isKey(h)){if(L){N=0;}else{N--;}}}}}Q=Math.max(Math.min(Q,M.getLength()-1),0);N=Math.max(Math.min(N,S.getLength()-1),0);if(U.events){var O=M.getColumn(Q);var P=S.getRecord(N);U.events.updateEventPayload(U.getCellNode(P,O),A);}},_setMouseEvent:function(A){return o+i(A);}},{NS:"selection",NAME:"dataTableSelection",ATTRS:{selectRow:{value:false,validator:s},multiple:{value:false,validator:s},mouseEvent:{setter:"_setMouseEvent",value:q,validator:v}}});B.namespace("Plugin").DataTableSelection=b;},"@VERSION@",{requires:["aui-datatable-base"],skinnable:true});AUI.add("aui-datatable",function(a){},"@VERSION@",{use:["aui-datatable-base","aui-datatable-events","aui-datatable-edit","aui-datatable-selection"],skinnable:false});