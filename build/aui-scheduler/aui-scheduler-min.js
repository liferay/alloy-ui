AUI.add("aui-scheduler-base",function(ac){var P=ac.Lang,aw=P.isString,a=P.isArray,d=P.isDate,I=P.isNumber,B=P.isObject,H=function(A){return(A instanceof ac.Scheduler);},s=function(A){return(A instanceof ac.SchedulerView);},aa=function(A){return(A instanceof ac.SchedulerEvent);},t=function(A){return(ac.SchedulerCalendar&&(A instanceof ac.SchedulerCalendar));},h=ac.DataType.DateMath,W=ac.WidgetStdMod,U=".",o="",p=" ",r="scheduler-base",ai="data-view-name",F="activeView",av="clearfix",E="controls",ak="controlsNode",an="current",ab="currentDate",Y="currentDateNode",aj="date",ag="endDate",ah="eventClass",N="eventRecorder",ax="events",aC="hd",v="header",au="headerNode",m="helper",S="icon",j="iconNextNode",aq="iconPrevNode",aA="locale",l="name",Q="nav",M="navNode",ap="navigationDateFormat",n="next",c="nextDate",at="prev",al="prevDate",aB="rendered",L="scheduler",ay="startDate",D="strings",e="today",ad="todayNode",u="triggerNode",y="view",O="viewStack",aD="views",X="viewsNode",z=ac.getClassName,ae=z(m,av),i=z(S),ao=z(r,E),T=z(r,an,aj),f=z(r,aC),V=z(r,S,n),C=z(r,S,at),az=z(r,Q),x=z(r,e),Z=z(r,y),g=z(r,y,o),q=z(r,aD),am='<div class="'+ao+'"></div>',w='<div class="'+T+'"></div>',b='<div class="'+f+'"></div>',aE='<a href="#" class="'+[i,V].join(p)+'">Next</a>',af='<a href="#" class="'+[i,C].join(p)+'">Prev</a>',k='<div class="'+az+'"></div>',R='<a href="#" class="'+x+'">{today}</a>',ar='<a href="#" class="'+[Z,g].join(p)+'{name}" data-view-name="{name}">{label}</a>',J='<div class="'+q+'"></div>';var K=function(){};K.ATTRS={eventClass:{valueFn:function(){return ac.SchedulerEvent;}},events:{value:[],setter:"_setEvents",validator:a}};ac.mix(K.prototype,{addEvent:function(aF){var A=this;var aG=A.get(ax);if(ac.Array.indexOf(aG,aF)>-1){ac.Array.removeItem(aG,aF);}aG.push(aF);A.set(ax,aG);},addEvents:function(aF){var A=this;ac.Array.each(A._normalizeEvents(aF),ac.bind(A.addEvent,A));},eachEvent:function(aG){var A=this;var aF=A.get(ax);ac.Array.each(aF,aG,A);},removeEvent:function(aF){var A=this;var aG=A.get(ax);if(aG.length){ac.Array.removeItem(aG,aF);A.set(ax,aG);}},removeEvents:function(aF){var A=this;ac.Array.each(A._normalizeEvents(aF),ac.bind(A.removeEvent,A));},_normalizeEvents:function(aG){var A=this;var aF=[];aG=ac.Array(aG);ac.Array.each(aG,function(aH){if(aa(aH)){aF.push(aH);}else{if(t(aH)){if(H(A)){aH.set(L,A);}aF=aF.concat(A._normalizeEvents(aH.get(ax)));}else{aH=new (A.get(ah))(aH);aF.push(aH);}}if(H(A)){aH.set(L,A);aH.set(ah,A.get(ah));}});return aF;},_setEvents:function(aF){var A=this;return A._normalizeEvents(aF);}});ac.SchedulerEventSupport=K;var G=ac.Component.create({NAME:r,ATTRS:{activeView:{validator:s},eventRecorder:{setter:"_setEventRecorder"},strings:{value:{day:"Day",month:"Month",today:"Today",week:"Week",year:"Year"}},navigationDateFormat:{getter:function(aG){var A=this;var aF=A.get(F);if(aF){return aF.get(ap);}return aG;},value:"%A - %d %b %Y",validator:aw},views:{setter:"_setViews",value:[]},currentDate:{valueFn:function(){return new Date();},validator:d},firstDayOfWeek:{value:0,validator:I},controlsNode:{valueFn:function(){return ac.Node.create(am);}},currentDateNode:{valueFn:function(){return ac.Node.create(w);}},headerNode:{valueFn:function(){return ac.Node.create(b);}},iconNextNode:{valueFn:function(){return ac.Node.create(aE);}},iconPrevNode:{valueFn:function(){return ac.Node.create(af);}},navNode:{valueFn:function(){return ac.Node.create(k);}},todayNode:{valueFn:function(){return ac.Node.create(this._processTemplate(R));}},viewsNode:{valueFn:function(){return ac.Node.create(J);}}},HTML_PARSER:{controlsNode:U+ao,currentDateNode:U+T,headerNode:U+f,iconNextNode:U+V,iconPrevNode:U+C,navNode:U+az,todayNode:U+x,viewsNode:U+q},UI_ATTRS:[ab],AUGMENTS:[ac.SchedulerEventSupport,ac.WidgetStdMod],prototype:{viewStack:null,initializer:function(){var A=this;A[O]={};A[ak]=A.get(ak);A[Y]=A.get(Y);A[v]=A.get(au);A[j]=A.get(j);A[aq]=A.get(aq);A[M]=A.get(M);A[ad]=A.get(ad);A[X]=A.get(X);A.after({activeViewChange:A._afterActiveViewChange,render:A._afterRender});},bindUI:function(){var A=this;A._bindDelegate();},syncUI:function(){var A=this;A.syncStdContent();},flushEvents:function(){var A=this;ac.Array.each(A.get(ax),function(aF){aF.eachRepeatedEvent(function(aG){delete aG._filtered;});delete aF._filtered;});},getEventsByDay:function(aF,aG){var A=this;aF=h.safeClearTime(aF);return A._getEvents(aF,function(aH){return h.compare(aH.getClearStartDate(),aF)||(aG&&h.compare(aH.getClearEndDate(),aF));});},getIntersectEvents:function(aF){var A=this;aF=h.safeClearTime(aF);return A._getEvents(aF,function(aH){var aG=aH.getClearStartDate();var aI=aH.getClearEndDate();return(h.compare(aF,aG)||h.compare(aF,aI)||h.between(aF,aG,aI));});},sortEventsByDateAsc:function(aF){var A=this;aF.sort(function(aJ,aH){var aI=aJ.get(ag);var aG=aH.get(ag);var aL=aJ.get(ay);var aK=aH.get(ay);if(h.after(aL,aK)||(h.compare(aL,aK)&&h.before(aI,aG))){return 1;}else{return -1;}});},getViewByName:function(aF){var A=this;return A[O][aF];},getStrings:function(){var A=this;return A.get(D);},getString:function(aF){var A=this;return A.getStrings()[aF];},renderView:function(aF){var A=this;if(aF){aF.show();if(!aF.get(aB)){if(!A.bodyNode){A.setStdModContent(W.BODY,o);}aF.render(A.bodyNode);}}},plotViewEvents:function(aF){var A=this;aF.plotEvents(A.get(ax));},syncEventsUI:function(){var A=this;A.plotViewEvents(A.get(F));},_afterActiveViewChange:function(aH){var aF=this;if(aF.get(aB)){var aG=aH.newVal;var A=aH.prevVal;if(A){A.hide();}aF.renderView(aG);var aI=aF.get(N);if(aI){aI.hideOverlay();}}},_afterRender:function(aF){var A=this;A.renderView(A.get(F));},_bindDelegate:function(){var A=this;A[X].delegate("click",A._onClickViewTrigger,U+Z,A);A[ak].delegate("click",A._onClickPrevIcon,U+C,A);A[ak].delegate("click",A._onClickNextIcon,U+V,A);A[ak].delegate("click",A._onClickToday,U+x,A);},_createViewTriggerNode:function(aF){var A=this;if(!aF.get(u)){var aG=aF.get(l);aF.set(u,ac.Node.create(P.sub(ar,{name:aG,label:(A.getString(aG)||aG)})));}return aF.get(u);
},_getEvents:function(aF,aI){var A=this;var aH=A.get(ax);var aG=[];ac.Array.each(aH,function(aJ){if(aI.apply(A,[aJ])){aG.push(aJ);}else{if(aJ.isRepeatableDate(aF)){var aK=aJ.repeatByDate(aF);aG.push(aK);}}});A.sortEventsByDateAsc(aG);return aG;},_onClickToday:function(aF){var A=this;A.set(ab,A.get(F).getToday());aF.preventDefault();},_onClickNextIcon:function(aF){var A=this;A.set(ab,A.get(F).get(c));aF.preventDefault();},_onClickPrevIcon:function(aF){var A=this;A.set(ab,A.get(F).get(al));aF.preventDefault();},_onClickViewTrigger:function(aF){var A=this;var aG=aF.currentTarget.attr(ai);A.set(F,A.getViewByName(aG));aF.preventDefault();},_processTemplate:function(aF){var A=this;return P.sub(aF,A.getStrings());},_setEventRecorder:function(aF){var A=this;if(aF){aF.set(L,A);aF.set(ah,A.get(ah));}},_setViews:function(aG){var A=this;var aF=[];ac.Array.each(aG,function(aH){if(s(aH)&&!aH.get(aB)){aH.set(L,A);aH.set(ah,A.get(ah));aF.push(aH);A[O][aH.get(l)]=aH;}});if(!A.get(F)){A.set(F,aG[0]);}return aF;},syncStdContent:function(){var A=this;var aF=A.get(aD);A[M].append(A[aq]);A[M].append(A[j]);A[ak].append(A[ad]);A[ak].append(A[M]);A[ak].append(A[Y]);ac.Array.each(aF,function(aG){A[X].append(A._createViewTriggerNode(aG));});A[v].append(A[ak]);A[v].append(A[X]);A[v].addClass(ae);A.setStdModContent(W.HEADER,A[v].getDOM());},_uiSetCurrentDate:function(aH){var A=this;var aG=ac.DataType.Date.format(aH,{format:A.get(ap),locale:A.get(aA)});A[Y].html(aG);if(A.get(aB)){var aF=A.get(F);if(aF){aF._uiSetCurrentDate(aH);}A.syncEventsUI();}}}});ac.Scheduler=G;},"@VERSION@",{skinnable:true,requires:["aui-scheduler-view","datasource"]});AUI.add("aui-scheduler-view",function(c0){var dg=c0.Lang,bm=dg.isBoolean,D=dg.isFunction,aV=dg.isNumber,dx=dg.isObject,cM=dg.isString,cx=function(A){return parseFloat(A)||0;},cA=function(dC,A){return Math.round(dC/A)*A;},aD=c0.DataType.DateMath,cV=c0.WidgetStdMod,a3=aD.WEEK_LENGTH,cD="scheduler-view",aU="scheduler-view-day",dn="scheduler-view-month",cs="scheduler-view-table",c6="scheduler-view-week",bB="activeColumn",cw="activeView",T="allDay",aC="body",bb="boundingBox",dA="cancel",bd="close",ar="col",aK="colDaysNode",c4="colHeaderDaysNode",N="colblank",C="coldata",aX="colday",b="colgrid",ad="colspan",p="coltime",bZ="columnData",bk="columnDayHeader",aZ="columnShims",a8="columnTableGrid",bK="columnTime",a7="container",a4="content",bA="creationEndDate",ag="creationStartDate",bJ="currentDate",ce="data",dd="day",Z="days",ax="dd",aM="delegate",G="delegateConfig",cv="disabled",bh="displayDaysInterval",cQ="displayRows",ae="div",bW="division",dr="dotted",aj="down",c8="dragNode",z="dragging",K="draggingEvent",cL="duration",aP="endDate",bu="event",dq="eventClass",cu="eventPlaceholder",dz="eventRecorder",u="eventWidth",cR="events",cp="eventsOverlay",ai="eventsOverlayNode",cU="filterFn",aW="first",c7="firstDayOfWeek",ci="fixedHeight",bF="grid",cb="gridContainer",bv="grip",dy="hd",cX="header",bH="headerDateFormat",dv="headerTableNode",bq="headerView",bU="headerViewConfig",a1="headerViewLabelNode",cI="height",bx="horizontal",ba="host",aS="hourHeight",w="icon",w="icon",av="isoTime",ak="label",bi="lasso",bc="left",aL="locale",n="marginRight",am="marker",bw="markercell",bo="markercellsNode",O="markers",cl="markersNode",co="month",bD="monthContainerNode",c9="monthRowContainer",f="monthRows",b7="more",H="mousedown",R="mousemove",bg="mouseup",a5="next",dB="node",au="nomonth",aE="noscroll",cW="offsetHeight",cY="offsetWidth",bC="overlay",c1="pad",aY="paddingNode",dj="parentEvent",X="parentNode",b5="proxy",bL="proxyNode",at="px",an="region",be="rendered",cS="repeated",cG="resizer",cN="resizerNode",cz="resizing",bp="right",b3="row",b2="rowsContainerNode",cC="save",t="scheduler",aR="scheduler-event",af="scrollable",Y="shim",P="showMore",c5="startDate",ac="startXY",cO="strings",bf="table",F="tableGridNode",cc="tableNode",cq="tableRowContainer",dm="tableRows",ca="tbody",h="td",bY="time",aq="timesNode",j="title",a="tl",aw="today",b1="top",dw="tr",b9="view",aJ="visible",di="week",cg="width",x="data-colnumber",l="a",bV=",",cy="-",cF=".",ct="",ch="%",ab=" ",I=c0.getClassName,bX=I(cD,aE),al=I(cD,af);var bn=c0.Component.create({NAME:cD,AUGMENTS:[c0.WidgetStdMod],ATTRS:{bodyContent:{value:ct},eventClass:{valueFn:function(){return c0.SchedulerEvent;}},filterFn:{validator:D,value:function(A){return true;}},height:{value:600},isoTime:{value:false,validator:bm},name:{value:ct,validator:cM},navigationDateFormat:{value:"%A - %d %B, %Y",validator:cM},nextDate:{getter:"getNextDate",readOnly:true},prevDate:{getter:"getPrevDate",readOnly:true},scheduler:{lazyAdd:false,setter:"_setScheduler"},scrollable:{value:true,validator:bm},triggerNode:{setter:c0.one},visible:{value:false}},BIND_UI_ATTRS:[af],prototype:{initializer:function(){var A=this;A.after("render",A._afterRender);},syncUI:function(){var A=this;A.syncStdContent();},adjustCurrentDate:function(){var A=this;var dD=A.get(t);var dC=dD.get(bJ);dD.set(bJ,dC);},flushViewCache:function(){},getNextDate:function(){},getPrevDate:function(){},getToday:function(){return aD.clearTime(new Date());},limitDate:function(dC,dD){var A=this;if(aD.after(dC,dD)){dC=aD.clone(dD);}return dC;},plotEvents:function(){},syncStdContent:function(){},syncEventUI:function(A){},_uiSetCurrentDate:function(A){},_afterRender:function(dC){var A=this;A.adjustCurrentDate();A._uiSetScrollable(A.get(af));},_setScheduler:function(dD){var A=this;var dC=A.get(t);if(dC){A.removeTarget(dC);}if(dD){A.addTarget(dD);dD.after("eventsChange",c0.bind(A.flushViewCache,A));}return dD;},_uiSetScrollable:function(dD){var A=this;var dC=A.bodyNode;if(dC){dC.toggleClass(al,dD);dC.toggleClass(bX,!dD);}},_uiSetVisible:function(dC){var A=this;bn.superclass._uiSetVisible.apply(this,arguments);if(dC&&A.get(be)){A.adjustCurrentDate();}}}});c0.SchedulerView=bn;var cr=dg.sub;var m=c0.cached(function(){var dE=c0.config.doc,dC=dE.createElement("div"),A=dE.getElementsByTagName("body")[0],dD=0.1;if(A){dC.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;";
dC.appendChild(dE.createElement("p")).style.height="1px";A.insertBefore(dC,A.firstChild);dD=dC.offsetWidth-dC.clientWidth;A.removeChild(dC);}return dD;},null,0.1);var S=function(A,dC){return function(dE){var dD=dE.all(A);return(dD.size()>=dC)?dD:null;};},i=I(w),L=I(w,bv,dr,bx),a0=I(aR),bQ=I(aR,cv),cJ=I(aR,b5),W=I(t,aw),aA=I(t,aw,dy),E=I(cD,C),e=I(cD,b),da=I(cD,bF),db=I(cD,bF,a7),a2=I(cD,dd,cG,w),cH=I(cD,dd,cG),bT=I(cD,am,bW),dc=I(cD,bw),Q=I(cD,O),cd=I(cD,dd,bf),df=I(cD,dd,cX,bf),v=I(cD,dd,cX,dd),bS=I(cD,dd,cX,dd,c1,bp),cK=I(cD,dd,cX,dd,aW),bt=I(cD,dd,cX,ar),bE=I(cD,dd,cX,b9,ak),ds=I(cD,dd,bf,ar),aQ=I(cD,dd,bf,ar,Y),V=I(cD,dd,bf,N),M=I(cD,dd,bf,aX),dk=I(cD,dd,bf,p),b0=I(cD,dd,bf,bY),r='<div class="'+cH+'">'+'<div class="'+[i,L,a2].join(ab)+'"></div>'+"</div>",ao='<div class="'+dc+'">'+'<div class="'+bT+'"></div>'+"</div>",q='<span class="'+bE+'">{label}</span>',aH='<table cellspacing="0" cellpadding="0" class="'+cd+'">'+"<tbody>"+'<tr class="'+e+'" height="1">'+'<td height="0" class="'+[ds,V].join(ab)+'"></td>'+'<td class="'+db+'" colspan="1">'+'<div class="'+da+'">'+'<div class="'+Q+'"></div>'+"</div>"+"</td>"+"</tr>"+'<tr class="'+E+'">'+'<td class="'+[ds,dk].join(ab)+'"></td>'+"</tr>"+"</tbody>"+"</table>",bM='<td class="'+[ds,M].join(ab)+'" data-colnumber="{colNumber}">'+'<div class="'+aQ+'"></div>'+"</td>",k='<div class="'+b0+'">{hour}</div>',aI='<table cellspacing="0" cellpadding="0" class="'+df+'">'+"<tbody>"+'<tr class="'+bt+'"></tr>'+"</tbody>"+"</table>",bP='<th class="'+v+'" data-colnumber="{colNumber}"><a href="#">&nbsp;</a></th>',aG='<td class="'+[v,cK].join(ab)+'"></td>',B='<th class="'+[v,bS].join(ab)+'">&nbsp;</th>';var du=c0.Component.create({NAME:aU,ATTRS:{bodyContent:{value:ct},days:{value:1,validator:aV},delegateConfig:{value:{},setter:function(dC){var A=this;return c0.merge({dragConfig:{useShim:false},bubbleTargets:A,container:A.get(bb),nodes:cF+a0,invalid:"input, select, button, a, textarea, "+cF+bQ},dC||{});},validator:dx},eventWidth:{value:95,validator:aV},filterFn:{value:function(A){return(A.getHoursDuration()<=24&&!A.get(T));}},headerDateFormat:{value:"%d %A",validator:cM},headerView:{value:true,validator:bm},headerViewConfig:{setter:function(dC){var A=this;return c0.merge({displayDaysInterval:1,displayRows:6,filterFn:function(dD){return((dD.getHoursDuration()>24)||dD.get(T));},height:"auto",visible:true},dC||{});},value:{}},hourHeight:{value:52,validator:aV},name:{value:dd},strings:{value:{allDay:"All day"}},headerTableNode:{valueFn:function(){return c0.Node.create(aI);}},headerViewLabelNode:{valueFn:function(){var dC=this;var A=dC.get(cO);return c0.Node.create(cr(q,{label:A[T]}));}},resizerNode:{valueFn:function(){return c0.Node.create(r);}},tableNode:{valueFn:function(){return c0.Node.create(aH);}},colDaysNode:{valueFn:"_valueColDaysNode"},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},markercellsNode:{valueFn:"_valueMarkercellsNode"},timesNode:{valueFn:"_valueTimesNode"}},HTML_PARSER:{colDaysNode:S(cF+M,1),colHeaderDaysNode:S(cF+v,2),headerTableNode:cF+df,headerViewLabelNode:cF+bE,markercellsNode:S(cF+dc,24),resizerNode:cF+cH,tableNode:cF+cd,timesNode:S(cF+b0,24)},EXTENDS:c0.SchedulerView,prototype:{initializer:function(){var A=this;A[aK]=A.get(aK);A[c4]=A.get(c4);A[dv]=A.get(dv);A[bo]=A.get(bo);A[cN]=A.get(cN);A[cc]=A.get(cc);A[aq]=A.get(aq);A[bB]=null;A[bZ]=A[cc].one(cF+E);A[bk]=A.headerTableNode.one(cF+bt);A[aZ]=A[aK].all(cF+aQ);A[bK]=A[cc].one(cF+dk);A[cb]=A[cc].one(cF+db);A[cl]=A[cc].one(cF+Q);if(A.get(bq)){A[bq]=new c0.SchedulerTableView(A.get(bU));}},renderUI:function(){var A=this;A[bK].setContent(A[aq]);A[cl].setContent(A[bo]);A[aK].appendTo(A[bZ]);A[c4].appendTo(A[bk]);if(A[bq]){A[bq].set(t,A.get(t));A[bq].render();}},bindUI:function(){var A=this;A[dv].delegate("click",c0.bind(A._onClickDaysHeader,A),cF+v);A[bZ].delegate("mousedown",c0.bind(A._onMouseDownTableCol,A),cF+ds);A[bZ].delegate("mouseenter",c0.bind(A._onMouseEnterEvent,A),cF+a0);A[bZ].delegate("mouseleave",c0.bind(A._onMouseLeaveEvent,A),cF+a0);A[bZ].delegate("mousemove",c0.bind(A._onMouseMoveTableCol,A),cF+M);A[bZ].delegate("mouseup",c0.bind(A._onMouseUpTableCol,A),cF+ds);A.on("drag:end",A._onEventDragEnd);A.on("drag:start",A._onEventDragStart);A.on("drag:tickAlignY",A._dragTickAlignY);A.on("schedulerChange",A._onSchedulerChange);A.after("drag:align",A._afterDragAlign);},syncUI:function(){var A=this;du.superclass.syncUI.apply(this,arguments);A[cb].attr(ad,A.get(Z));A._setupDragDrop();},syncStdContent:function(){var dC=this;dC.setStdModContent(cV.BODY,dC[cc].getDOM());var A=c0.NodeList.create(dC[dv]);if(dC[bq]){A.push(dC[bq].get(bb));A.push(dC.get(a1));}dC.setStdModContent(cV.HEADER,A);},calculateEventHeight:function(dD){var dC=this;var A=dC.get(aS);return Math.max(dD*(A/60),A/2);},calculateTop:function(dC){var A=this;return((dC.getHours()*60)+dC.getMinutes()+(dC.getSeconds()/60))*(A.get(aS)/60);},getNextDate:function(){var A=this;var dC=A.get(t).get(bJ);return aD.add(dC,aD.DAY,1);},getPrevDate:function(){var A=this;var dC=A.get(t).get(bJ);return aD.subtract(dC,aD.DAY,1);},getColumnByDate:function(dC){var A=this;return A[aK].item(A.getDateDaysOffset(dC));},getColumnShimByDate:function(dC){var A=this;return A[aZ].item(A.getDateDaysOffset(dC));},getDateByColumn:function(dD){var A=this;var dC=aD.safeClearTime(A.get(t).get(bJ));return aD.add(dC,aD.DAY,dD);},getDateDaysOffset:function(dD){var A=this;var dC=aD.safeClearTime(A.get(t).get(bJ));return aD.getDayOffset(aD.safeClearTime(dD),dC);},getYCoordTime:function(dF){var dC=this;var A=dC.get(aS);var dG=cx((dF/A).toFixed(2));var dE=Math.floor((dG*100)%100*0.6);var dD=Math.floor(dG);return[dD,dE,0];},plotEvent:function(dD){var A=this;var dE=dD.get(dB);if(dE.size()<2){dD.addPaddingNode();}var dG=dD.get(dB).item(0);var dC=dD.get(dB).item(1);var dF=A.getColumnShimByDate(dD.get(aP));var dH=A.getColumnShimByDate(dD.get(c5));if(dH){dH.append(dG);if(dD.get(aJ)){dG.show();}}else{dG.hide();}if(dF){if(dF.compareTo(dH)||dD.isDayBoundaryEvent()){dC.hide();
}else{dF.append(dC);if(dD.get(aJ)){dC.show();}}}else{dC.hide();}dD.syncNodeUI();A.syncEventTopUI(dD);A.syncEventHeightUI(dD);},plotEvents:function(){var A=this;var dC=A.get(t);var dD=A.get(cU);A[aZ].each(function(dH,dG){var dE=dC.getEventsByDay(A.getDateByColumn(dG),true);var dF=[];dH.empty();c0.Array.each(dE,function(dI){if(dD.apply(A,[dI])){A.plotEvent(dI);dF.push(dI);}});A.syncEventsIntersectionUI(dF);});if(A.get(bq)){A.syncHeaderViewUI();}},syncColumnsUI:function(){var A=this;A[aK].each(function(dE,dD){var dC=A.getDateByColumn(dD);dE.toggleClass(W,aD.isToday(dC));});},syncDaysHeaderUI:function(){var dD=this;var dE=dD.get(t).get(bJ);var dC=dD.get(bH);var A=dD.get(aL);dD[c4].all(l).each(function(dH,dG){var dF=aD.add(dE,aD.DAY,dG);var dI=c0.DataType.Date.format(dF,{format:dC,locale:A});dH.toggleClass(aA,aD.isToday(dF));dH.html(dI);});},syncEventsIntersectionUI:function(dC){var A=this;var dD=A.get(u);A.get(t).flushEvents();c0.Array.each(dC,function(dF){var dH=A.findEventIntersections(dF,dC);var dG=dH.length;var dE=(dD/dG);c0.Array.each(dH,function(dJ,dK){var dI=dJ.get(dB).item(0);var dM=dE*dK;var dL=dE*1.7;if(dK===(dG-1)){dL=dD-dM;}dI.setStyle(cg,dL+ch);dI.setStyle(bc,dM+ch);var dN=dI.get(X);if(dN){dN.insert(dI,dK);}dJ._filtered=true;});});},syncEventHeightUI:function(dE){var dC=this;var dI=dE.get(aP);var A=dE.get(c5);var dF=aD.clone(A);dF.setHours(24,0,0);var dG=aD.getMinutesOffset(dC.limitDate(dI,dF),A);dE.get(dB).item(0).set(cW,dC.calculateEventHeight(dG));var dD=dE.get(dB).item(1);if(dD.inDoc()){var dH=aD.getMinutesOffset(dI,aD.toMidnight(dE.getClearEndDate()));dD.set(cW,dC.calculateEventHeight(dH));}},syncEventTopUI:function(dC){var A=this;dC.get(dB).item(0).setStyle(b1,A.calculateTop(dC.get(c5))+at);dC.get(dB).item(1).setStyle(b1,0);},syncHeaderViewUI:function(){var dC=this;if(dC.get(bq)){var dE=dC[bq];dE.plotEvents();var dF=dE.get(bb);dF.setStyle(n,m());var dD=dF.one(cF+bs);var A=Math.max(dD.get(cW),40);dE.set(cI,A);dC._fillHeight();}},calculateYDelta:function(dD,dC){var A=this;return(dC[1]-dD[1])/(A.get(aS)/2)*30;},findEventIntersections:function(dC,dD){var A=this;var dE=[];c0.Array.each(dD,function(dF){if(!dC._filtered&&dC.intersectHours(dF)){dE.push(dF);}});return dE;},getXYDelta:function(dC){var A=this;var dD=dC.currentTarget.getXY(),dE=[dC.pageX,dC.pageY];return c0.Array.map(dD,function(dG,dF){return(dE[dF]-dG);});},getTickY:function(){var A=this;return cA(Math.ceil(A.get(aS)/2),10);},roundToNearestHour:function(dC,dD){var A=this;dC.setHours(dD[0],cA(dD[1],A.getTickY()),dD[2]);},_afterDragAlign:function(dD){var dC=this;var A=dD.target;if(!dC[ac]){dC[ac]=A.actXY;}A.actXY[0]=null;},_dragTickAlignX:function(dD){var dC=this;var dG=dC[K];if(dG&&!dC[cz]){var dE=dC[cu];var dF=cx(dD.attr(x))-dC.startColNumber;dC.draggingEventStartDate=aD.add(dG.get(c5),aD.DAY,dF);var A=aD.clone(dC.draggingEventStartDate);aD.copyHours(A,dE.get(c5));dE.move(A);dC.plotEvent(dE);}},_dragTickAlignY:function(A){var dH=this;var dC=dH.get(t);var dJ=dC.get(dz);var dE=dH[K];if(dE){var dI=A.target.get(ba);var dF=dH[cu];var dG=dH.calculateYDelta(dH[ac],dI.actXY);if(dH[cz]){var dD=aD.add(dH.draggingEventEndDate,aD.MINUTES,dG);if(aD.getMinutesOffset(dD,dH.draggingEventStartDate)<=dJ.get(cL)){return;}dF.set(aP,dD);}else{dF.move(aD.add(dH.draggingEventStartDate,aD.MINUTES,dG));}dH.plotEvent(dF);}},_setupDragDrop:function(){var dC=this;if(!dC[cu]){var dD=dC.get(t);dC[cu]=new (dC.get(dq))({scheduler:dD});dC[cu].removeTarget(dD);dC[cu].get(dB).addClass(cJ).hide();}if(!dC.delegate){dC.delegate=new c0.DD.Delegate(dC.get(G));}var A=dC.delegate.dd;A.unplug(c0.Plugin.DDConstrained);A.unplug(c0.Plugin.DDNodeScroll);var dE=dC.bodyNode.get(an);dE.bottom=Infinity;dE.top=-Infinity;A.plug(c0.Plugin.DDConstrained,{bubbleTargets:dC,constrain:dE,stickY:true,tickY:dC.get(aS)/2});A.plug(c0.Plugin.DDNodeScroll,{node:dC.bodyNode,scrollDelay:150});},_uiSetCurrentDate:function(dC){var A=this;A.syncColumnsUI();A.syncDaysHeaderUI();},_onClickDaysHeader:function(dE){var A=this;var dD=A.get(t);if(dE.target.test(l)){var dF=dD.getViewByName(dd);if(dF){var dC=cx(dE.currentTarget.attr(x));dD.set(bJ,A.getDateByColumn(dC));dD.set(cw,dF);}}dE.preventDefault();},_onEventDragEnd:function(dC){var A=this;var dE=A[K];if(dE){var dD=A[cu];dD.set(aJ,false);dE.set(aJ,true);dE.copyDates(dD);A.get(t).syncEventsUI();}A[ac]=null;A[K]=null;},_onEventDragStart:function(dD){var A=this;var dF=A[K]=A.delegate.dd.get(dB).getData(aR);if(dF){var dE=A[cu];dE.copyPropagateAttrValues(dF);A.plotEvent(dE);dF.set(aJ,false);A.draggingEventStartDate=aD.clone(dF.get(c5));A.draggingEventEndDate=aD.clone(dF.get(aP));var dC=A.getColumnByDate(dF.get(c5));A.startColNumber=dC?cx(dC.attr(x)):0;}},_onMouseDownTableCol:function(dC){var dH=this;var dG=dC.target;var dE=dH.get(t);var dI=dE.get(dz);if(dI&&!dE.get(cv)){dI.hideOverlay();if(dG.test(cF+aQ)){dH[ac]=[dC.pageX,dC.pageY];var dJ=cx(dC.currentTarget.attr(x));var dD=dH.getDateByColumn(dJ);var A=dH.getXYDelta(dC);dH.roundToNearestHour(dD,dH.getYCoordTime(A[1]));var dF=aD.add(dD,aD.MINUTES,dI.get(cL));dI.move(dD);dI.set(T,false);dI.set(aP,dF);dH[ag]=dD;dH[bA]=dF;dC.halt();}else{if(dG.test([cF+cH,cF+a2].join(bV))){dH[cz]=true;}}}dH.get(bb).unselectable();},_onMouseEnterEvent:function(dD){var A=this;var dE=dD.currentTarget;var dC=dE.getData(aR);if(dC&&!dC.get(cv)){A[cN].appendTo(dE);}},_onMouseLeaveEvent:function(dC){var A=this;if(!A[cz]){A._removeResizer();}},_onMouseMoveTableCol:function(dF){var A=this;var dE=dF.currentTarget;var dC=A.get(t).get(dz);if(A[bB]!==dE){A[bB]=dE;A._dragTickAlignX(A[bB]);}var dD=A[bA];var dG=A[ag];if(dG){var dH=cA(A.calculateYDelta(A[ac],[dF.pageX,dF.pageY]),A.getTickY());if(A._delta!==dH){if(dH>0){dC.set(aP,aD.add(dD,aD.MINUTES,dH));}else{dC.set(c5,aD.add(dG,aD.MINUTES,dH));}A.plotEvent(dC);A._delta=dH;}}},_onMouseUpTableCol:function(dE){var A=this;var dD=A.get(t);var dC=dD.get(dz);if(dC&&!dD.get(cv)){if(A[ag]){A.plotEvent(dC);dC.showOverlay([dE.pageX,dE.pageY]);}}A[ag]=null;A[bA]=null;A[cz]=false;A[ac]=null;A._removeResizer();
A.get(bb).selectable();},_onSchedulerChange:function(dC){var A=this;if(A[bq]){A[bq].set(t,dC.newVal);}},_removeResizer:function(){var A=this;A[cN].remove();},_valueColDaysNode:function(){var A=this;var dE=A.get(Z);var dC=[],dD=0;while(dE--){dC.push(c0.Lang.sub(bM,{colNumber:dD++}));}return c0.NodeList.create(dC.join(ct));},_valueColHeaderDaysNode:function(){var A=this;var dE=A.get(Z);var dC=[],dD=0;dC.push(aG);while(dE--){dC.push(c0.Lang.sub(bP,{colNumber:dD++}));}dC.push(B);return c0.NodeList.create(dC.join(ct));},_valueMarkercellsNode:function(){var A=this;var dC=[],dD;for(dD=0;dD<=23;dD++){dC.push(ao);}return c0.NodeList.create(dC.join(ct));},_valueTimesNode:function(){var A=this;var dE=A.get(av);var dD=[],dC;for(dC=0;dC<=23;dC++){dD.push(cr(k,{hour:dE?aD.toIsoTimeString(dC):aD.toUsTimeString(dC,false,true)}));}return c0.NodeList.create(dD.join(ct));}}});c0.SchedulerDayView=du;var az=c0.Component.create({NAME:c6,ATTRS:{bodyContent:{value:ct},days:{value:7},headerViewConfig:{value:{displayDaysInterval:a3}},name:{value:di}},EXTENDS:c0.SchedulerDayView,prototype:{adjustCurrentDate:function(){var A=this;var dE=A.get(t);var dC=dE.get(bJ);var dD=dE.get(c7);dE.set(bJ,aD.getFirstDayOfWeek(dC,dD));},getNextDate:function(){var A=this;var dD=A.get(t);var dC=dD.get(bJ);var dE=A._firstDayOfWeek(dC);return aD.add(dE,aD.WEEK,1);},getPrevDate:function(){var A=this;var dD=A.get(t);var dC=dD.get(bJ);var dE=A._firstDayOfWeek(dC);return aD.subtract(dE,aD.WEEK,1);},getToday:function(){var A=this;var dC=az.superclass.getToday.apply(this,arguments);return A._firstDayOfWeek(dC);},_firstDayOfWeek:function(dD){var A=this;var dE=A.get(t);var dC=dE.get(c7);return aD.getFirstDayOfWeek(dD,dC);}}});c0.SchedulerWeekView=az;var i=I(w),o=I(w,"arrowstop-1-l"),dl=I(w,"arrowstop-1-r"),s=I(cD,bf,b),a6=I(cD,bf,b,aW),aF=I(cD,bf,b,aw),bN=I(cD,bf,a7),dt=I(cD,bf,cR,bC,dB),ay=I(cD,bf,cR,bC,dB,aC),ck=I(cD,bf,cR,bC,dB,bd),aB=I(cD,bf,cX,ar),dh=I(cD,bf,cX,dd),d=I(cD,bf,cX,bf),cn=I(cD,bf,b7),cZ=I(cD,bf,b3),cf=I(cD,bf,b3,a7),bs=I(cD,bf,ce),cT=I(cD,bf,ce,ar),b8=I(cD,bf,ce,ar,j),cP=I(cD,bf,ce,ar,j,aj),cj=I(cD,bf,ce,ar,j,aW),dp=I(cD,bf,ce,ar,j,a5),bR=I(cD,bf,ce,ar,j,aw),aN=I(cD,bf,ce,bu),c=I(cD,bf,ce,bu,bc),c2=I(cD,bf,ce,bu,cS),ap=I(cD,bf,ce,bu,bp),ah=I(cD,bf,ce,aW),aT=I(cD,bf,bF),cm=I(cD,bf,bF,aW),a9='<div class="'+bN+'">'+'<div class="'+cf+'"></div>'+"</div>",b6='<div class="'+dt+'">'+'<div class="'+ay+'"></div>'+'<a href="javascript:;" class="'+ck+'">{label}</a>'+"</div>",cE='<td class="'+s+'">&nbsp;</td>',g='<th class="'+dh+'"><div>&nbsp;</div></th>',aa='<table cellspacing="0" cellpadding="0" class="'+d+'">'+"<tbody>"+'<tr class="'+aB+'"></tr>'+"</tbody>"+"</table>",bz='<a href="javascript:;" class="'+cn+'">{label} {count}</a>',bI='<div class="'+cZ+'" style="top: {top}%; height: {height}%;"></div>',bO='<table cellspacing="0" cellpadding="0" class="'+bs+'">'+"<tbody></tbody>"+"</table>",bj='<table cellspacing="0" cellpadding="0" class="'+aT+'">'+"<tbody>"+"<tr></tr>"+"</tbody>"+"</table>",U='<span class="'+[i,o].join(ab)+'"></span>',by='<span class="'+[i,dl].join(ab)+'"></span>',bG='<td class="'+cT+'"><div></div></td>',de="<tr></tr>";var bl=c0.Component.create({NAME:cs,ATTRS:{bodyContent:{value:ct},displayDaysInterval:{value:42},displayRows:{value:4},fixedHeight:{value:true},name:{value:bf},headerDateFormat:{value:"%a"},navigationDateFormat:{value:"%b %Y"},scrollable:{value:false},strings:{value:{close:"Close",showMore:"Show more"}},headerTableNode:{valueFn:function(){return c0.Node.create(aa);}},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},rowsContainerNode:{valueFn:function(){return c0.Node.create(a9);}},tableGridNode:{valueFn:"_valueTableGridNode"}},HTML_PARSER:{colHeaderDaysNode:S(cF+dh,7),headerTableNode:cF+d,rowsContainerNode:cF+bN,tableGridNode:S(cF+aT,7)},EXTENDS:c0.SchedulerView,prototype:{evtDateStack:null,evtRenderedStack:null,rowDataTableStack:null,initializer:function(){var A=this;A.evtDateStack={};A.evtRenderedStack={};A.rowDataTableStack={};A[c4]=A.get(c4);A[dv]=A.get(dv);A[b2]=A.get(b2);A[F]=A.get(F);A[bk]=A.headerTableNode.one(cF+aB);A[a8]=c0.NodeList.create();A[cq]=A[b2].one(cF+cf);A[dm]=c0.NodeList.create();},bindUI:function(){var A=this;A[b2].delegate("click",c0.bind(A._onClickMore,A),cF+cn);},renderUI:function(){var A=this;var dC=A._getDisplayRowsCount();for(var dD=0;dD<dC;dD++){A[dm].push(A.buildGridRowNode(dD));}A._renderEventsOverlay();A[c4].appendTo(A[bk]);A[dm].appendTo(A[cq]);},buildEventsRow:function(dD,dI,dH){var dC=this;var dE=dC.get(cQ);var A=dC._getDisplayRowDaysCount();var dG=0;var dF=c0.Node.create(de);dC.loopDates(dD,dI,function(dR,dN){if(dG>dN){return;}var dS=dC.getIntersectEvents(dR);var dP=dC._getRenderableEvent(dS,dD,dI,dR);var dL=c0.Node.create(bG);var dK=dL.one(ae);if((dE<dS.length)&&(dH===(dE-1))){var dQ=dC.get(cO);var dM=c0.Node.create(dg.sub(bz,{count:(dS.length-(dE-1)),label:dQ[P]}));dM.setData(cR,dS);dK.append(dM);}else{if(dP){var dJ=dC._getEvtSplitInfo(dP,dR,dD,dI);dL.attr(ad,dJ.colspan);dG+=(dJ.colspan-1);dC._syncEventNodeContainerUI(dP,dK,dJ);dC._syncEventNodeUI(dP,dK,dR);var dO=String(dR.getTime());dC.evtRenderedStack[dO].push(dP);}}dG++;dF.append(dL);});return dF;},buildEventsTable:function(A,dF){var dL=this;var dJ=dL.get(cQ);var dI=aD.clearTime(dL._findCurrentIntervalStart());var dH=String(dI.getTime()).concat(A.getTime()).concat(dF.getTime());var dK=dL.rowDataTableStack[dH];if(!dK){dK=c0.Node.create(bO);var dE=dK.one(ca);var dD=dL.buildEventsTitleRow(dK,A,dF);dE.append(dD);for(var dG=0;dG<dJ;dG++){var dC=dL.buildEventsRow(A,dF,dG);dE.append(dC);}dL.rowDataTableStack[dH]=dK;}return dK;},buildEventsTitleRow:function(dD,dC,dF){var A=this;var dE=c0.Node.create(de);A.loopDates(dC,dF,function(dH,dG){var dI=c0.Node.create(bG);dI.addClass(b8).toggleClass(cj,(dG===0)).toggleClass(bR,aD.isToday(dH)).toggleClass(dp,aD.isToday(aD.subtract(dH,aD.DAY,1))).toggleClass(cP,aD.isToday(aD.subtract(dH,aD.WEEK,1)));dE.append(dI.setContent(dH.getDate()));});return dE;},buildGridRowNode:function(dG){var dD=this;
var dE=dD._getDisplayRowsCount();var dC=100/dE;var A=dD._getTableGridNode(dG);var dF=c0.Node.create(dg.sub(bI,{height:dC,top:dC*dG}));dF.append(A.toggleClass(cm,(dG===0)));return dF;},flushViewCache:function(){var A=this;A.evtDateStack={};A.evtRenderedStack={};A.rowDataTableStack={};},getIntersectEvents:function(dC){var A=this;var dF=A.get(t);var dE=String(dC.getTime());if(!A.evtDateStack[dE]){var dD=dF.getIntersectEvents(dC);A.evtDateStack[dE]=dD.filter(A.get(cU));}return A.evtDateStack[dE];},getNextDate:function(){var A=this;var dE=A.get(t);var dC=dE.get(bJ);var dD=A.get(bh);return aD.add(dC,aD.DAY,dD);},getPrevDate:function(){var A=this;var dE=A.get(t);var dC=dE.get(bJ);var dD=A.get(bh);return aD.subtract(dC,aD.DAY,dD);},hideEventsOverlay:function(){var A=this;A[cp].set(aJ,false);},loopDates:function(A,dE,dH,dI,dG){var dJ=this;var dC=aD.clone(A);var dD=dE.getTime();var dF;for(dF=0;dC.getTime()<=dD;dF++){dH.apply(dJ,[dC,dF]);dC=aD.add(dC,(dI||aD.DAY),(dG||1));}},plotEvents:function(){var dC=this;var dF=dC._findCurrentIntervalStart();var A=aD.safeClearTime(dF);dC.flushViewCache();dC.hideEventsOverlay();dC.bodyNode.all(cF+bs).remove();var dD=dC.get(bh);var dE=Math.min(dD,a3);dC[dm].each(function(dJ,dH){var dG=aD.add(A,aD.DAY,dE*dH);var dK=aD.add(dG,aD.DAY,dE-1);var dI=dC.buildEventsTable(dG,dK);if(dH===0){dI.addClass(ah);}dJ.append(dI);});},syncDaysHeaderUI:function(){var dD=this;var dG=dD.get(t);var dE=dG.get(bJ);var dC=dD.get(bH);var A=dD.get(aL);var dF=dD._findFirstDayOfWeek(dE);dD.colHeaderDaysNode.all(ae).each(function(dJ,dI){var dH=aD.add(dF,aD.DAY,dI);var dK=c0.DataType.Date.format(dH,{format:dC,locale:A});dJ.html(dK);});},syncGridUI:function(){var dL=this;var dF=dL.getToday();var dC=dL.get(t);dL[a8].removeClass(aF);var dE=dL._findCurrentIntervalStart();var dH=dL._findCurrentIntervalEnd();if(aD.between(dF,dE,dH)){var A=dC.get(c7);var dJ=dL._findFirstDayOfWeek(dF);var dG=aD.getWeekNumber(dF,A)-aD.getWeekNumber(dE,A);var dK=(dF.getDate()-dJ.getDate());var dD=dL._getCellIndex([dK,dG]);var dI=dL[a8].item(dD);if(dI){dI.addClass(aF);}}},syncStdContent:function(){var A=this;A.setStdModContent(cV.BODY,A[b2].getDOM());A.setStdModContent(cV.HEADER,A[dv].getDOM());},_findCurrentIntervalEnd:function(){var A=this;var dE=A.get(t);var dC=dE.get(bJ);var dD=A.get(bh);return aD.add(dC,aD.DAY,dD);},_findCurrentIntervalStart:function(){var A=this;var dC=A.get(t);return dC.get(bJ);},_findFirstDayOfWeek:function(dD){var A=this;var dE=A.get(t);var dC=dE.get(c7);return aD.getFirstDayOfWeek(dD,dC);},_getDisplayRowsCount:function(){var A=this;var dC=A.get(bh);return Math.ceil(dC/a3);},_getDisplayRowDaysCount:function(){var A=this;var dC=A.get(bh);return Math.min(dC,a3);},_getEvtLabel:function(dD){var dC=this;var dE=dD.get(aP);var A=dD.get(c5);return[A.getHours(),cy,dE.getHours(),ab,dD.get(a4)].join(ct);},_getEvtSplitInfo:function(dG,dJ,A,dE){var dH=this;var dC=dG.getClearStartDate();var dF=dG.getClearEndDate();var dI=aD.getDayOffset(dE,dJ);var dD={colspan:Math.min(aD.getDayOffset(dF,dJ),dI)+1,left:aD.before(dC,A),right:aD.after(dF,dE)};return dD;},_getRenderableEvent:function(dK,A,dE,dL){var dJ=this;var dH=String(dL.getTime());if(!dJ.evtRenderedStack[dH]){dJ.evtRenderedStack[dH]=[];}for(var dD=0;dD<dK.length;dD++){var dI=dK[dD];var dC=dI.get(c5);var dG=aD.after(dL,dC)&&!aD.isDayOverlap(dL,A);var dF=!aD.isDayOverlap(dC,dL);var dM=c0.Array.indexOf(dJ.evtRenderedStack[dH],dI)>-1;if(!dM&&(dF||dG)){return dI;}}return null;},_getTableGridNode:function(dH){var dC=this;var dE=dC.get(bh);var A=dC[F].item(dH);var dG=A.one(dw);for(var dD=0;dD<Math.min(dE,a3);dD++){var dF=c0.Node.create(cE);dG.append(dF);dC[a8].push(dF);}return A;},_onClickMore:function(dD){var A=this;var dE=dD.target;var dC=dE.getData(cR);var dF=c0.NodeList.create();c0.Array.each(dC,function(dH){var dG=dH.get(dB).item(0).clone();dG.setData(aR,dH);dG.setStyles({height:"auto",left:0,position:"relative",top:0,width:"auto"});dF.push(dG);});A[cp].bodyNode.one(cF+ay).setContent(dF);A[cp].setAttrs({visible:true,xy:dE.getXY()});},_renderEventsOverlay:function(){var dC=this;var A=dC.get(cO);dC[cp]=new c0.Overlay({align:{points:[a,a]},bodyContent:dg.sub(b6,{label:A[bd]}),render:dC[b2],visible:false,width:250,zIndex:450});dC[cp].bodyNode.delegate("click",c0.bind(dC.hideEventsOverlay,dC),cF+ck);},_syncEventNodeContainerUI:function(dC,dE,dD){var A=this;dE.addClass(aN);if(dD.left){dE.addClass(c).prepend(U);}if(dD.right){dE.addClass(ap).append(by);}if(dC.get(dj)){dE.addClass(c2);}},_syncEventNodeUI:function(dK,dC,dM){var dL=this;var dF=dL.get(t);var A=dF.get(c7);var dE=dK.get(dB);var dD=dK.get(c5);var dJ=aD.clearTime(dL._findCurrentIntervalStart());var dG=aD.getFirstDayOfWeek(new Date(Math.max(dD,dJ)),A);var dI=Math.floor(aD.getDayOffset(dM,dG)/a3);if(dE.size()<=dI){dK.addPaddingNode();}var dH=dE.item(dI);dH.setStyles({height:"auto",left:0,top:0,width:"auto"});dH.appendTo(dC);dK.syncNodeUI();},_uiSetCurrentDate:function(dC){var A=this;A.syncDaysHeaderUI();A.syncGridUI();},_valueColHeaderDaysNode:function(){var A=this;var dC=A.get(bh);var dD=Math.min(dC,a3);return A._valueNodeList(dD,g);},_valueTableGridNode:function(){var A=this;var dC=A.get(bh);var dD=Math.min(dC,a3);return A._valueNodeList(dD,bj);},_valueNodeList:function(dE,dD){var A=this;var dC=[];while(dE--){dC.push(dD);}return c0.NodeList.create(dC.join(ct));}}});c0.SchedulerTableView=bl;var br=I(dn,bf,ce,ar,au);var aO=c0.Component.create({NAME:dn,ATTRS:{displayDaysInterval:{readOnly:true,value:42},name:{value:co}},EXTENDS:c0.SchedulerTableView,prototype:{getNextDate:function(){var A=this;var dD=A.get(t);var dC=dD.get(bJ);return aD.add(dC,aD.MONTH,1);},getPrevDate:function(){var A=this;var dD=A.get(t);var dC=dD.get(bJ);return aD.subtract(dC,aD.MONTH,1);},plotEvents:function(){var A=this;c0.SchedulerMonthView.superclass.plotEvents.apply(A,arguments);var dD=A.get(t);var dC=dD.get(bJ);var dG=aD.findMonthEnd(dC);var dF=aD.findMonthStart(dC);var dE=A._findCurrentIntervalStart();var dH=A[cq].all(cF+b8);dH.each(function(dK,dI){var dJ=aD.add(dE,aD.DAY,dI);
if(aD.before(dJ,dF)||aD.after(dJ,dG)){dK.addClass(br);}});},_findCurrentIntervalStart:function(){var A=this;var dE=A.get(t);var dC=dE.get(bJ);var dD=aD.findMonthStart(dC);return A._findFirstDayOfWeek(dD);},_findFirstDayOfWeek:function(dD){var A=this;var dE=A.get(t);var dC=dE.get(c7);return aD.getFirstDayOfWeek(dD,dC);}}});c0.SchedulerMonthView=aO;var y=I(cD,bf,z),J=I(cD,bf,bi),cB=I(cD,bf,b5,dB),b4='<div class="'+J+'"></div>',c3='<div class="'+cB+'"></div>';c0.SchedulerTableViewDD=function(){};c0.SchedulerTableViewDD.ATTRS={delegateConfig:{value:{},setter:function(dC){var A=this;return c0.merge({dragConfig:{offsetNode:false,useShim:false},bubbleTargets:A,container:A.get(bb),nodes:cF+a0,invalid:"input, select, button, a, textarea, "+cF+bQ},dC||{});},validator:dx}};c0.mix(c0.SchedulerTableViewDD.prototype,{initializer:function(){var A=this;A[bL]=c0.Node.create(c3);A.after(A.viewDDBindUI,A,"bindUI");A.after(A.viewDDRenderUI,A,"renderUI");A.after(A.viewDDSyncUI,A,"syncUI");},viewDDBindUI:function(){var A=this;var dC=A.get(t).get(dz);dC.on({cancel:c0.bind(A.removeLasso,A),save:c0.bind(A.removeLasso,A)});A[b2].on({mousedown:c0.bind(A._onMouseDownGrid,A),mousemove:c0.bind(A._onMouseMoveGrid,A),mouseup:c0.bind(A._onMouseUpGrid,A)});A.after("drag:align",A._afterDragAlign);A.on("drag:end",A._onEventDragEnd);A.on("drag:start",A._onEventDragStart);},viewDDRenderUI:function(){var A=this;},viewDDSyncUI:function(){var A=this;c0.SchedulerTableView.superclass.syncUI.apply(this,arguments);A._setupDragDrop();},removeLasso:function(){var A=this;if(A[bi]){A[bi].remove();}},removeProxy:function(){var A=this;if(A[bL]){A[bL].remove();}},renderLasso:function(dI,dC){var dO=this;var dF=dI;var dH=dC;if(dI[1]>dC[1]){dF=dC;dH=dI;}var dP=dF[0],dK=dF[1],dD=dH[0],A=dH[1];dO.removeLasso();dO.lasso=c0.NodeList.create();for(var dE=dK;dE<=A;dE++){var dG=dO.gridCellHeight,dN=dO.gridCellWidth,dL=0,dJ=(dG*dE);if(dE===dK){if(dK===A){dL+=Math.min(dP,dD)*dN;dN*=Math.abs(dD-dP)+1;}else{dL+=dP*dN;dN*=a3-dP;}}else{if(dE===A){dN*=dD+1;}else{dN*=a3;}}var dM=c0.Node.create(b4);dO.lasso.push(dM);dO[b2].append(dM);dM.sizeTo(dN,dG);dM.setXY(dO._offsetXY([dL,dJ],1));}},_afterDragAlign:function(dG){var dD=this;var dC=dG.target;var dH=dD[K];var dE=[dG.pageX,dG.pageY];var A=dD._findPosition(dD._offsetXY(dE,-1));if(dH&&dD._hasLassoChanged(A)){dD.lassoLastPosition=A;var dF=aD.add(dD._getPositionDate(A),aD.MINUTES,dH.getMinutesDuration());dD.renderLasso(A,dD._getDatePosition(dF));}},_findPosition:function(dE){var A=this;var dD=Math.floor(dE[0]/A.gridCellWidth);var dC=Math.floor(dE[1]/A.gridCellHeight);return[dD,dC];},_getCellIndex:function(dC){var A=this;return dC[1]*a3+dC[0];},_getDatePosition:function(dD){var dC=this;var dE=dC._findCurrentIntervalStart();var dF=aD.getDayOffset(dD,dE);var A=[];A[1]=Math.floor(dF/a3);A[0]=dF%a3;return A;},_getPositionDate:function(dD){var dC=this;var dE=dC._findCurrentIntervalStart();var A=aD.safeClearTime(dC._findFirstDayOfWeek(dE));return aD.add(A,aD.DAY,dC._getCellIndex(dD));},_hasLassoChanged:function(dC){var A=this;var dD=A.lassoLastPosition||A.lassoStartPosition;return dD&&((dC[0]!==dD[0])||(dC[1]!==dD[1]));},_offsetXY:function(dE,dD){var A=this;var dC=A[b2].getXY();return[dE[0]+dC[0]*dD,dE[1]+dC[1]*dD];},_onEventDragEnd:function(dC){var A=this;var dD=A[K];if(dD){dD.move(A._getPositionDate(A.lassoLastPosition));dD.set(aJ,true);A[b2].removeClass(y).unselectable();dC.target.set(c8,A.originalDragNode);A.removeLasso();A.removeProxy();A.get(t).syncEventsUI();}A[K]=null;},_onEventDragStart:function(dF){var A=this;var dG=A[K]=A[aM][ax].get(dB).getData(aR);if(dG){A._syncCellDimensions();var dC=[dF.pageX,dF.pageY];var dD=A._findPosition(A._offsetXY(dC,-1));var dE=aD.add(A._getPositionDate(dD),aD.MINUTES,dG.getMinutesDuration());A.renderLasso(dD,A._getDatePosition(dE));dG.set(aJ,false);A._syncProxyNodeUI(dG);A.lassoStartPosition=A.lassoLastPosition=dD;A[b2].addClass(y).unselectable();A.originalDragNode=dF.target.get(c8);dF.target.set(c8,A[bL]);}},_onMouseDownGrid:function(dD){var A=this;var dE=dD.target;if(dE.test([cF+s,cF+cT].join(bV))){A._recording=true;A._syncCellDimensions();var dC=A._offsetXY([dD.pageX,dD.pageY],-1);A.lassoStartPosition=A.lassoLastPosition=A._findPosition(dC);A.renderLasso(A.lassoStartPosition,A.lassoLastPosition);A[b2].unselectable();}},_onMouseMoveGrid:function(dE){var dC=this;var dF=dE.currentTarget;var dD=[dE.pageX,dE.pageY];var A=dC._findPosition(dC._offsetXY(dD,-1));if(dC._recording&&dC._hasLassoChanged(A)){dC.lassoLastPosition=A;dC.renderLasso(dC.lassoStartPosition,A);}},_onMouseUpGrid:function(dH){var dC=this;var dG=dC.get(t);var dE=dG.get(dz);if(dE&&dC._recording&&!dG.get(cv)){var dF=dC._getPositionDate(dC.lassoStartPosition);var dD=dC._getPositionDate(dC.lassoLastPosition);var A=new Date(Math.min(dF,dD));A.setHours(0,0,0);var dI=new Date(Math.max(dF,dD));dI.setHours(23,59,59);dE.set(T,true);dE.set(aP,dI);dE.set(c5,A);dE.showOverlay([dH.pageX,dH.pageY]);dC._recording=false;}},_setupDragDrop:function(){var dC=this;if(!dC[aM]){dC[aM]=new c0.DD.Delegate(dC.get(G));}var A=dC[aM][ax];A.unplug(c0.Plugin.DDConstrained);A.unplug(c0.Plugin.DDNodeScroll);A.unplug(c0.Plugin.DDProxy);A.plug(c0.Plugin.DDConstrained,{bubbleTargets:dC,constrain:dC.bodyNode});A.plug(c0.Plugin.DDNodeScroll,{node:dC.bodyNode,scrollDelay:150});A.plug(c0.Plugin.DDProxy,{moveOnEnd:false,positionProxy:false});},_syncCellDimensions:function(){var A=this;var dD=A.get(bh);var dC=Math.ceil(dD/a3);var dE=Math.min(dD,a3);A.gridCellHeight=A[b2].get(cW)/dC;A.gridCellWidth=A[b2].get(cY)/dE;},_syncProxyNodeUI:function(dC){var A=this;var dD=dC.get(dB).item(0);A[bL].setStyles({backgroundColor:dD.getStyle("backgroundColor"),display:"block",width:"200px"});A[bL].appendTo(A[b2]);A[bL].setContent(dC.get(a4));}});c0.Base.mix(c0.SchedulerTableView,[c0.SchedulerTableViewDD]);},"@VERSION@",{skinnable:true,requires:["aui-scheduler-event","aui-calendar","aui-button-item","dd-drag","dd-delegate","dd-drop","dd-constrain"]});AUI.add("aui-scheduler-event",function(aK){var an=aK.Lang,bj=an.isString,f=an.isDate,a9=an.isFunction,G=an.isObject,bc=an.isBoolean,ac=an.isNumber,aY=aK.ColorUtil,j=aK.DataType.DateMath,a5=aK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);
}),be="-",t="&ndash;",ay=".",p="",q=" ",l="_",aM="_propagateSet",Q="activeView",T="borderColor",aO="borderColorRGB",aI="borderStyle",bq="borderWidth",I="Change",a3="color",aW="colorBrightnessFactor",bd="colorSaturationFactor",aG="content",w="disabled",a0="duration",aP="endDate",aS="eventClass",aq="eventStack",bk="events",au="hidden",H="hsbColor",at="icon",aa="icons",a1="id",ai="inherit",aX="isoTime",bp="locale",aZ="never",n="node",h="overlay",aL="parentEvent",bv="recorder",aN="repeat",bi="repeated",P="repeatedEvents",bb="repeater",af="scheduler",av="scheduler-event",ax="scheduler-event-recorder",bm="startDate",a7="template",aV="title",e="titleDateFormat",ao="visible",d="%H:%M",a6="%I:%M",E=aK.getClassName,k=E(at),s=E(av),aQ=E(av,aG),C=E(av,au),bg=E(av,w),ap=E(av,bv),aB=E(av,bi),am=E(av,bb),D=E(av,aV),bo=E(av,aa),v=E(av,at,w),b=E(av,at,bi),bs=E(av,at,bb);var V=aK.Component.create({NAME:av,ATTRS:{allDay:{setter:aK.DataType.Boolean.parse,value:false},borderStyle:{value:"solid",validator:bj},borderWidth:{value:"1px",validator:bj},colorBrightnessFactor:{value:0.75,validator:ac},colorSaturationFactor:{value:1.5,validator:ac},content:{value:"(no title)",validator:bj},color:{lazyAdd:false,setter:"_setColor",value:"#D96666",validator:bj},titleDateFormat:{getter:"_getTitleDateFormat",validator:bj},endDate:{setter:"_setDate",valueFn:function(){var A=j.clone(this.get(bm));A.setHours(A.getHours()+1);return A;}},eventClass:{valueFn:function(){return aK.SchedulerEvent;}},disabled:{value:false,validator:bc},node:{valueFn:function(){return aK.NodeList.create(aK.Node.create(this.EVENT_NODE_TEMPLATE).setData(av,this));}},parentEvent:{},repeat:{value:p,setter:"_setRepeat"},scheduler:{lazyAdd:false,setter:"_setScheduler"},startDate:{setter:"_setDate",valueFn:function(){return new Date();}},visible:{value:true,validator:bc}},EXTENDS:aK.Base,PROPAGATE_ATTRS:[bm,aP,aG,a3,aW,bd,aI,bq,e,ao,w],prototype:{EVENT_NODE_TEMPLATE:'<div class="'+s+'">'+'<div class="'+D+'"></div>'+'<div class="'+aQ+'"></div>'+'<div class="'+bo+'">'+'<span class="'+[k,b].join(q)+'"></span>'+'<span class="'+[k,bs].join(q)+'"></span>'+'<span class="'+[k,v].join(q)+'"></span>'+"</div>"+"</div>",eventStack:null,initializer:function(){var A=this;var L=A.get(n);A[aq]={};aK.Array.each(A.get(aS).PROPAGATE_ATTRS,function(X){A.after(X+I,A._propagateAttrChange);});A._bindUIAttrs();A.syncNodeUI(true);},destroy:function(){var A=this;A.eachRepeatedEvent(function(L,X){L.destroy();});A[aq]={};A.get(n).remove(true);},addPaddingNode:function(){var A=this;A.get(n).push(aK.Node.create(A.EVENT_NODE_TEMPLATE).setData(av,A));A.syncNodeUI();},copyDates:function(L){var A=this;A.set(aP,j.clone(L.get(aP)));A.set(bm,j.clone(L.get(bm)));},copyPropagateAttrValues:function(L,X){var A=this;A.copyDates(L);aK.Array.each(A.get(aS).PROPAGATE_ATTRS,function(Y){if(!((X||{}).hasOwnProperty(Y))){var bA=L.get(Y);if(!G(bA)){A.set(Y,bA);}}});},getBorderColor:function(){var A=this;return A[aO].hex;},getDaysDuration:function(){var A=this;return j.getDayOffset(A.get(aP),A.get(bm));},getHoursDuration:function(){var A=this;return j.getHoursOffset(A.get(aP),A.get(bm));},getMinutesDuration:function(){var A=this;return j.getMinutesOffset(A.get(aP),A.get(bm));},getSecondsDuration:function(){var A=this;return j.getSecondsOffset(A.get(aP),A.get(bm));},sameEndDate:function(L){var A=this;return j.compare(A.get(aP),L.get(aP));},sameStartDate:function(L){var A=this;return j.compare(A.get(bm),L.get(bm));},isAfter:function(Y){var X=this;var L=X.get(bm);var A=Y.get(bm);return j.after(L,A);},isBefore:function(Y){var X=this;var L=X.get(bm);var A=Y.get(bm);return j.before(L,A);},repeatByDate:function(X){var L=this;var Y=L.uidByDate(X);if(!L[aq][Y]){var A=j.clone(X);var bB=j.clone(X);j.copyHours(A,L.get(bm));j.copyHours(bB,L.get(aP));var bA=new L.get(aS)({endDate:bB,parentEvent:L,scheduler:L.get(af),startDate:A});bA.copyPropagateAttrValues(L);L[aq][Y]=bA;}return L[aq][Y];},intersects:function(Y){var X=this;var bA=X.get(aP);var L=X.get(bm);var A=Y.get(bm);return(X.sameStartDate(Y)||j.between(A,L,bA));},intersectHours:function(X){var L=this;var bA=L.get(aP);var A=L.get(bm);var Y=j.clone(A);j.copyHours(Y,X.get(bm));return(j.compare(A,Y)||j.between(Y,A,bA));},isDayBoundaryEvent:function(){var A=this;return j.isDayBoundary(A.get(bm),A.get(aP));},isDayOverlapEvent:function(){var A=this;return j.isDayOverlap(A.get(bm),A.get(aP));},isRepeatableDate:function(L){var A=this;var X=A.get(aN);return(X&&X.validate(A,L));},getClearEndDate:function(){var A=this;return j.safeClearTime(A.get(aP));},getClearStartDate:function(){var A=this;return j.safeClearTime(A.get(bm));},move:function(L){var A=this;var X=A.getMinutesDuration();A.set(bm,L);A.set(aP,j.add(j.clone(L),j.MINUTES,X));},uidByDate:function(L){var A=this;L=f(L)?j.safeClearTime(L):A.getClearStartDate();return[av,L.getTime()].join(l);},setContent:function(X,L){var A=this;A.get(n).each(function(bA){var Y=bA.one(g+aQ);Y.setContent(X);});if(L){A.eachRepeatedEvent(function(Y,bA){Y.setContent(X);});}},setTitle:function(X,L){var A=this;A.get(n).each(function(Y){var bA=Y.one(g+D);bA.setContent(X);});if(L){A.eachRepeatedEvent(function(Y,bA){Y.setTitle(X);});}},syncNodeUI:function(L){var A=this;A._syncUIAttrs();A.syncNodeColorUI(L);A.syncNodeTitleUI(L);A.syncNodeContentUI(L);},syncNodeColorUI:function(L){var A=this;var Y=A.get(n);var bA=A.getBorderColor();if(Y){var X={borderWidth:A.get(bq),borderColor:bA,backgroundColor:A.get(a3),borderStyle:A.get(aI),color:ai};Y.setStyles(X);}if(L){A.eachRepeatedEvent(function(bB,bC){bB.syncNodeColorUI();});}},syncNodeContentUI:function(L){var A=this;A.setContent(A.get(aG),L);},syncNodeTitleUI:function(L){var A=this;var Y=A._formatDate(A.get(bm));var X=A._formatDate(A.get(aP));A.setTitle([Y,X].join(q+t+q),L);},split:function(){var A=this,X=j.clone(A.get(bm)),Y=j.clone(A.get(aP));if(A.isDayOverlapEvent()&&!A.isDayBoundaryEvent()){var L=j.clone(X);L.setHours(24,0,0,0);return[[X,j.toMidnight(j.clone(X))],[L,j.clone(Y)]];}return[[X,Y]];},eachRepeatedEvent:function(L){var A=this;
aK.each(A[aq],L,A);},unlink:function(){var A=this;if(A.get(aL)){A.set(aL,null);}else{A.eachRepeatedEvent(function(L,X){L.unlink();});}A[aq]={};A.syncNodeUI();},_afterDisabledChange:function(L){var A=this;A._uiSetDisabled(L.newVal);},_afterVisibleChange:function(L){var A=this;A._uiSetVisible(L.newVal);},_afterRepeatChange:function(L){var A=this;A._uiSetRepeat(L.newVal);},_afterParentEventChange:function(L){var A=this;A._uiSetParentEvent(L.newVal);},_bindUIAttrs:function(){var A=this;A.after({disabledChange:A._afterDisabledChange,visibleChange:A._afterVisibleChange,parentEventChange:A._afterParentEventChange,repeatChange:A._afterRepeatChange});A._syncUIAttrs();},_propagateAttrChange:function(Y){var A=this;var X=Y.attrName;var L=Y.newVal;A.eachRepeatedEvent(function(bA,bB){var bC=bA[aM+a5(X)];if(bC){bC.apply(A,[bA,X,L]);}else{bA.set(X,Y.newVal);}bA.syncNodeUI();});A.syncNodeUI();},_propagateSetEndDate:function(A,L,Y){var X=j.clone(A.get(aP));j.copyHours(X,Y);A.set(aP,X);},_propagateSetStartDate:function(L,X,Y){var A=j.clone(L.get(bm));j.copyHours(A,Y);L.set(bm,A);},_setColor:function(L){var A=this;A[H]=aY.rgb2hsb(aY.getRGB(L));A[T]=aK.clone(A[H]);A[T].b*=A.get(aW);A[T].s*=A.get(bd);A[aO]=aY.hsb2rgb(A[T]);return L;},_setDate:function(L){var A=this;if(ac(L)){L=new Date(L);}return L;},_setRepeat:function(L){var A=this;if(bj(L)){L=aK.SchedulerEventRepeat[L];}return G(L)?L:null;},_setScheduler:function(X){var A=this;var L=A.get(af);if(L){A.removeTarget(L);}A.addTarget(X);return X;},_syncUIAttrs:function(){var A=this;A._uiSetDisabled(A.get(w));A._uiSetVisible(A.get(ao));A._uiSetParentEvent(A.get(aL));A._uiSetRepeat(A.get(aN));},_formatDate:function(X,Y){var L=this;var A=L.get(bp);Y=Y||L.get(e);return aK.DataType.Date.format(X,{format:Y,locale:A});},_getTitleDateFormat:function(X){var A=this;if(!bj(X)){var L=A.get(af);X=(L&&L.get(Q).get(aX))?d:a6;}return X;},_uiSetDisabled:function(L){var A=this;A.get(n).toggleClass(bg,!!L);},_uiSetParentEvent:function(L){var A=this;A.get(n).toggleClass(aB,!!L);},_uiSetRepeat:function(X){var A=this;var L=!!X&&X!==aK.SchedulerEventRepeat[aZ];A.get(n).toggleClass(am,L);},_uiSetVisible:function(L){var A=this;A.get(n).toggleClass(C,!L);}}});aK.SchedulerEvent=V;aK.SchedulerEventRepeat={never:{description:"Never repeat",validate:function(A,L){return false;},value:"never"},daily:{description:"Every day",validate:function(A,L){return true;},value:"daily"},monthly:{description:"Every month",validate:function(L,X){var Y=L.get(aP);var A=L.get(bm);return(A.getDate()===X.getDate());},value:"monthly"},monWedFri:{description:"Every Monday, Wednesday and Friday",validate:function(A,L){return j.isMonWedOrFri(L);},value:"monWedFri"},tuesThurs:{description:"Every Tuesday and Thursday",validate:function(A,L){return j.isTueOrThu(L);},value:"tuesThurs"},weekDays:{description:"Every week days",validate:function(A,L){return j.isWeekDay(L);},value:"weekDays"},weekly:{description:"Every week",validate:function(L,X){var Y=L.get(aP);var A=L.get(bm);return(A.getDay()===X.getDay());},value:"weekly"},yearly:{description:"Every year",validate:function(L,X){var Y=L.get(aP);var A=L.get(bm);return((A.getMonth()===X.getMonth())&&(A.getDay()===X.getDay()));},value:"yearly"}};var aw=aK.Lang,a=aw.isArray,G=aw.isObject,Q="activeView",J="allDay",c="arrow",aU="body",aA="bodyContent",o="boundingBox",az="cancel",a2="click",aG="content",aT="date",aH="dateFormat",aj="delete",ba="description",R="edit",bu="event",aS="eventClass",B="footerContent",aE="form",z="header",u="hide",aX="isoTime",aF="link",n="node",O="offsetHeight",bh="offsetWidth",h="overlay",S="overlayOffset",bv="recorder",br="rendered",aN="repeat",a4="save",af="scheduler",m="schedulerChange",av="scheduler-event",ax="scheduler-event-recorder",aD="shadow",aC="show",F="startDateChange",N="strings",a7="template",aV="title",bt="tl",ab="toolbar",bl="submit",bn="value",aR="visibleChange",Z="when",al="x",ak="y",ae="cancel",M="delete",y="edit",aJ="save",bw="-",g=".",ad="",i="#",r=aK.IO.prototype._serialize,E=aK.getClassName,s=E(af,bu),ap=E(af,bu,bv),bx=E(af,bu,bv,h),x=E(af,bu,bv,h,c),bf=E(af,bu,bv,h,c,aD),ah=E(af,bu,bv,h,aU),a8=E(af,bu,bv,h,aG),ag=E(af,bu,bv,h,aT),U=E(af,bu,bv,h,aE),bz=E(af,bu,bv,h,z),ar=E(af,bu,bv,h,aN),D=E(af,bu,aV),K=new aK.Template('<div class="',bf," ",x,'"></div>','<div class="',x,'"></div>','<input type="hidden" name="startDate" value="{startDate}" />','<input type="hidden" name="endDate" value="{endDate}" />','<div class="',bz,'">','<input class="',a8,'" name="content" value="{content}" />',"</div>",'<div class="',ah,'">','<label class="',ag,'">{date}</label>','<select class="',ar,'" name="repeat">','<tpl for="eventRepeat">','<option {[ (parent.repeat && parent.repeat.value) == parent.eventRepeat[$i].value ? \'selected="selected"\' : "" ]} value="{value}">{description}</option>',"</tpl>","</select>","</div>"),by='<form class="'+U+'" id="schedulerEventRecorderForm"></form>';var W=aK.Component.create({NAME:ax,ATTRS:{allDay:{value:false},content:{value:ad},duration:{value:60},dateFormat:{validator:bj,value:"%a, %B %d,"},event:{},eventClass:{valueFn:function(){return aK.SchedulerEvent;}},strings:{value:{},setter:function(A){return aK.merge({"delete":"Delete","description-hint":"e.g., Dinner at Brian's","no-repeat":"No repeat",cancel:"Cancel",description:"Description",edit:"Edit",repeat:"Repeat",save:"Save",when:"When"},A||{});},validator:G},overlay:{validator:G,value:{align:{points:[bt,bt]},visible:false,width:300,zIndex:500}},overlayOffset:{value:[15,-38],validator:a},template:{value:K},toolbar:{setter:function(X){var L=this;var A=L.get(N);return aK.merge({children:[{handler:aK.bind(L._handleSaveEvent,L),label:A[a4]},{handler:aK.bind(L._handleCancelEvent,L),label:A[az]},{handler:aK.bind(L._handleDeleteEvent,L),label:A[aj]}]},X||{});},validator:G,value:{}}},EXTENDS:aK.SchedulerEvent,prototype:{initializer:function(){var A=this;A.get(n).addClass(ap);A.publish(ae,{defaultFn:A._defCancelEventFn});A.publish(M,{defaultFn:A._defDeleteEventFn});
A.publish(y,{defaultFn:A._defEditEventFn});A.publish(aJ,{defaultFn:A._defSaveEventFn});A.after(m,A._afterSchedulerChange);A[h]=new aK.Overlay(A.get(h));A[ab]=new aK.Toolbar(A.get(ab));},_afterSchedulerChange:function(Y){var A=this;var X=Y.newVal;var L=X.get(o);L.delegate(a2,aK.bind(A._onClickSchedulerEvent,A),g+s);},_defCancelEventFn:function(L){var A=this;A.get(n).remove();A.hideOverlay();},_defDeleteEventFn:function(X){var A=this;var L=A.get(af);L.removeEvent(A.get(bu));A.hideOverlay();L.syncEventsUI();},_defEditEventFn:function(X){var A=this;var L=A.get(af);A.hideOverlay();L.syncEventsUI();},_defSaveEventFn:function(X){var A=this;var L=A.get(af);L.addEvent(X.newSchedulerEvent);A.hideOverlay();L.syncEventsUI();},_handleCancelEvent:function(L){var A=this;A.fire(ae);L.preventDefault();},_handleDeleteEvent:function(L){var A=this;A.fire(M,{schedulerEvent:A.get(bu)});L.preventDefault();},_handleSaveEvent:function(L){var A=this;A.fire(A.get(bu)?y:aJ,{newSchedulerEvent:A.getEventCopy()});L.preventDefault();},_onClickSchedulerEvent:function(X){var A=this;var L=X.currentTarget.getData(av);if(L){A.set(bu,L);A.showOverlay([X.pageX,X.pageY]);A.get(n).remove();}},_onOverlayVisibleChange:function(Y){var L=this;if(Y.newVal){L.populateForm();if(!L.get(bu)){var X=L[h].get(o);var A=X.one(g+a8);setTimeout(function(){A.selectText();},0);}}else{L.set(bu,null);L.get(n).remove();}},_onSubmitForm:function(L){var A=this;A._handleSaveEvent(L);},_renderOverlay:function(){var L=this;var A=L.get(N);L[h].render();L[ab].render();var X=L[h].get(o);X.addClass(bx);L[h].set(B,L[ab].get(o));L[h].on(aR,aK.bind(L._onOverlayVisibleChange,L));L.formNode=aK.Node.create(by);L[h].set(aA,L.formNode);L.formNode.on(bl,aK.bind(L._onSubmitForm,L));},getEventCopy:function(){var A=this;var X=A.get(bu);if(!X){X=new (A.get(aS))({allDay:A.get(J),endDate:A.get(aP),scheduler:A.get(af),startDate:A.get(bm)});X.copyPropagateAttrValues(A,{content:true});}var L=A.serializeForm();X.set(aG,L[aG]);X.set(aN,L[aN]);return X;},getFormattedDate:function(){var X=this;var L=X.get(aH);var bA=(X.get(bu)||X);var bC=bA.get(aP);var bB=bA.get(af);var A=bA.get(bm);var Y=(bB.get(Q).get(aX)?j.toIsoTimeString:j.toUsTimeString);return[bA._formatDate(A,L),Y(A),be,Y(bC)].join(q);},getTemplateData:function(){var L=this;var A=L.get(N);var X=(L.get(bu)||L);return{content:X.get(aG)||A["description-hint"],date:L.getFormattedDate(),endDate:X.get(aP).getTime(),eventRepeat:L.eventRepeatArray,repeat:X.get(aN),startDate:X.get(bm).getTime()};},hideOverlay:function(){var A=this;A[h].hide();},populateForm:function(){var A=this;if(!A.eventRepeatArray){A.eventRepeatArray=[];aK.each(aK.SchedulerEventRepeat,function(L){A.eventRepeatArray.push({description:L[ba],value:L[bn]});});}A.formNode.setContent(A.get(a7).parse(A.getTemplateData()));},serializeForm:function(){var A=this;return aK.QueryString.parse(r(A.formNode.getDOM()));},showOverlay:function(Y,bB){var A=this;var X=A.get(S);if(!A[h].get(br)){A._renderOverlay();}A[h].show();if(!Y){var L=(A.get(bu)||A).get(n);var bA=L.one(g+D);bB=[X[0]+bA.get(bh),X[1]+bA.get(O)/2];Y=bA.getXY();}bB=bB||X;Y[0]+=bB[0];Y[1]+=bB[1];A[h].set("xy",Y);}}});aK.SchedulerEventRecorder=W;},"@VERSION@",{skinnable:true,requires:["aui-base","aui-color-util","aui-datatype","aui-template","aui-toolbar","io-form","querystring","overlay"]});AUI.add("aui-scheduler-calendar",function(d){var i=d.Lang,j=i.isArray,c=i.isBoolean,b=i.isString,g=function(o){return(o instanceof d.SchedulerEvent);},a="color",k="disabled",m="events",h="pallete",n="scheduler",e="scheduler-calendar",l="visible";var f=d.Component.create({NAME:e,ATTRS:{color:{valueFn:function(){var p=this;var q=p.get(h);var o=Math.ceil(Math.random()*q.length)-1;return q[o];},validator:b},disabled:{value:false,validator:c},name:{value:"(no name)",validator:b},pallete:{value:["#d96666","#e67399","#b373b3","#8c66d9","#668cb3","#668cd9","#59bfb3","#65ad89","#4cb052","#8cbf40","#bfbf4d","#e0c240","#f2a640","#e6804d","#be9494","#a992a9","#8997a5","#94a2be","#85aaa5","#a7a77d","#c4a883","#c7561e","#b5515d","#c244ab","#603f99","#536ca6","#3640ad","#3c995b","#5ca632","#7ec225","#a7b828","#cf9911","#d47f1e","#b56414","#914d14","#ab2671","#9643a5","#4585a3","#737373","#41a587","#d1bc36","#ad2d2d"],validator:j},scheduler:{lazyAdd:false,setter:"_setScheduler"},visible:{value:true,validator:c}},EXTENDS:d.Base,AUGMENTS:d.SchedulerEventSupport,prototype:{initializer:function(){var o=this;o.after("colorChange",o._afterColorChange);o.after("disabledChange",o._afterDisabledChange);o.after("eventsChange",o._afterEventsChange);o.after("visibleChange",o._afterVisibleChange);o._uiSetColor(o.get(a));o._uiSetDisabled(o.get(k));o._uiSetEvents(o.get(m));o._uiSetVisible(o.get(l));},_afterColorChange:function(p){var o=this;o._uiSetColor(p.newVal);},_afterDisabledChange:function(p){var o=this;o._uiSetDisabled(p.newVal);},_afterEventsChange:function(p){var o=this;o._uiSetEvents(p.newVal);},_afterVisibleChange:function(p){var o=this;o._uiSetVisible(p.newVal);},_propagateAttr:function(p,q){var o=this;o.eachEvent(function(r){r.set(p,q);});},_setScheduler:function(q){var o=this;var p=o.get(n);if(p){o.removeTarget(p);}o.addTarget(q);return q;},_uiSetColor:function(p){var o=this;o._propagateAttr(a,o.get(a));},_uiSetDisabled:function(p){var o=this;o._propagateAttr(k,p);},_uiSetEvents:function(q){var o=this;var p=o.get(n);o._propagateAttr(a,o.get(a));o._propagateAttr(k,o.get(k));o._propagateAttr(l,o.get(l));if(p){p.removeEvents(o);p.addEvents(q);p.syncEventsUI();}},_uiSetVisible:function(p){var o=this;o._propagateAttr(l,p);}}});d.SchedulerCalendar=f;},"@VERSION@",{requires:["aui-scheduler-event"],skinnable:false});AUI.add("aui-scheduler",function(a){},"@VERSION@",{skinnable:true,use:["aui-scheduler-base","aui-scheduler-view","aui-scheduler-event","aui-scheduler-calendar"]});