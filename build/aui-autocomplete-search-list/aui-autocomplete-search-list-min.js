AUI.add("aui-autocomplete-search-list",function(k){var e="AutocompleteSearchList",l="add",u="''",s="'Search'",t="checked",c="click",p=", ",n="demo",a=k.config.doc,o="phraseMatch",f="remove",g="render",v="searchInitially",j="",d="value",i='<div class="aui-autocomplete-search-list" />',r='<span class="aui-field-content aui-autocomplete-search-list-ac-container">',m='<input class="aui-field-input aui-field-input-text" id="ac-input" type="text" name="test-input" value="Search" autocomplete="off" onfocus="if(this.value=='+s+") {this.value="+u+'};" onblur="if(!this.value) {this.value='+s+'};this._haschanged=false;"/></span>',h=' checked="checked" ',b="no-matches";var q=function(){};k.mix(q,{NAME:e,NS:e,EXTENDS:k.Plugin.Base,AUGMENTS:[k.AutoCompleteBase],ATTRS:{entries:{value:null},entriesNode:{value:null},initialResult:{value:null},inputNode:{value:"#ac-input"},inputSelector:{value:null},minQueryLength:{value:0},mode:{value:null},noResultsMessage:{value:null},resultFilters:{value:o},searchInitially:{value:true},source:{value:null},tagsSelector:{value:null},template:{valueFn:function(){var w=this;var x=w.get("templateType");switch(x){case"asset-tags-selector":default:return k.AutocompleteSearchList.TPL||new k.Template('<fieldset class="{[(!values.results || !values.results.length) ? "',b,'" : "',j,'" ]}">','<tpl for="results">','<label title="{text}"><input {[values.checked ? "checked" : ""]} type="checkbox" value="{text}" />{text}</label>',"</tpl>",'<div class="lfr-tag-message">{noResultsMessage}</div>',"</fieldset>");break;}}},templateType:{value:"asset-tags-selector"}},prototype:{initializer:function(x){var w=this;var z=w.get("inputSelector");var y=w.get("tagsSelector");if(y){w.tagsSelector=y;w.entries=y.entries;}this.afterHostEvent(g,function(){w._createNodes(x.host.bodyNode);w.bindUI();if(w.get(v)){w._initialSearch();}if(y||z){var A=k.bind(w._onCheckboxClick,w);w.entriesNode.delegate(c,A,"input[type=checkbox]");}});},bindUI:function(){var w=this;w.before("results",function(x){var y=w._formatEventResults(x);w._renderResults(y);});if(w.entries){w.entries.after("add",w._updateHiddenInput,w);}},refreshEntries:function(x){var w=this;var y=w.initialResult;if(x){w.entries=x;}y=w._getHiddenResultsInput(y);w._renderResults({results:y});},_createNodes:function(x){var w=this;var z=k.Node.create(i);var y=k.Node.create(r+m);x.append(y);x.append(z);w.inputNode=y;w.entriesNode=z;},_formatInitialSearch:function(){var w=this;var x=w.get("initialResult");k.Array.map(x,function(z,y,A){z.text=z.name;z.checked=z.assetCount;});w.initialResult=x;return{results:x};},_formatEventResults:function(y){var w=this;var x=k.Array.map(y.results,function(B,A,C){var z=w.entries;if(z){if(w.tagsSelector){B.raw.checked=z.indexOfKey(B.text)>-1?h:j;}else{B.raw.checked=z.indexOf(B.text)>-1?h:j;}}return B.raw;});return{results:x};},_getHiddenResultsInput:function(y){var w=this;var x=w.entries.keys;k.Array.map(y,function(A,z,B){A.checked=!!(x.indexOf(A.text)+1);});return y;},_initialSearch:function(){var w=this;if(w.tagsSelector){var x=w._formatInitialSearch();w._renderResults(x);}else{w.sendRequest(j);}},_onCheckboxClick:function(w){var H=this;var A=w.currentTarget;var G=A.get(t);var E=A.val();var B=H.get("tagsSelector");if(B){var x=G?l:f;H.tagsSelector[x](E);}else{if(H.get("inputSelector")){var F=H.get("inputSelector");var I=k.one(F);var D=I.val();var y=H.entries;if(!y){y=[];}if(G){D=D?D+p+E:E;y.push(E);}else{var J=new RegExp(p+E);D=D.replace(J,j);J=new RegExp(E);D=D.replace(J,j);if(D.indexOf(p)===0){D=D.substring(2);}var C=y.indexOf(E);var z=y.splice(C,1);}I.set(d,D);H.entries=y;}}},_renderResults:function(x){var w=this;x.noResultsMessage=w.get("noResultsMessage");template=w.get("template");template.render(x,w.entriesNode);},_updateHiddenInput:function(B){var w=this;var A=w.initialResult;var z=B.attrName;var y=w.entries.values;var x=y[y.length-1];var C=k.Array.map(A,function(E,D,F){return E.text;});if(C.indexOf(z)<0){x.assetCount=1;x.checked=true;x.entry=B.item.entry;x.name=z;x.text=z;x.value=z;A.push(x);}w.refreshEntries(null);}}},true);k.AutocompleteSearchList=k.Component.build(e,k.Plugin.Base,[k.AutoCompleteBase,q]);k.AutocompleteSearchList.NS=e;},"@VERSION@",{skinnable:true,requires:["aui-base","aui-template","autocomplete","autocomplete-highlighters","autocomplete-filters","plugin"]});