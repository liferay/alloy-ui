AUI.add("aui-autocomplete-search-list",function(m){var q=m.Array.indexOf,e="AutocompleteSearchList",a=m.config.doc,n="add",w="''",v="checked",d="click",r=", ",c="inputSelector",p="phraseMatch",f="remove",h="render",g="tagsSelector",k="template",u="'Search'",x="searchInitially",l="",j='<div class="aui-autocomplete-search-list" />',t='<span class="aui-field-content aui-autocomplete-search-list-ac-container">',o='<input class="aui-field-input aui-field-input-text" id="ac-input" type="text" name="test-input" value="Search" autocomplete="off" onfocus="if(this.value=='+u+") {this.value="+w+'};" onblur="if(!this.value) {this.value='+u+'};this._haschanged=false;"/></span>',i=' checked="checked" ',b="no-matches";var s=function(){};m.mix(s,{NAME:e,NS:e,EXTENDS:m.Plugin.Base,AUGMENTS:[m.AutoCompleteBase],ATTRS:{entries:{value:null},entriesNode:{value:null},initialResult:{value:null},inputNode:{value:"#ac-input"},inputSelector:{value:null},minQueryLength:{value:0},noResultsMessage:{value:null},resultFilters:{value:p},searchInitially:{value:true},source:{value:null},tagsSelector:{value:null},template:{valueFn:function(){var y=this;var z=y.get("templateType");switch(z){case"asset-tags-selector":default:return m.AutocompleteSearchList.TPL||new m.Template('<fieldset class="{[(!values.results || !values.results.length) ? "',b,'" : "',l,'" ]}">','<tpl for="results">','<label title="{text}"><input {[values.checked ? "checked" : ""]} type="checkbox" value="{text}" />{text}</label>',"</tpl>",'<div class="lfr-tag-message">{noResultsMessage}</div>',"</fieldset>");break;}}},templateType:{value:"asset-tags-selector"}},prototype:{initializer:function(z){var y=this;var B=y.get(c);var A=y.get(g);if(A){y.tagsSelector=A;y.entries=A.entries;}this.afterHostEvent(h,function(){y._createNodes(z.host.bodyNode);y.bindUI();if(y.get(x)){y._initialSearch();}if(A||B){var C=m.bind(y._onCheckboxClick,y);y.entriesNode.delegate(d,C,"input[type=checkbox]");}});},bindUI:function(){var y=this;y.before("results",function(z){var A=y._formatEventResults(z);y._renderResults(A);});if(y.entries){y.entries.after("add",y._updateHiddenInput,y);}},refreshEntries:function(z){var y=this;var A=y.initialResult;if(z){y.entries=z;}A=y._getHiddenResultsInput(A);y._renderResults({results:A});},_createNodes:function(z){var y=this;var B=m.Node.create(j);var A=m.Node.create(t+o);z.append(A);z.append(B);y.entriesNode=B;y.inputNode=A;},_formatInitialSearch:function(){var y=this;var z=y.get("initialResult");m.Array.map(z,function(B,A,C){B.checked=B.assetCount;B.text=B.name;});y.initialResult=z;return{results:z};},_formatEventResults:function(A){var y=this;var z=m.Array.map(A.results,function(D,C,E){var B=y.entries;if(B){if(y.tagsSelector){D.raw.checked=B.indexOfKey(D.text)>-1?i:l;}else{D.raw.checked=q(B,D.text)>-1?i:l;}}return D.raw;});return{results:z};},_getHiddenResultsInput:function(A){var y=this;var z=y.entries.keys;m.Array.map(A,function(C,B,D){C.checked=!!(q(z,C.text)+1);});return A;},_initialSearch:function(){var y=this;if(y.tagsSelector){var z=y._formatInitialSearch();y._renderResults(z);}else{y.sendRequest(l);}},_onCheckboxClick:function(y){var J=this;var H=J.get(c);var D=J.get(g);var C=y.currentTarget;var I=C.get(v);var G=C.val();if(D){var z=I?n:f;J.tagsSelector[z](G);}else{if(H){var L=m.one(H);var F=L.val();var A=J.entries||[];if(I){F=F?F+r+G:G;A.push(G);}else{var K=new RegExp(r+G);F=F.replace(K,l);K=new RegExp(G);F=F.replace(K,l);if(F.indexOf(r)==0){F=F.substring(2);}var E=q(A,G);var B=A.splice(E,1);}L.val(F);J.entries=A;}}},_renderResults:function(A){var y=this;var z=y.get(k);A.noResultsMessage=y.get("noResultsMessage");z.render(A,y.entriesNode);},_updateHiddenInput:function(E){var y=this;var D=y.initialResult;var B=y.entries.values;var C=E.attrName;var F=B.length-1;var A=B[F];var z=m.Array.map(D,function(H,G,I){return H.text;});if(q(z,C)<0){A.assetCount=1;A.checked=true;A.entry=E.item.entry;A.name=C;A.text=C;A.value=C;D.push(A);}y.refreshEntries(null);}}},true);m.AutocompleteSearchList=m.Component.build(e,m.Plugin.Base,[m.AutoCompleteBase,s]);m.AutocompleteSearchList.NS=e;},"@VERSION@",{skinnable:true,requires:["aui-base","aui-template","autocomplete","autocomplete-highlighters","autocomplete-filters","plugin"]});