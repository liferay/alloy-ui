AUI.add("aui-search-ternary-search-tree",function(b){var d=b.Lang,i="TernarySearchTree",a="character",g="child",h="largerNode",f="smallerNode",j="word";var c=b.Component.create({NAME:i,NS:"ternarysearchtree",EXTENDS:b.Base,prototype:{add:function(n){var k=this;var l=k._root;var m=k._insert(l,n,0);if(!d.isValue(l)){k._root=m;}},contains:function(n,l){var k=this;var m=k._search(k._root,n,0,l);return !!(d.isValue(m)&&m.isEndOfWord());},empty:function(){var k=this;k._root=null;},patternMatch:function(m){var k=this;var l=[];k._patternMatch(k._root,m,0,l);return l;},prefixSearch:function(o,l){var k=this;var m=[];var n=k._search(k._root,o,0,l);if(n){k._inOrderTraversal(n.get(g),m);}return m;},_inOrderTraversal:function(m,l){var k=this;if(!d.isValue(m)){return;}k._inOrderTraversal(m.get(f),l);if(m.isEndOfWord()){l.push(m.get(j));}k._inOrderTraversal(m.get(g),l);k._inOrderTraversal(m.get(h),l);},_insert:function(m,o,l){var k=this;var n=o.charAt(l);if(d.isValue(m)){if(n===m.get(a)){if(l+1<o.length){m.set(g,k._insert(m.get(g),o,l+1));}else{m.set(j,o);}}else{if(n<m.get(a)){m.set(f,k._insert(m.get(f),o,l));}else{m.set(h,k._insert(m.get(h),o,l));}}}else{m=k._insert(new b.TernarySearchNode({character:n}),o,l);}return m;},_patternMatch:function(o,q,m,n){var k=this;if(d.isValue(o)){var p=q.charAt(m);var l=o.get(a);var r=c.PATTERN_CHAR;if(p===r||p<l){k._patternMatch(o.get(f),q,m,n);}if(p===r||p===l){if(m+1<q.length){k._patternMatch(o.get(g),q,m+1,n);}else{if(o.isEndOfWord()){n.push(o.get(j));}}}if(p===r||p>l){k._patternMatch(o.get(h),q,m,n);}}},_search:function(p,r,o,m){var l=this;var k=p;if(d.isValue(p)){var q=r.charAt(o);var n=p.get(a);if(m){q=q.toLowerCase();n=n.toLowerCase();}if(q===n){if(o+1<r.length){k=l._search(p.get(g),r,o+1,m);}}else{if(q<n){k=l._search(p.get(f),r,o,m);}else{k=l._search(p.get(h),r,o,m);}}}return k;}}});c.PATTERN_CHAR="?";b.TernarySearchTree=c;var d=b.Lang,i="TernarySearchNode";var e=b.Component.create({NAME:i,NS:"ternarysearchnode",ATTRS:{character:{validator:"_validateCharacter",writeOnce:true},child:{validator:"_validateChild"},largerNode:{validator:"_isInstanceOfNode"},smallerNode:{validator:"_isInstanceOfNode"},word:{validator:d.isString}},EXTENDS:b.Base,prototype:{isEndOfWord:function(){return !!this.get("word");},_isInstanceOfNode:function(k){return k instanceof b.TernarySearchNode;},_validateCharacter:function(k){return d.isString(k)&&k.length===1;}}});b.TernarySearchNode=e;},"@VERSION@",{skinnable:false,requires:["aui-base"]});